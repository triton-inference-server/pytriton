
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../examples/">
      
      
        <link rel="next" href="../CHANGELOG/">
      
      <link rel="icon" href="../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.4">
    
    
      
        <title>API Reference - PyTriton</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.240905d7.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.a0c5b2b5.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../assets/styles.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#api-reference" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="PyTriton" class="md-header__button md-logo" aria-label="PyTriton" data-md-component="logo">
      
  <img src="../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            PyTriton
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              API Reference
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/triton-inference-server/pytriton" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Git Repository
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="PyTriton" class="md-nav__button md-logo" aria-label="PyTriton" data-md-component="logo">
      
  <img src="../assets/logo.png" alt="logo">

    </a>
    PyTriton
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/triton-inference-server/pytriton" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Git Repository
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Installation and Packaging
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Installation and Packaging
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        Installation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../building/" class="md-nav__link">
        Building binary package
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../quick_start/" class="md-nav__link">
        Quick Start
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../deploying_models/" class="md-nav__link">
        Deploying Models
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../inference_callable/" class="md-nav__link">
        Inference Callable Design
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../examples/" class="md-nav__link">
        Examples
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          API Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        API Reference
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pytriton.triton.TritonConfig" class="md-nav__link">
    TritonConfig
  </a>
  
    <nav class="md-nav" aria-label="TritonConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pytriton.triton.TritonConfig.__post_init__" class="md-nav__link">
    __post_init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.triton.TritonConfig.from_env" class="md-nav__link">
    from_env()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.triton.TritonConfig.to_dict" class="md-nav__link">
    to_dict()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytriton.decorators" class="md-nav__link">
    decorators
  </a>
  
    <nav class="md-nav" aria-label="decorators">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pytriton.decorators.ModelConfigDict" class="md-nav__link">
    ModelConfigDict
  </a>
  
    <nav class="md-nav" aria-label="ModelConfigDict">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pytriton.decorators.ModelConfigDict.__delitem__" class="md-nav__link">
    __delitem__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.decorators.ModelConfigDict.__getitem__" class="md-nav__link">
    __getitem__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.decorators.ModelConfigDict.__iter__" class="md-nav__link">
    __iter__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.decorators.ModelConfigDict.__len__" class="md-nav__link">
    __len__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.decorators.ModelConfigDict.__setitem__" class="md-nav__link">
    __setitem__()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.decorators.TritonContext" class="md-nav__link">
    TritonContext
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.decorators.batch" class="md-nav__link">
    batch()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.decorators.convert_output" class="md-nav__link">
    convert_output()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.decorators.fill_optionals" class="md-nav__link">
    fill_optionals()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.decorators.first_value" class="md-nav__link">
    first_value()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.decorators.get_inference_request_batch_size" class="md-nav__link">
    get_inference_request_batch_size()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.decorators.get_model_config" class="md-nav__link">
    get_model_config()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.decorators.get_triton_context" class="md-nav__link">
    get_triton_context()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.decorators.group_by_keys" class="md-nav__link">
    group_by_keys()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.decorators.group_by_values" class="md-nav__link">
    group_by_values()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.decorators.pad_batch" class="md-nav__link">
    pad_batch()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.decorators.sample" class="md-nav__link">
    sample()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.decorators.triton_context" class="md-nav__link">
    triton_context()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytriton.triton.Triton" class="md-nav__link">
    Triton
  </a>
  
    <nav class="md-nav" aria-label="Triton">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pytriton.triton.Triton.__enter__" class="md-nav__link">
    __enter__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.triton.Triton.__exit__" class="md-nav__link">
    __exit__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.triton.Triton.bind" class="md-nav__link">
    bind()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.triton.Triton.is_alive" class="md-nav__link">
    is_alive()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.triton.Triton.run" class="md-nav__link">
    run()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.triton.Triton.serve" class="md-nav__link">
    serve()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.triton.Triton.stop" class="md-nav__link">
    stop()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytriton.model_config.tensor.Tensor" class="md-nav__link">
    Tensor
  </a>
  
    <nav class="md-nav" aria-label="Tensor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pytriton.model_config.tensor.Tensor.__post_init__" class="md-nav__link">
    __post_init__()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytriton.model_config.common" class="md-nav__link">
    common
  </a>
  
    <nav class="md-nav" aria-label="common">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pytriton.model_config.common.DeviceKind" class="md-nav__link">
    DeviceKind
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.model_config.common.DynamicBatcher" class="md-nav__link">
    DynamicBatcher
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.model_config.common.QueuePolicy" class="md-nav__link">
    QueuePolicy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.model_config.common.TimeoutAction" class="md-nav__link">
    TimeoutAction
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytriton.model_config.model_config.ModelConfig" class="md-nav__link">
    ModelConfig
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytriton.client.client" class="md-nav__link">
    client
  </a>
  
    <nav class="md-nav" aria-label="client">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pytriton.client.client.ModelClient" class="md-nav__link">
    ModelClient
  </a>
  
    <nav class="md-nav" aria-label="ModelClient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pytriton.client.client.ModelClient.model_config" class="md-nav__link">
    model_config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.client.client.ModelClient.__enter__" class="md-nav__link">
    __enter__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.client.client.ModelClient.__exit__" class="md-nav__link">
    __exit__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.client.client.ModelClient.close" class="md-nav__link">
    close()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.client.client.ModelClient.infer_batch" class="md-nav__link">
    infer_batch()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.client.client.ModelClient.infer_sample" class="md-nav__link">
    infer_sample()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.client.client.ModelClient.wait_for_model" class="md-nav__link">
    wait_for_model()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../CHANGELOG/" class="md-nav__link">
        Changelog
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../known_issues/" class="md-nav__link">
        Known Issues
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../CONTRIBUTING/" class="md-nav__link">
        Contributing
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../LICENSE/" class="md-nav__link">
        License
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pytriton.triton.TritonConfig" class="md-nav__link">
    TritonConfig
  </a>
  
    <nav class="md-nav" aria-label="TritonConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pytriton.triton.TritonConfig.__post_init__" class="md-nav__link">
    __post_init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.triton.TritonConfig.from_env" class="md-nav__link">
    from_env()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.triton.TritonConfig.to_dict" class="md-nav__link">
    to_dict()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytriton.decorators" class="md-nav__link">
    decorators
  </a>
  
    <nav class="md-nav" aria-label="decorators">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pytriton.decorators.ModelConfigDict" class="md-nav__link">
    ModelConfigDict
  </a>
  
    <nav class="md-nav" aria-label="ModelConfigDict">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pytriton.decorators.ModelConfigDict.__delitem__" class="md-nav__link">
    __delitem__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.decorators.ModelConfigDict.__getitem__" class="md-nav__link">
    __getitem__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.decorators.ModelConfigDict.__iter__" class="md-nav__link">
    __iter__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.decorators.ModelConfigDict.__len__" class="md-nav__link">
    __len__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.decorators.ModelConfigDict.__setitem__" class="md-nav__link">
    __setitem__()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.decorators.TritonContext" class="md-nav__link">
    TritonContext
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.decorators.batch" class="md-nav__link">
    batch()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.decorators.convert_output" class="md-nav__link">
    convert_output()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.decorators.fill_optionals" class="md-nav__link">
    fill_optionals()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.decorators.first_value" class="md-nav__link">
    first_value()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.decorators.get_inference_request_batch_size" class="md-nav__link">
    get_inference_request_batch_size()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.decorators.get_model_config" class="md-nav__link">
    get_model_config()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.decorators.get_triton_context" class="md-nav__link">
    get_triton_context()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.decorators.group_by_keys" class="md-nav__link">
    group_by_keys()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.decorators.group_by_values" class="md-nav__link">
    group_by_values()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.decorators.pad_batch" class="md-nav__link">
    pad_batch()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.decorators.sample" class="md-nav__link">
    sample()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.decorators.triton_context" class="md-nav__link">
    triton_context()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytriton.triton.Triton" class="md-nav__link">
    Triton
  </a>
  
    <nav class="md-nav" aria-label="Triton">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pytriton.triton.Triton.__enter__" class="md-nav__link">
    __enter__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.triton.Triton.__exit__" class="md-nav__link">
    __exit__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.triton.Triton.bind" class="md-nav__link">
    bind()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.triton.Triton.is_alive" class="md-nav__link">
    is_alive()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.triton.Triton.run" class="md-nav__link">
    run()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.triton.Triton.serve" class="md-nav__link">
    serve()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.triton.Triton.stop" class="md-nav__link">
    stop()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytriton.model_config.tensor.Tensor" class="md-nav__link">
    Tensor
  </a>
  
    <nav class="md-nav" aria-label="Tensor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pytriton.model_config.tensor.Tensor.__post_init__" class="md-nav__link">
    __post_init__()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytriton.model_config.common" class="md-nav__link">
    common
  </a>
  
    <nav class="md-nav" aria-label="common">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pytriton.model_config.common.DeviceKind" class="md-nav__link">
    DeviceKind
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.model_config.common.DynamicBatcher" class="md-nav__link">
    DynamicBatcher
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.model_config.common.QueuePolicy" class="md-nav__link">
    QueuePolicy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.model_config.common.TimeoutAction" class="md-nav__link">
    TimeoutAction
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytriton.model_config.model_config.ModelConfig" class="md-nav__link">
    ModelConfig
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pytriton.client.client" class="md-nav__link">
    client
  </a>
  
    <nav class="md-nav" aria-label="client">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pytriton.client.client.ModelClient" class="md-nav__link">
    ModelClient
  </a>
  
    <nav class="md-nav" aria-label="ModelClient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pytriton.client.client.ModelClient.model_config" class="md-nav__link">
    model_config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.client.client.ModelClient.__enter__" class="md-nav__link">
    __enter__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.client.client.ModelClient.__exit__" class="md-nav__link">
    __exit__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.client.client.ModelClient.close" class="md-nav__link">
    close()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.client.client.ModelClient.infer_batch" class="md-nav__link">
    infer_batch()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.client.client.ModelClient.infer_sample" class="md-nav__link">
    infer_sample()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pytriton.client.client.ModelClient.wait_for_model" class="md-nav__link">
    wait_for_model()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<!--
Copyright (c) 2022, NVIDIA CORPORATION. All rights reserved.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<h1 id="api-reference">API Reference</h1>


<div class="doc doc-object doc-class">



<h2 id="pytriton.triton.TritonConfig" class="doc doc-heading">
        <code>pytriton.triton.TritonConfig</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h2>


  <div class="doc doc-contents first">

  
      <p>Triton Inference Server configuration class for customization of server execution.</p>
<p>The arguments are optional. If value is not provided the defaults for Triton Inference Server are used.
Please, refer to https://github.com/triton-inference-server/server/ for more details.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>id</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</code>
          </td>
          <td><p>Identifier for this server.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>log_verbose</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code>
          </td>
          <td><p>Set verbose logging level. Zero (0) disables verbose logging and
values &gt;= 1 enable verbose logging.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>log_file</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/pathlib.html#module-pathlib">pathlib</a>.<a class="autorefs autorefs-external" title="pathlib.Path" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path">Path</a>]</code>
          </td>
          <td><p>Set the name of the log output file.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>exit_timeout_secs</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code>
          </td>
          <td><p>Timeout (in seconds) when exiting to wait for in-flight inferences to finish.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>exit_on_error</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a>]</code>
          </td>
          <td><p>Exit the inference server if an error occurs during initialization.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>strict_readiness</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a>]</code>
          </td>
          <td><p>If true /v2/health/ready endpoint indicates ready if the server is
responsive and all models are available.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>allow_http</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a>]</code>
          </td>
          <td><p>Allow the server to listen for HTTP requests.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>http_port</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code>
          </td>
          <td><p>The port for the server to listen on for HTTP requests.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>http_address</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</code>
          </td>
          <td><p>The address for the http server to binds to.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>http_thread_count</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code>
          </td>
          <td><p>Number of threads handling HTTP requests.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>allow_grpc</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a>]</code>
          </td>
          <td><p>Allow the server to listen for GRPC requests.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>grpc_port</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code>
          </td>
          <td><p>The port for the server to listen on for GRPC requests.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>grpc_address</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</code>
          </td>
          <td><p>The address for the grpc server to binds to.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>grpc_infer_allocation_pool_size</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code>
          </td>
          <td><p>The maximum number of inference request/response objects
that remain allocated for reuse</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>grpc_use_ssl</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a>]</code>
          </td>
          <td><p>Use SSL authentication for GRPC requests.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>grpc_use_ssl_mutual</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a>]</code>
          </td>
          <td><p>Use mutual SSL authentication for GRPC requests.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>grpc_server_cert</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/pathlib.html#module-pathlib">pathlib</a>.<a class="autorefs autorefs-external" title="pathlib.Path" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path">Path</a>]</code>
          </td>
          <td><p>Path to file holding PEM-encoded server certificate.
Ignored unless grpc_use_ssl is true.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>grpc_server_key</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/pathlib.html#module-pathlib">pathlib</a>.<a class="autorefs autorefs-external" title="pathlib.Path" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path">Path</a>]</code>
          </td>
          <td><p>Path to file holding PEM-encoded server key.
Ignored unless grpc_use_ssl is true.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>grpc_root_cert</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/pathlib.html#module-pathlib">pathlib</a>.<a class="autorefs autorefs-external" title="pathlib.Path" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path">Path</a>]</code>
          </td>
          <td><p>Path to file holding PEM-encoded root certificate.
Ignored unless grpc_use_ssl is true.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>grpc_infer_response_compression_level</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</code>
          </td>
          <td><p>The compression level to be used while returning the inference
response to the peer. Allowed values are none, low, medium and high. Default is none.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>grpc_keepalive_time</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code>
          </td>
          <td><p>The period (in milliseconds) after which a keepalive ping is sent on the transport.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>grpc_keepalive_timeout</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code>
          </td>
          <td><p>The period (in milliseconds) the sender of the keepalive ping waits
for an acknowledgement.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>grpc_keepalive_permit_without_calls</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a>]</code>
          </td>
          <td><p>Allows keepalive pings to be sent even if there are no calls in flight</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>grpc_http2_max_pings_without_data</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code>
          </td>
          <td><p>The maximum number of pings that can be sent when there is no
data/header frame to be sent.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>grpc_http2_min_recv_ping_interval_without_data</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code>
          </td>
          <td><p>If there are no data/header frames being sent on the
transport, this channel argument on the server side controls the minimum time (in milliseconds) that
gRPC Core would expect between receiving successive pings.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>grpc_http2_max_ping_strikes</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code>
          </td>
          <td><p>Maximum number of bad pings that the server will tolerate before sending
an HTTP2 GOAWAY frame and closing the transport.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>allow_metrics</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a>]</code>
          </td>
          <td><p>Allow the server to provide prometheus metrics.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>allow_gpu_metrics</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a>]</code>
          </td>
          <td><p>Allow the server to provide GPU metrics.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>allow_cpu_metrics</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a>]</code>
          </td>
          <td><p>Allow the server to provide CPU metrics.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>metrics_interval_ms</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code>
          </td>
          <td><p>Metrics will be collected once every <metrics-interval-ms> milliseconds.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>metrics_port</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code>
          </td>
          <td><p>The port reporting prometheus metrics.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>allow_sagemaker</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a>]</code>
          </td>
          <td><p>Allow the server to listen for Sagemaker requests.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>sagemaker_port</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code>
          </td>
          <td><p>The port for the server to listen on for Sagemaker requests.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>sagemaker_safe_port_range</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</code>
          </td>
          <td><p>Set the allowed port range for endpoints other than the SageMaker endpoints.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>sagemaker_thread_count</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code>
          </td>
          <td><p>Number of threads handling Sagemaker requests.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>allow_vertex_ai</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a>]</code>
          </td>
          <td><p>Allow the server to listen for Vertex AI requests.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>vertex_ai_port</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code>
          </td>
          <td><p>The port for the server to listen on for Vertex AI requests.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>vertex_ai_thread_count</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code>
          </td>
          <td><p>Number of threads handling Vertex AI requests.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>vertex_ai_default_model</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</code>
          </td>
          <td><p>The name of the model to use for single-model inference requests.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>trace_file</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/pathlib.html#module-pathlib">pathlib</a>.<a class="autorefs autorefs-external" title="pathlib.Path" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path">Path</a>]</code>
          </td>
          <td><p>Set the file where trace output will be saved.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>trace_level</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</code>
          </td>
          <td><p>Specify a trace level.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>trace_rate</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code>
          </td>
          <td><p>Set the trace sampling rate.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>trace_count</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code>
          </td>
          <td><p>Set the number of traces to be sampled.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>trace_log_frequency</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code>
          </td>
          <td><p>Set the trace log frequency.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>response_cache_byte_size</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code>
          </td>
          <td><p>The size in bytes to allocate for a request/response cache.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>buffer_manager_thread_count</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>]</code>
          </td>
          <td><p>The number of threads used to accelerate copies and other operations
required to manage input and output tensor contents.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>



  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="pytriton.triton.TritonConfig.__post_init__" class="doc doc-heading">
<code class="highlight language-python"><span class="n">__post_init__</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Validate configuration for early error handling.</p>

      <details class="quote">
        <summary>Source code in <code>pytriton/triton.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-188">188</a></span>
<span class="normal"><a href="#__codelineno-0-189">189</a></span>
<span class="normal"><a href="#__codelineno-0-190">190</a></span>
<span class="normal"><a href="#__codelineno-0-191">191</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-188" name="__codelineno-0-188"></a><span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-189" name="__codelineno-0-189"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Validate configuration for early error handling.&quot;&quot;&quot;</span>
<a id="__codelineno-0-190" name="__codelineno-0-190"></a>    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">allow_http</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">allow_grpc</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<a id="__codelineno-0-191" name="__codelineno-0-191"></a>        <span class="k">raise</span> <span class="n">PyTritonValidationError</span><span class="p">(</span><span class="s2">&quot;The `http` or `grpc` endpoint has to be allowed.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pytriton.triton.TritonConfig.from_env" class="doc doc-heading">
<code class="highlight language-python"><span class="n">from_env</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Creates TritonConfig from environment variables.</p>
<p>Environment variables should start with <code>PYTRITON_TRITON_CONFIG_</code> prefix. For example:</p>
<div class="highlight"><pre><span></span><code>PYTRITON_TRITON_CONFIG_GRPC_PORT=45436
PYTRITON_TRITON_CONFIG_LOG_VERBOSE=4
</code></pre></div>

<details class="typical-use">
  <summary>Typical use</summary>
  <p>triton_config = TritonConfig.from_env()</p>
</details>
  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="pytriton.triton.TritonConfig" href="#pytriton.triton.TritonConfig">TritonConfig</a></code>
          </td>
          <td><p>TritonConfig class instantiated from environment variables.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pytriton/triton.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-197">197</a></span>
<span class="normal"><a href="#__codelineno-0-198">198</a></span>
<span class="normal"><a href="#__codelineno-0-199">199</a></span>
<span class="normal"><a href="#__codelineno-0-200">200</a></span>
<span class="normal"><a href="#__codelineno-0-201">201</a></span>
<span class="normal"><a href="#__codelineno-0-202">202</a></span>
<span class="normal"><a href="#__codelineno-0-203">203</a></span>
<span class="normal"><a href="#__codelineno-0-204">204</a></span>
<span class="normal"><a href="#__codelineno-0-205">205</a></span>
<span class="normal"><a href="#__codelineno-0-206">206</a></span>
<span class="normal"><a href="#__codelineno-0-207">207</a></span>
<span class="normal"><a href="#__codelineno-0-208">208</a></span>
<span class="normal"><a href="#__codelineno-0-209">209</a></span>
<span class="normal"><a href="#__codelineno-0-210">210</a></span>
<span class="normal"><a href="#__codelineno-0-211">211</a></span>
<span class="normal"><a href="#__codelineno-0-212">212</a></span>
<span class="normal"><a href="#__codelineno-0-213">213</a></span>
<span class="normal"><a href="#__codelineno-0-214">214</a></span>
<span class="normal"><a href="#__codelineno-0-215">215</a></span>
<span class="normal"><a href="#__codelineno-0-216">216</a></span>
<span class="normal"><a href="#__codelineno-0-217">217</a></span>
<span class="normal"><a href="#__codelineno-0-218">218</a></span>
<span class="normal"><a href="#__codelineno-0-219">219</a></span>
<span class="normal"><a href="#__codelineno-0-220">220</a></span>
<span class="normal"><a href="#__codelineno-0-221">221</a></span>
<span class="normal"><a href="#__codelineno-0-222">222</a></span>
<span class="normal"><a href="#__codelineno-0-223">223</a></span>
<span class="normal"><a href="#__codelineno-0-224">224</a></span>
<span class="normal"><a href="#__codelineno-0-225">225</a></span>
<span class="normal"><a href="#__codelineno-0-226">226</a></span>
<span class="normal"><a href="#__codelineno-0-227">227</a></span>
<span class="normal"><a href="#__codelineno-0-228">228</a></span>
<span class="normal"><a href="#__codelineno-0-229">229</a></span>
<span class="normal"><a href="#__codelineno-0-230">230</a></span>
<span class="normal"><a href="#__codelineno-0-231">231</a></span>
<span class="normal"><a href="#__codelineno-0-232">232</a></span>
<span class="normal"><a href="#__codelineno-0-233">233</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-197" name="__codelineno-0-197"></a><span class="nd">@classmethod</span>
<a id="__codelineno-0-198" name="__codelineno-0-198"></a><span class="k">def</span> <span class="nf">from_env</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;TritonConfig&quot;</span><span class="p">:</span>
<a id="__codelineno-0-199" name="__codelineno-0-199"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates TritonConfig from environment variables.</span>
<a id="__codelineno-0-200" name="__codelineno-0-200"></a>
<a id="__codelineno-0-201" name="__codelineno-0-201"></a><span class="sd">    Environment variables should start with `PYTRITON_TRITON_CONFIG_` prefix. For example:</span>
<a id="__codelineno-0-202" name="__codelineno-0-202"></a>
<a id="__codelineno-0-203" name="__codelineno-0-203"></a><span class="sd">        PYTRITON_TRITON_CONFIG_GRPC_PORT=45436</span>
<a id="__codelineno-0-204" name="__codelineno-0-204"></a><span class="sd">        PYTRITON_TRITON_CONFIG_LOG_VERBOSE=4</span>
<a id="__codelineno-0-205" name="__codelineno-0-205"></a>
<a id="__codelineno-0-206" name="__codelineno-0-206"></a><span class="sd">    Typical use:</span>
<a id="__codelineno-0-207" name="__codelineno-0-207"></a>
<a id="__codelineno-0-208" name="__codelineno-0-208"></a><span class="sd">        triton_config = TritonConfig.from_env()</span>
<a id="__codelineno-0-209" name="__codelineno-0-209"></a>
<a id="__codelineno-0-210" name="__codelineno-0-210"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-211" name="__codelineno-0-211"></a><span class="sd">        TritonConfig class instantiated from environment variables.</span>
<a id="__codelineno-0-212" name="__codelineno-0-212"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-213" name="__codelineno-0-213"></a>    <span class="n">prefix</span> <span class="o">=</span> <span class="s2">&quot;PYTRITON_TRITON_CONFIG_&quot;</span>
<a id="__codelineno-0-214" name="__codelineno-0-214"></a>    <span class="n">config</span> <span class="o">=</span> <span class="p">{</span><span class="n">name</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span> <span class="p">:]</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span> <span class="n">value</span> <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">prefix</span><span class="p">)}</span>
<a id="__codelineno-0-215" name="__codelineno-0-215"></a>    <span class="n">fields</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">dataclasses</span><span class="o">.</span><span class="n">Field</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="n">field</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">dataclasses</span><span class="o">.</span><span class="n">fields</span><span class="p">(</span><span class="bp">cls</span><span class="p">)}</span>
<a id="__codelineno-0-216" name="__codelineno-0-216"></a>    <span class="n">unknown_config_parameters</span> <span class="o">=</span> <span class="p">{</span><span class="n">name</span><span class="p">:</span> <span class="n">value</span> <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">config</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">}</span>
<a id="__codelineno-0-217" name="__codelineno-0-217"></a>    <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">unknown_config_parameters</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-218" name="__codelineno-0-218"></a>        <span class="n">LOGGER</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
<a id="__codelineno-0-219" name="__codelineno-0-219"></a>            <span class="sa">f</span><span class="s2">&quot;Ignoring </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">=</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2"> as could not find matching config field. &quot;</span>
<a id="__codelineno-0-220" name="__codelineno-0-220"></a>            <span class="sa">f</span><span class="s2">&quot;Available fields: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span><span class="w"> </span><span class="n">fields</span><span class="p">))</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-221" name="__codelineno-0-221"></a>        <span class="p">)</span>
<a id="__codelineno-0-222" name="__codelineno-0-222"></a>
<a id="__codelineno-0-223" name="__codelineno-0-223"></a>    <span class="k">def</span> <span class="nf">_cast_value</span><span class="p">(</span><span class="n">_field</span><span class="p">,</span> <span class="n">_value</span><span class="p">):</span>
<a id="__codelineno-0-224" name="__codelineno-0-224"></a>        <span class="n">field_type</span> <span class="o">=</span> <span class="n">_field</span><span class="o">.</span><span class="n">type</span>
<a id="__codelineno-0-225" name="__codelineno-0-225"></a>        <span class="n">is_optional</span> <span class="o">=</span> <span class="n">typing_inspect</span><span class="o">.</span><span class="n">is_optional_type</span><span class="p">(</span><span class="n">field_type</span><span class="p">)</span>
<a id="__codelineno-0-226" name="__codelineno-0-226"></a>        <span class="k">if</span> <span class="n">is_optional</span><span class="p">:</span>
<a id="__codelineno-0-227" name="__codelineno-0-227"></a>            <span class="n">field_type</span> <span class="o">=</span> <span class="n">field_type</span><span class="o">.</span><span class="n">__args__</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-228" name="__codelineno-0-228"></a>        <span class="k">return</span> <span class="n">field_type</span><span class="p">(</span><span class="n">_value</span><span class="p">)</span>
<a id="__codelineno-0-229" name="__codelineno-0-229"></a>
<a id="__codelineno-0-230" name="__codelineno-0-230"></a>    <span class="n">config_with_casted_values</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-231" name="__codelineno-0-231"></a>        <span class="n">name</span><span class="p">:</span> <span class="n">_cast_value</span><span class="p">(</span><span class="n">fields</span><span class="p">[</span><span class="n">name</span><span class="p">],</span> <span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">config</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">fields</span>
<a id="__codelineno-0-232" name="__codelineno-0-232"></a>    <span class="p">}</span>
<a id="__codelineno-0-233" name="__codelineno-0-233"></a>    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="o">**</span><span class="n">config_with_casted_values</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pytriton.triton.TritonConfig.to_dict" class="doc doc-heading">
<code class="highlight language-python"><span class="n">to_dict</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Map config object to dictionary.</p>

      <details class="quote">
        <summary>Source code in <code>pytriton/triton.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-193">193</a></span>
<span class="normal"><a href="#__codelineno-0-194">194</a></span>
<span class="normal"><a href="#__codelineno-0-195">195</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-193" name="__codelineno-0-193"></a><span class="k">def</span> <span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-194" name="__codelineno-0-194"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Map config object to dictionary.&quot;&quot;&quot;</span>
<a id="__codelineno-0-195" name="__codelineno-0-195"></a>    <span class="k">return</span> <span class="n">dataclasses</span><span class="o">.</span><span class="n">asdict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="pytriton.decorators" class="doc doc-heading">
          <code>pytriton.decorators</code>


</h2>

  <div class="doc doc-contents first">
  
      <p>Inference callable decorators.</p>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="pytriton.decorators.ModelConfigDict" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ModelConfigDict</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-external" title="collections.abc.MutableMapping" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.MutableMapping">MutableMapping</a></code></p>

  
      <p>Dictionary for storing model configs for inference callable.</p>

  
      <p>Create ModelConfigDict object.</p>

          <details class="quote">
            <summary>Source code in <code>pytriton/decorators.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-69">69</a></span>
<span class="normal"><a href="#__codelineno-0-70">70</a></span>
<span class="normal"><a href="#__codelineno-0-71">71</a></span>
<span class="normal"><a href="#__codelineno-0-72">72</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-69" name="__codelineno-0-69"></a><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Create ModelConfigDict object.&quot;&quot;&quot;</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">TritonModelConfig</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_keys</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Callable</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
</code></pre></div></td></tr></table></div>
          </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h4 id="pytriton.decorators.ModelConfigDict.__delitem__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__delitem__</span><span class="p">(</span><span class="n">infer_callable</span><span class="p">)</span></code>

</h4>


  <div class="doc doc-contents ">
  
      <p>Delete model config for inference callable.</p>

      <details class="quote">
        <summary>Source code in <code>pytriton/decorators.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-85">85</a></span>
<span class="normal"><a href="#__codelineno-0-86">86</a></span>
<span class="normal"><a href="#__codelineno-0-87">87</a></span>
<span class="normal"><a href="#__codelineno-0-88">88</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-85" name="__codelineno-0-85"></a><span class="k">def</span> <span class="fm">__delitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">infer_callable</span><span class="p">:</span> <span class="n">Callable</span><span class="p">):</span>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Delete model config for inference callable.&quot;&quot;&quot;</span>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a>    <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_model_config_key</span><span class="p">(</span><span class="n">infer_callable</span><span class="p">)</span>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a>    <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h4 id="pytriton.decorators.ModelConfigDict.__getitem__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__getitem__</span><span class="p">(</span><span class="n">infer_callable</span><span class="p">)</span></code>

</h4>


  <div class="doc doc-contents ">
  
      <p>Get model config for inference callable.</p>

      <details class="quote">
        <summary>Source code in <code>pytriton/decorators.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-74">74</a></span>
<span class="normal"><a href="#__codelineno-0-75">75</a></span>
<span class="normal"><a href="#__codelineno-0-76">76</a></span>
<span class="normal"><a href="#__codelineno-0-77">77</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-74" name="__codelineno-0-74"></a><span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">infer_callable</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TritonModelConfig</span><span class="p">:</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Get model config for inference callable.&quot;&quot;&quot;</span>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a>    <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_model_config_key</span><span class="p">(</span><span class="n">infer_callable</span><span class="p">)</span>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a>    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h4 id="pytriton.decorators.ModelConfigDict.__iter__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__iter__</span><span class="p">()</span></code>

</h4>


  <div class="doc doc-contents ">
  
      <p>Iterate over inference callable keys.</p>

      <details class="quote">
        <summary>Source code in <code>pytriton/decorators.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-94">94</a></span>
<span class="normal"><a href="#__codelineno-0-95">95</a></span>
<span class="normal"><a href="#__codelineno-0-96">96</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-94" name="__codelineno-0-94"></a><span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Iterate over inference callable keys.&quot;&quot;&quot;</span>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a>    <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_keys</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h4 id="pytriton.decorators.ModelConfigDict.__len__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__len__</span><span class="p">()</span></code>

</h4>


  <div class="doc doc-contents ">
  
      <p>Get number of inference callable keys.</p>

      <details class="quote">
        <summary>Source code in <code>pytriton/decorators.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-90">90</a></span>
<span class="normal"><a href="#__codelineno-0-91">91</a></span>
<span class="normal"><a href="#__codelineno-0-92">92</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-90" name="__codelineno-0-90"></a><span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Get number of inference callable keys.&quot;&quot;&quot;</span>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a>    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h4 id="pytriton.decorators.ModelConfigDict.__setitem__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__setitem__</span><span class="p">(</span><span class="n">infer_callable</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span></code>

</h4>


  <div class="doc doc-contents ">
  
      <p>Set model config for inference callable.</p>

      <details class="quote">
        <summary>Source code in <code>pytriton/decorators.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-79">79</a></span>
<span class="normal"><a href="#__codelineno-0-80">80</a></span>
<span class="normal"><a href="#__codelineno-0-81">81</a></span>
<span class="normal"><a href="#__codelineno-0-82">82</a></span>
<span class="normal"><a href="#__codelineno-0-83">83</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-79" name="__codelineno-0-79"></a><span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">infer_callable</span><span class="p">:</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">item</span><span class="p">:</span> <span class="n">TritonModelConfig</span><span class="p">):</span>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Set model config for inference callable.&quot;&quot;&quot;</span>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_keys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">infer_callable</span><span class="p">)</span>
<a id="__codelineno-0-82" name="__codelineno-0-82"></a>    <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_model_config_key</span><span class="p">(</span><span class="n">infer_callable</span><span class="p">)</span>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="pytriton.decorators.TritonContext" class="doc doc-heading">
        <code>TritonContext</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">

  
      <p>Triton context definition class.</p>



  

  <div class="doc doc-children">











  </div>

  </div>

</div>


<div class="doc doc-object doc-function">



<h3 id="pytriton.decorators.batch" class="doc doc-heading">
<code class="highlight language-python"><span class="n">batch</span><span class="p">(</span><span class="n">wrapped</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Decorator for converting list of request dicts to dict of input batches.</p>
<p>Converts list of request dicts to dict of input batches.
It passes **kwargs to inference callable where each named input contains numpy array with batch of requests
received by Triton server.
We assume that each request has the same set of keys (you can use group_by_keys decorator before
using @batch decorator if your requests may have different set of keys).</p>

      <details class="quote">
        <summary>Source code in <code>pytriton/decorators.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-172">172</a></span>
<span class="normal"><a href="#__codelineno-0-173">173</a></span>
<span class="normal"><a href="#__codelineno-0-174">174</a></span>
<span class="normal"><a href="#__codelineno-0-175">175</a></span>
<span class="normal"><a href="#__codelineno-0-176">176</a></span>
<span class="normal"><a href="#__codelineno-0-177">177</a></span>
<span class="normal"><a href="#__codelineno-0-178">178</a></span>
<span class="normal"><a href="#__codelineno-0-179">179</a></span>
<span class="normal"><a href="#__codelineno-0-180">180</a></span>
<span class="normal"><a href="#__codelineno-0-181">181</a></span>
<span class="normal"><a href="#__codelineno-0-182">182</a></span>
<span class="normal"><a href="#__codelineno-0-183">183</a></span>
<span class="normal"><a href="#__codelineno-0-184">184</a></span>
<span class="normal"><a href="#__codelineno-0-185">185</a></span>
<span class="normal"><a href="#__codelineno-0-186">186</a></span>
<span class="normal"><a href="#__codelineno-0-187">187</a></span>
<span class="normal"><a href="#__codelineno-0-188">188</a></span>
<span class="normal"><a href="#__codelineno-0-189">189</a></span>
<span class="normal"><a href="#__codelineno-0-190">190</a></span>
<span class="normal"><a href="#__codelineno-0-191">191</a></span>
<span class="normal"><a href="#__codelineno-0-192">192</a></span>
<span class="normal"><a href="#__codelineno-0-193">193</a></span>
<span class="normal"><a href="#__codelineno-0-194">194</a></span>
<span class="normal"><a href="#__codelineno-0-195">195</a></span>
<span class="normal"><a href="#__codelineno-0-196">196</a></span>
<span class="normal"><a href="#__codelineno-0-197">197</a></span>
<span class="normal"><a href="#__codelineno-0-198">198</a></span>
<span class="normal"><a href="#__codelineno-0-199">199</a></span>
<span class="normal"><a href="#__codelineno-0-200">200</a></span>
<span class="normal"><a href="#__codelineno-0-201">201</a></span>
<span class="normal"><a href="#__codelineno-0-202">202</a></span>
<span class="normal"><a href="#__codelineno-0-203">203</a></span>
<span class="normal"><a href="#__codelineno-0-204">204</a></span>
<span class="normal"><a href="#__codelineno-0-205">205</a></span>
<span class="normal"><a href="#__codelineno-0-206">206</a></span>
<span class="normal"><a href="#__codelineno-0-207">207</a></span>
<span class="normal"><a href="#__codelineno-0-208">208</a></span>
<span class="normal"><a href="#__codelineno-0-209">209</a></span>
<span class="normal"><a href="#__codelineno-0-210">210</a></span>
<span class="normal"><a href="#__codelineno-0-211">211</a></span>
<span class="normal"><a href="#__codelineno-0-212">212</a></span>
<span class="normal"><a href="#__codelineno-0-213">213</a></span>
<span class="normal"><a href="#__codelineno-0-214">214</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-172" name="__codelineno-0-172"></a><span class="nd">@wrapt</span><span class="o">.</span><span class="n">decorator</span>
<a id="__codelineno-0-173" name="__codelineno-0-173"></a><span class="k">def</span> <span class="nf">batch</span><span class="p">(</span><span class="n">wrapped</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-174" name="__codelineno-0-174"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Decorator for converting list of request dicts to dict of input batches.</span>
<a id="__codelineno-0-175" name="__codelineno-0-175"></a>
<a id="__codelineno-0-176" name="__codelineno-0-176"></a><span class="sd">    Converts list of request dicts to dict of input batches.</span>
<a id="__codelineno-0-177" name="__codelineno-0-177"></a><span class="sd">    It passes **kwargs to inference callable where each named input contains numpy array with batch of requests</span>
<a id="__codelineno-0-178" name="__codelineno-0-178"></a><span class="sd">    received by Triton server.</span>
<a id="__codelineno-0-179" name="__codelineno-0-179"></a><span class="sd">    We assume that each request has the same set of keys (you can use group_by_keys decorator before</span>
<a id="__codelineno-0-180" name="__codelineno-0-180"></a><span class="sd">    using @batch decorator if your requests may have different set of keys).</span>
<a id="__codelineno-0-181" name="__codelineno-0-181"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-182" name="__codelineno-0-182"></a>    <span class="n">req_list</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-183" name="__codelineno-0-183"></a>    <span class="n">input_names</span> <span class="o">=</span> <span class="n">req_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<a id="__codelineno-0-184" name="__codelineno-0-184"></a>
<a id="__codelineno-0-185" name="__codelineno-0-185"></a>    <span class="k">for</span> <span class="n">req_dict2</span> <span class="ow">in</span> <span class="n">req_list</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
<a id="__codelineno-0-186" name="__codelineno-0-186"></a>        <span class="k">if</span> <span class="n">input_names</span> <span class="o">!=</span> <span class="n">req_dict2</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
<a id="__codelineno-0-187" name="__codelineno-0-187"></a>            <span class="k">raise</span> <span class="n">PyTritonValidationError</span><span class="p">(</span><span class="s2">&quot;Cannot batch requests with different set of inputs keys&quot;</span><span class="p">)</span>
<a id="__codelineno-0-188" name="__codelineno-0-188"></a>
<a id="__codelineno-0-189" name="__codelineno-0-189"></a>    <span class="n">inputs</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-190" name="__codelineno-0-190"></a>    <span class="k">for</span> <span class="n">model_input</span> <span class="ow">in</span> <span class="n">input_names</span><span class="p">:</span>
<a id="__codelineno-0-191" name="__codelineno-0-191"></a>        <span class="n">concatenated_input_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">([</span><span class="n">req_dict</span><span class="p">[</span><span class="n">model_input</span><span class="p">]</span> <span class="k">for</span> <span class="n">req_dict</span> <span class="ow">in</span> <span class="n">req_list</span><span class="p">])</span>
<a id="__codelineno-0-192" name="__codelineno-0-192"></a>        <span class="n">inputs</span><span class="p">[</span><span class="n">model_input</span><span class="p">]</span> <span class="o">=</span> <span class="n">concatenated_input_data</span>
<a id="__codelineno-0-193" name="__codelineno-0-193"></a>
<a id="__codelineno-0-194" name="__codelineno-0-194"></a>    <span class="n">args</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
<a id="__codelineno-0-195" name="__codelineno-0-195"></a>    <span class="n">new_kwargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
<a id="__codelineno-0-196" name="__codelineno-0-196"></a>    <span class="n">new_kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span>
<a id="__codelineno-0-197" name="__codelineno-0-197"></a>    <span class="n">outputs</span> <span class="o">=</span> <span class="n">wrapped</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">new_kwargs</span><span class="p">)</span>
<a id="__codelineno-0-198" name="__codelineno-0-198"></a>
<a id="__codelineno-0-199" name="__codelineno-0-199"></a>    <span class="n">outputs</span> <span class="o">=</span> <span class="n">convert_output</span><span class="p">(</span><span class="n">outputs</span><span class="p">,</span> <span class="n">wrapped</span><span class="p">,</span> <span class="n">instance</span><span class="p">)</span>
<a id="__codelineno-0-200" name="__codelineno-0-200"></a>    <span class="n">output_names</span> <span class="o">=</span> <span class="n">outputs</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<a id="__codelineno-0-201" name="__codelineno-0-201"></a>
<a id="__codelineno-0-202" name="__codelineno-0-202"></a>    <span class="n">out_list</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-203" name="__codelineno-0-203"></a>    <span class="n">start_idx</span> <span class="o">=</span> <span class="mi">0</span>
<a id="__codelineno-0-204" name="__codelineno-0-204"></a>    <span class="k">for</span> <span class="n">request</span> <span class="ow">in</span> <span class="n">req_list</span><span class="p">:</span>
<a id="__codelineno-0-205" name="__codelineno-0-205"></a>        <span class="c1"># get batch_size of first input for each request - assume that all inputs have same batch_size</span>
<a id="__codelineno-0-206" name="__codelineno-0-206"></a>        <span class="n">first_input</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">values</span><span class="p">()))</span>
<a id="__codelineno-0-207" name="__codelineno-0-207"></a>        <span class="n">request_batch_size</span> <span class="o">=</span> <span class="n">first_input</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-208" name="__codelineno-0-208"></a>        <span class="n">req_output_dict</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-209" name="__codelineno-0-209"></a>        <span class="k">for</span> <span class="n">_output_ind</span><span class="p">,</span> <span class="n">output_name</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">output_names</span><span class="p">):</span>
<a id="__codelineno-0-210" name="__codelineno-0-210"></a>            <span class="n">req_output</span> <span class="o">=</span> <span class="n">outputs</span><span class="p">[</span><span class="n">output_name</span><span class="p">][</span><span class="n">start_idx</span> <span class="p">:</span> <span class="n">start_idx</span> <span class="o">+</span> <span class="n">request_batch_size</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
<a id="__codelineno-0-211" name="__codelineno-0-211"></a>            <span class="n">req_output_dict</span><span class="p">[</span><span class="n">output_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">req_output</span>
<a id="__codelineno-0-212" name="__codelineno-0-212"></a>        <span class="n">out_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">req_output_dict</span><span class="p">)</span>
<a id="__codelineno-0-213" name="__codelineno-0-213"></a>        <span class="n">start_idx</span> <span class="o">+=</span> <span class="n">request_batch_size</span>
<a id="__codelineno-0-214" name="__codelineno-0-214"></a>    <span class="k">return</span> <span class="n">out_list</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pytriton.decorators.convert_output" class="doc doc-heading">
<code class="highlight language-python"><span class="n">convert_output</span><span class="p">(</span><span class="n">outputs</span><span class="p">,</span> <span class="n">wrapped</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">model_config</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Converts output from tuple ot list to dictionary.</p>
<p>It is utility function useful for mapping output list into dictionary of outputs.
Currently, it is used in @sample and @batch decorators (we assume that user can return list or tuple of outputs
instead of dictionary if this list matches output list in model config (size and order).</p>

      <details class="quote">
        <summary>Source code in <code>pytriton/decorators.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-137">137</a></span>
<span class="normal"><a href="#__codelineno-0-138">138</a></span>
<span class="normal"><a href="#__codelineno-0-139">139</a></span>
<span class="normal"><a href="#__codelineno-0-140">140</a></span>
<span class="normal"><a href="#__codelineno-0-141">141</a></span>
<span class="normal"><a href="#__codelineno-0-142">142</a></span>
<span class="normal"><a href="#__codelineno-0-143">143</a></span>
<span class="normal"><a href="#__codelineno-0-144">144</a></span>
<span class="normal"><a href="#__codelineno-0-145">145</a></span>
<span class="normal"><a href="#__codelineno-0-146">146</a></span>
<span class="normal"><a href="#__codelineno-0-147">147</a></span>
<span class="normal"><a href="#__codelineno-0-148">148</a></span>
<span class="normal"><a href="#__codelineno-0-149">149</a></span>
<span class="normal"><a href="#__codelineno-0-150">150</a></span>
<span class="normal"><a href="#__codelineno-0-151">151</a></span>
<span class="normal"><a href="#__codelineno-0-152">152</a></span>
<span class="normal"><a href="#__codelineno-0-153">153</a></span>
<span class="normal"><a href="#__codelineno-0-154">154</a></span>
<span class="normal"><a href="#__codelineno-0-155">155</a></span>
<span class="normal"><a href="#__codelineno-0-156">156</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-137" name="__codelineno-0-137"></a><span class="k">def</span> <span class="nf">convert_output</span><span class="p">(</span>
<a id="__codelineno-0-138" name="__codelineno-0-138"></a>    <span class="n">outputs</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Dict</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">],</span> <span class="n">wrapped</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">model_config</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">TritonModelConfig</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-139" name="__codelineno-0-139"></a><span class="p">):</span>
<a id="__codelineno-0-140" name="__codelineno-0-140"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Converts output from tuple ot list to dictionary.</span>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a><span class="sd">    It is utility function useful for mapping output list into dictionary of outputs.</span>
<a id="__codelineno-0-143" name="__codelineno-0-143"></a><span class="sd">    Currently, it is used in @sample and @batch decorators (we assume that user can return list or tuple of outputs</span>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a><span class="sd">    instead of dictionary if this list matches output list in model config (size and order).</span>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">outputs</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a>        <span class="k">return</span> <span class="n">outputs</span>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a>    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">outputs</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a>        <span class="k">if</span> <span class="n">model_config</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a>            <span class="n">model_config</span> <span class="o">=</span> <span class="n">get_model_config</span><span class="p">(</span><span class="n">wrapped</span><span class="p">,</span> <span class="n">instance</span><span class="p">)</span>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">outputs</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">model_config</span><span class="o">.</span><span class="n">outputs</span><span class="p">):</span>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a>            <span class="k">raise</span> <span class="n">PyTritonValidationError</span><span class="p">(</span><span class="s2">&quot;Outputs length different than config outputs length&quot;</span><span class="p">)</span>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a>        <span class="n">outputs</span> <span class="o">=</span> <span class="p">{</span><span class="n">config_output</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="n">output</span> <span class="k">for</span> <span class="n">config_output</span><span class="p">,</span> <span class="n">output</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">model_config</span><span class="o">.</span><span class="n">outputs</span><span class="p">,</span> <span class="n">outputs</span><span class="p">)}</span>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a>        <span class="k">return</span> <span class="n">outputs</span>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a>    <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a>        <span class="k">raise</span> <span class="n">PyTritonValidationError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported output type </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">outputs</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pytriton.decorators.fill_optionals" class="doc doc-heading">
<code class="highlight language-python"><span class="n">fill_optionals</span><span class="p">(</span><span class="o">**</span><span class="n">defaults</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>This decorator ensures that any missing inputs in requests are filled with default values specified by the user.</p>
<p>Default values should be NumPy arrays without batch axis.</p>
<p>If you plan to group requests ex. with
<a class="autorefs autorefs-internal" href="#pytriton.decorators.group_by_keys">@group_by_keys</a> or
<a class="autorefs autorefs-internal" href="#pytriton.decorators.group_by_values">@group_by_vales</a> decorators
provide default values for optional parameters at the beginning of decorators stack.
The other decorators can then group requests into bigger batches resulting in a better model performance.</p>

<details class="typical-use">
  <summary>Typical use</summary>
  <p>@fill_optionals()
@group_by_keys()
@batch
def infer_fun(**inputs):
    ...
    return outputs</p>
</details>
  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>defaults</code></td>
          <td>
          </td>
          <td><p>keyword arguments containing default values for missing inputs</p></td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>
      <p>If you have default values for some optional parameter it is good idea to provide them at the very beginning,
so the other decorators (e.g. @group_by_keys) can make bigger consistent groups.</p>

      <details class="quote">
        <summary>Source code in <code>pytriton/decorators.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-318">318</a></span>
<span class="normal"><a href="#__codelineno-0-319">319</a></span>
<span class="normal"><a href="#__codelineno-0-320">320</a></span>
<span class="normal"><a href="#__codelineno-0-321">321</a></span>
<span class="normal"><a href="#__codelineno-0-322">322</a></span>
<span class="normal"><a href="#__codelineno-0-323">323</a></span>
<span class="normal"><a href="#__codelineno-0-324">324</a></span>
<span class="normal"><a href="#__codelineno-0-325">325</a></span>
<span class="normal"><a href="#__codelineno-0-326">326</a></span>
<span class="normal"><a href="#__codelineno-0-327">327</a></span>
<span class="normal"><a href="#__codelineno-0-328">328</a></span>
<span class="normal"><a href="#__codelineno-0-329">329</a></span>
<span class="normal"><a href="#__codelineno-0-330">330</a></span>
<span class="normal"><a href="#__codelineno-0-331">331</a></span>
<span class="normal"><a href="#__codelineno-0-332">332</a></span>
<span class="normal"><a href="#__codelineno-0-333">333</a></span>
<span class="normal"><a href="#__codelineno-0-334">334</a></span>
<span class="normal"><a href="#__codelineno-0-335">335</a></span>
<span class="normal"><a href="#__codelineno-0-336">336</a></span>
<span class="normal"><a href="#__codelineno-0-337">337</a></span>
<span class="normal"><a href="#__codelineno-0-338">338</a></span>
<span class="normal"><a href="#__codelineno-0-339">339</a></span>
<span class="normal"><a href="#__codelineno-0-340">340</a></span>
<span class="normal"><a href="#__codelineno-0-341">341</a></span>
<span class="normal"><a href="#__codelineno-0-342">342</a></span>
<span class="normal"><a href="#__codelineno-0-343">343</a></span>
<span class="normal"><a href="#__codelineno-0-344">344</a></span>
<span class="normal"><a href="#__codelineno-0-345">345</a></span>
<span class="normal"><a href="#__codelineno-0-346">346</a></span>
<span class="normal"><a href="#__codelineno-0-347">347</a></span>
<span class="normal"><a href="#__codelineno-0-348">348</a></span>
<span class="normal"><a href="#__codelineno-0-349">349</a></span>
<span class="normal"><a href="#__codelineno-0-350">350</a></span>
<span class="normal"><a href="#__codelineno-0-351">351</a></span>
<span class="normal"><a href="#__codelineno-0-352">352</a></span>
<span class="normal"><a href="#__codelineno-0-353">353</a></span>
<span class="normal"><a href="#__codelineno-0-354">354</a></span>
<span class="normal"><a href="#__codelineno-0-355">355</a></span>
<span class="normal"><a href="#__codelineno-0-356">356</a></span>
<span class="normal"><a href="#__codelineno-0-357">357</a></span>
<span class="normal"><a href="#__codelineno-0-358">358</a></span>
<span class="normal"><a href="#__codelineno-0-359">359</a></span>
<span class="normal"><a href="#__codelineno-0-360">360</a></span>
<span class="normal"><a href="#__codelineno-0-361">361</a></span>
<span class="normal"><a href="#__codelineno-0-362">362</a></span>
<span class="normal"><a href="#__codelineno-0-363">363</a></span>
<span class="normal"><a href="#__codelineno-0-364">364</a></span>
<span class="normal"><a href="#__codelineno-0-365">365</a></span>
<span class="normal"><a href="#__codelineno-0-366">366</a></span>
<span class="normal"><a href="#__codelineno-0-367">367</a></span>
<span class="normal"><a href="#__codelineno-0-368">368</a></span>
<span class="normal"><a href="#__codelineno-0-369">369</a></span>
<span class="normal"><a href="#__codelineno-0-370">370</a></span>
<span class="normal"><a href="#__codelineno-0-371">371</a></span>
<span class="normal"><a href="#__codelineno-0-372">372</a></span>
<span class="normal"><a href="#__codelineno-0-373">373</a></span>
<span class="normal"><a href="#__codelineno-0-374">374</a></span>
<span class="normal"><a href="#__codelineno-0-375">375</a></span>
<span class="normal"><a href="#__codelineno-0-376">376</a></span>
<span class="normal"><a href="#__codelineno-0-377">377</a></span>
<span class="normal"><a href="#__codelineno-0-378">378</a></span>
<span class="normal"><a href="#__codelineno-0-379">379</a></span>
<span class="normal"><a href="#__codelineno-0-380">380</a></span>
<span class="normal"><a href="#__codelineno-0-381">381</a></span>
<span class="normal"><a href="#__codelineno-0-382">382</a></span>
<span class="normal"><a href="#__codelineno-0-383">383</a></span>
<span class="normal"><a href="#__codelineno-0-384">384</a></span>
<span class="normal"><a href="#__codelineno-0-385">385</a></span>
<span class="normal"><a href="#__codelineno-0-386">386</a></span>
<span class="normal"><a href="#__codelineno-0-387">387</a></span>
<span class="normal"><a href="#__codelineno-0-388">388</a></span>
<span class="normal"><a href="#__codelineno-0-389">389</a></span>
<span class="normal"><a href="#__codelineno-0-390">390</a></span>
<span class="normal"><a href="#__codelineno-0-391">391</a></span>
<span class="normal"><a href="#__codelineno-0-392">392</a></span>
<span class="normal"><a href="#__codelineno-0-393">393</a></span>
<span class="normal"><a href="#__codelineno-0-394">394</a></span>
<span class="normal"><a href="#__codelineno-0-395">395</a></span>
<span class="normal"><a href="#__codelineno-0-396">396</a></span>
<span class="normal"><a href="#__codelineno-0-397">397</a></span>
<span class="normal"><a href="#__codelineno-0-398">398</a></span>
<span class="normal"><a href="#__codelineno-0-399">399</a></span>
<span class="normal"><a href="#__codelineno-0-400">400</a></span>
<span class="normal"><a href="#__codelineno-0-401">401</a></span>
<span class="normal"><a href="#__codelineno-0-402">402</a></span>
<span class="normal"><a href="#__codelineno-0-403">403</a></span>
<span class="normal"><a href="#__codelineno-0-404">404</a></span>
<span class="normal"><a href="#__codelineno-0-405">405</a></span>
<span class="normal"><a href="#__codelineno-0-406">406</a></span>
<span class="normal"><a href="#__codelineno-0-407">407</a></span>
<span class="normal"><a href="#__codelineno-0-408">408</a></span>
<span class="normal"><a href="#__codelineno-0-409">409</a></span>
<span class="normal"><a href="#__codelineno-0-410">410</a></span>
<span class="normal"><a href="#__codelineno-0-411">411</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-318" name="__codelineno-0-318"></a><span class="k">def</span> <span class="nf">fill_optionals</span><span class="p">(</span><span class="o">**</span><span class="n">defaults</span><span class="p">):</span>
<a id="__codelineno-0-319" name="__codelineno-0-319"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;This decorator ensures that any missing inputs in requests are filled with default values specified by the user.</span>
<a id="__codelineno-0-320" name="__codelineno-0-320"></a>
<a id="__codelineno-0-321" name="__codelineno-0-321"></a><span class="sd">    Default values should be NumPy arrays without batch axis.</span>
<a id="__codelineno-0-322" name="__codelineno-0-322"></a>
<a id="__codelineno-0-323" name="__codelineno-0-323"></a><span class="sd">    If you plan to group requests ex. with</span>
<a id="__codelineno-0-324" name="__codelineno-0-324"></a><span class="sd">    [@group_by_keys][pytriton.decorators.group_by_keys] or</span>
<a id="__codelineno-0-325" name="__codelineno-0-325"></a><span class="sd">    [@group_by_vales][pytriton.decorators.group_by_values] decorators</span>
<a id="__codelineno-0-326" name="__codelineno-0-326"></a><span class="sd">    provide default values for optional parameters at the beginning of decorators stack.</span>
<a id="__codelineno-0-327" name="__codelineno-0-327"></a><span class="sd">    The other decorators can then group requests into bigger batches resulting in a better model performance.</span>
<a id="__codelineno-0-328" name="__codelineno-0-328"></a>
<a id="__codelineno-0-329" name="__codelineno-0-329"></a><span class="sd">    Typical use:</span>
<a id="__codelineno-0-330" name="__codelineno-0-330"></a>
<a id="__codelineno-0-331" name="__codelineno-0-331"></a><span class="sd">        @fill_optionals()</span>
<a id="__codelineno-0-332" name="__codelineno-0-332"></a><span class="sd">        @group_by_keys()</span>
<a id="__codelineno-0-333" name="__codelineno-0-333"></a><span class="sd">        @batch</span>
<a id="__codelineno-0-334" name="__codelineno-0-334"></a><span class="sd">        def infer_fun(**inputs):</span>
<a id="__codelineno-0-335" name="__codelineno-0-335"></a><span class="sd">            ...</span>
<a id="__codelineno-0-336" name="__codelineno-0-336"></a><span class="sd">            return outputs</span>
<a id="__codelineno-0-337" name="__codelineno-0-337"></a>
<a id="__codelineno-0-338" name="__codelineno-0-338"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-339" name="__codelineno-0-339"></a><span class="sd">        defaults: keyword arguments containing default values for missing inputs</span>
<a id="__codelineno-0-340" name="__codelineno-0-340"></a>
<a id="__codelineno-0-341" name="__codelineno-0-341"></a>
<a id="__codelineno-0-342" name="__codelineno-0-342"></a><span class="sd">    If you have default values for some optional parameter it is good idea to provide them at the very beginning,</span>
<a id="__codelineno-0-343" name="__codelineno-0-343"></a><span class="sd">    so the other decorators (e.g. @group_by_keys) can make bigger consistent groups.</span>
<a id="__codelineno-0-344" name="__codelineno-0-344"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-345" name="__codelineno-0-345"></a>
<a id="__codelineno-0-346" name="__codelineno-0-346"></a>    <span class="k">def</span> <span class="nf">_verify_defaults</span><span class="p">(</span><span class="n">model_config</span><span class="p">:</span> <span class="n">TritonModelConfig</span><span class="p">):</span>
<a id="__codelineno-0-347" name="__codelineno-0-347"></a>        <span class="n">inputs</span> <span class="o">=</span> <span class="p">{</span><span class="n">spec</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="n">spec</span> <span class="k">for</span> <span class="n">spec</span> <span class="ow">in</span> <span class="n">model_config</span><span class="o">.</span><span class="n">inputs</span><span class="p">}</span>
<a id="__codelineno-0-348" name="__codelineno-0-348"></a>        <span class="n">not_matching_default_names</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">defaults</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">inputs</span><span class="p">))</span>
<a id="__codelineno-0-349" name="__codelineno-0-349"></a>        <span class="k">if</span> <span class="n">not_matching_default_names</span><span class="p">:</span>
<a id="__codelineno-0-350" name="__codelineno-0-350"></a>            <span class="k">raise</span> <span class="n">PyTritonBadParameterError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Could not found </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">not_matching_default_names</span><span class="p">)</span><span class="si">}</span><span class="s2"> inputs&quot;</span><span class="p">)</span>
<a id="__codelineno-0-351" name="__codelineno-0-351"></a>
<a id="__codelineno-0-352" name="__codelineno-0-352"></a>        <span class="n">non_numpy_items</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">defaults</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)}</span>
<a id="__codelineno-0-353" name="__codelineno-0-353"></a>        <span class="k">if</span> <span class="n">non_numpy_items</span><span class="p">:</span>
<a id="__codelineno-0-354" name="__codelineno-0-354"></a>            <span class="k">raise</span> <span class="n">PyTritonBadParameterError</span><span class="p">(</span>
<a id="__codelineno-0-355" name="__codelineno-0-355"></a>                <span class="sa">f</span><span class="s2">&quot;Could not use </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s1">=</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s1">&#39;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">k</span><span class="p">,</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">non_numpy_items</span><span class="o">.</span><span class="n">items</span><span class="p">()])</span><span class="si">}</span><span class="s2"> defaults &quot;</span>
<a id="__codelineno-0-356" name="__codelineno-0-356"></a>                <span class="s2">&quot;as they are not NumPy arrays&quot;</span>
<a id="__codelineno-0-357" name="__codelineno-0-357"></a>            <span class="p">)</span>
<a id="__codelineno-0-358" name="__codelineno-0-358"></a>
<a id="__codelineno-0-359" name="__codelineno-0-359"></a>        <span class="n">not_matching_dtypes</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">dtype</span><span class="p">,</span> <span class="n">inputs</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">defaults</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">dtype</span> <span class="o">!=</span> <span class="n">inputs</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">dtype</span><span class="p">}</span>
<a id="__codelineno-0-360" name="__codelineno-0-360"></a>        <span class="k">if</span> <span class="n">not_matching_dtypes</span><span class="p">:</span>
<a id="__codelineno-0-361" name="__codelineno-0-361"></a>            <span class="n">non_matching_dtypes_str_list</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-362" name="__codelineno-0-362"></a>                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: dtype=</span><span class="si">{</span><span class="n">have_dtype</span><span class="si">}</span><span class="s2"> expected_dtype=</span><span class="si">{</span><span class="n">expected_dtype</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-363" name="__codelineno-0-363"></a>                <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="p">(</span><span class="n">have_dtype</span><span class="p">,</span> <span class="n">expected_dtype</span><span class="p">)</span> <span class="ow">in</span> <span class="n">not_matching_dtypes</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
<a id="__codelineno-0-364" name="__codelineno-0-364"></a>            <span class="p">]</span>
<a id="__codelineno-0-365" name="__codelineno-0-365"></a>            <span class="k">raise</span> <span class="n">PyTritonBadParameterError</span><span class="p">(</span>
<a id="__codelineno-0-366" name="__codelineno-0-366"></a>                <span class="sa">f</span><span class="s2">&quot;Could not use </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">non_matching_dtypes_str_list</span><span class="p">)</span><span class="si">}</span><span class="s2"> &quot;</span>
<a id="__codelineno-0-367" name="__codelineno-0-367"></a>                <span class="sa">f</span><span class="s2">&quot;defaults as they have different than input signature dtypes&quot;</span>
<a id="__codelineno-0-368" name="__codelineno-0-368"></a>            <span class="p">)</span>
<a id="__codelineno-0-369" name="__codelineno-0-369"></a>
<a id="__codelineno-0-370" name="__codelineno-0-370"></a>        <span class="k">def</span> <span class="nf">_shape_match</span><span class="p">(</span><span class="n">_have_shape</span><span class="p">,</span> <span class="n">_expected_shape</span><span class="p">):</span>
<a id="__codelineno-0-371" name="__codelineno-0-371"></a>            <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">_have_shape</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">_expected_shape</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">all</span><span class="p">(</span>
<a id="__codelineno-0-372" name="__codelineno-0-372"></a>                <span class="p">[</span><span class="n">e</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">or</span> <span class="n">h</span> <span class="o">==</span> <span class="n">e</span> <span class="k">for</span> <span class="n">h</span><span class="p">,</span> <span class="n">e</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">_have_shape</span><span class="p">,</span> <span class="n">_expected_shape</span><span class="p">)]</span>
<a id="__codelineno-0-373" name="__codelineno-0-373"></a>            <span class="p">)</span>
<a id="__codelineno-0-374" name="__codelineno-0-374"></a>
<a id="__codelineno-0-375" name="__codelineno-0-375"></a>        <span class="n">not_matching_shapes</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-376" name="__codelineno-0-376"></a>            <span class="n">k</span><span class="p">:</span> <span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">inputs</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">defaults</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">_shape_match</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">inputs</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<a id="__codelineno-0-377" name="__codelineno-0-377"></a>        <span class="p">}</span>
<a id="__codelineno-0-378" name="__codelineno-0-378"></a>        <span class="k">if</span> <span class="n">not_matching_shapes</span><span class="p">:</span>
<a id="__codelineno-0-379" name="__codelineno-0-379"></a>            <span class="n">non_matching_shapes_str_list</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-380" name="__codelineno-0-380"></a>                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: shape=</span><span class="si">{</span><span class="n">have_shape</span><span class="si">}</span><span class="s2"> expected_shape=</span><span class="si">{</span><span class="n">expected_shape</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-381" name="__codelineno-0-381"></a>                <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="p">(</span><span class="n">have_shape</span><span class="p">,</span> <span class="n">expected_shape</span><span class="p">)</span> <span class="ow">in</span> <span class="n">not_matching_shapes</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
<a id="__codelineno-0-382" name="__codelineno-0-382"></a>            <span class="p">]</span>
<a id="__codelineno-0-383" name="__codelineno-0-383"></a>            <span class="k">raise</span> <span class="n">PyTritonBadParameterError</span><span class="p">(</span>
<a id="__codelineno-0-384" name="__codelineno-0-384"></a>                <span class="sa">f</span><span class="s2">&quot;Could not use </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">non_matching_shapes_str_list</span><span class="p">)</span><span class="si">}</span><span class="s2"> &quot;</span>
<a id="__codelineno-0-385" name="__codelineno-0-385"></a>                <span class="sa">f</span><span class="s2">&quot;defaults as they have different than input signature shapes&quot;</span>
<a id="__codelineno-0-386" name="__codelineno-0-386"></a>            <span class="p">)</span>
<a id="__codelineno-0-387" name="__codelineno-0-387"></a>
<a id="__codelineno-0-388" name="__codelineno-0-388"></a>    <span class="nd">@wrapt</span><span class="o">.</span><span class="n">decorator</span>
<a id="__codelineno-0-389" name="__codelineno-0-389"></a>    <span class="k">def</span> <span class="nf">_wrapper</span><span class="p">(</span><span class="n">wrapped</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-390" name="__codelineno-0-390"></a>        <span class="n">model_config</span> <span class="o">=</span> <span class="n">get_model_config</span><span class="p">(</span><span class="n">wrapped</span><span class="p">,</span> <span class="n">instance</span><span class="p">)</span>
<a id="__codelineno-0-391" name="__codelineno-0-391"></a>        <span class="n">_verify_defaults</span><span class="p">(</span><span class="n">model_config</span><span class="p">)</span>
<a id="__codelineno-0-392" name="__codelineno-0-392"></a>        <span class="c1"># verification if not after group wrappers is in group wrappers</span>
<a id="__codelineno-0-393" name="__codelineno-0-393"></a>
<a id="__codelineno-0-394" name="__codelineno-0-394"></a>        <span class="p">(</span><span class="n">requests</span><span class="p">,)</span> <span class="o">=</span> <span class="n">args</span>
<a id="__codelineno-0-395" name="__codelineno-0-395"></a>
<a id="__codelineno-0-396" name="__codelineno-0-396"></a>        <span class="n">model_supports_batching</span> <span class="o">=</span> <span class="n">model_config</span><span class="o">.</span><span class="n">batching</span>
<a id="__codelineno-0-397" name="__codelineno-0-397"></a>        <span class="k">for</span> <span class="n">request</span> <span class="ow">in</span> <span class="n">requests</span><span class="p">:</span>
<a id="__codelineno-0-398" name="__codelineno-0-398"></a>            <span class="n">batch_size</span> <span class="o">=</span> <span class="n">get_inference_request_batch_size</span><span class="p">(</span><span class="n">request</span><span class="p">)</span> <span class="k">if</span> <span class="n">model_supports_batching</span> <span class="k">else</span> <span class="kc">None</span>
<a id="__codelineno-0-399" name="__codelineno-0-399"></a>            <span class="k">for</span> <span class="n">default_key</span><span class="p">,</span> <span class="n">default_value</span> <span class="ow">in</span> <span class="n">defaults</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-400" name="__codelineno-0-400"></a>                <span class="k">if</span> <span class="n">default_key</span> <span class="ow">in</span> <span class="n">request</span><span class="p">:</span>
<a id="__codelineno-0-401" name="__codelineno-0-401"></a>                    <span class="k">continue</span>
<a id="__codelineno-0-402" name="__codelineno-0-402"></a>
<a id="__codelineno-0-403" name="__codelineno-0-403"></a>                <span class="k">if</span> <span class="n">model_supports_batching</span><span class="p">:</span>
<a id="__codelineno-0-404" name="__codelineno-0-404"></a>                    <span class="n">ones_reps</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,)</span> <span class="o">*</span> <span class="n">default_value</span><span class="o">.</span><span class="n">ndim</span>  <span class="c1"># repeat once default_value on each axis</span>
<a id="__codelineno-0-405" name="__codelineno-0-405"></a>                    <span class="n">axis_reps</span> <span class="o">=</span> <span class="p">(</span><span class="n">batch_size</span><span class="p">,)</span> <span class="o">+</span> <span class="n">ones_reps</span>  <span class="c1"># ... except on batch axis. we repeat it batch_size times</span>
<a id="__codelineno-0-406" name="__codelineno-0-406"></a>                    <span class="n">default_value</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tile</span><span class="p">(</span><span class="n">default_value</span><span class="p">,</span> <span class="n">axis_reps</span><span class="p">)</span>
<a id="__codelineno-0-407" name="__codelineno-0-407"></a>
<a id="__codelineno-0-408" name="__codelineno-0-408"></a>                <span class="n">request</span><span class="p">[</span><span class="n">default_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">default_value</span>
<a id="__codelineno-0-409" name="__codelineno-0-409"></a>        <span class="k">return</span> <span class="n">wrapped</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<a id="__codelineno-0-410" name="__codelineno-0-410"></a>
<a id="__codelineno-0-411" name="__codelineno-0-411"></a>    <span class="k">return</span> <span class="n">_wrapper</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pytriton.decorators.first_value" class="doc doc-heading">
<code class="highlight language-python"><span class="n">first_value</span><span class="p">(</span><span class="o">*</span><span class="n">keys</span><span class="p">,</span> <span class="n">squeeze_single_values</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>This decorator overwrites selected inputs with first element of the given input.</p>
<p>It can be used in two ways:</p>
<ol>
<li>
<p>Wrapping a single request inference callable by chaining with @batch decorator:
    @batch
    @first_value("temperature")
    def infer_fn(**inputs):
        ...
        return result</p>
</li>
<li>
<p>Wrapping a multiple requests inference callable:
    @first_value("temperature")
    def infer_fn(requests):
        ...
        return results</p>
</li>
</ol>
<p>By default, the decorator squeezes single value arrays to scalars.
This behavior can be disabled by setting the <code>squeeze_single_values</code> flag to False.</p>
<p>By default, the decorator checks the equality of the values on selected values.
This behavior can be disabled by setting the <code>strict</code> flag to False.</p>
<p>Wrapper can only be used with models that support batching.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>keys</code></td>
          <td>
                <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>
          </td>
          <td><p>The input keys selected for conversion.</p></td>
          <td>
                <code>()</code>
          </td>
        </tr>
        <tr>
          <td><code>squeeze_single_values</code></td>
          <td>
          </td>
          <td><p>squeeze single value ND array to scalar values. Defaults to True.</p></td>
          <td>
                <code>True</code>
          </td>
        </tr>
        <tr>
          <td><code>strict</code></td>
          <td>
                <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>
          </td>
          <td><p>enable checking if all values on single selected input of request are equal. Defaults to True.</p></td>
          <td>
                <code>True</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="pytriton.exceptions.PyTritonRuntimeError">PyTritonRuntimeError</span></code>
          </td>
          <td><p>if not all values on a single selected input of the request are equal</p></td>
        </tr>
        <tr>
          <td>
                <code><span title="pytriton.exceptions.PyTritonBadParameterError">PyTritonBadParameterError</span></code>
          </td>
          <td><p>if any of the keys passed to the decorator are not allowed.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pytriton/decorators.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-461">461</a></span>
<span class="normal"><a href="#__codelineno-0-462">462</a></span>
<span class="normal"><a href="#__codelineno-0-463">463</a></span>
<span class="normal"><a href="#__codelineno-0-464">464</a></span>
<span class="normal"><a href="#__codelineno-0-465">465</a></span>
<span class="normal"><a href="#__codelineno-0-466">466</a></span>
<span class="normal"><a href="#__codelineno-0-467">467</a></span>
<span class="normal"><a href="#__codelineno-0-468">468</a></span>
<span class="normal"><a href="#__codelineno-0-469">469</a></span>
<span class="normal"><a href="#__codelineno-0-470">470</a></span>
<span class="normal"><a href="#__codelineno-0-471">471</a></span>
<span class="normal"><a href="#__codelineno-0-472">472</a></span>
<span class="normal"><a href="#__codelineno-0-473">473</a></span>
<span class="normal"><a href="#__codelineno-0-474">474</a></span>
<span class="normal"><a href="#__codelineno-0-475">475</a></span>
<span class="normal"><a href="#__codelineno-0-476">476</a></span>
<span class="normal"><a href="#__codelineno-0-477">477</a></span>
<span class="normal"><a href="#__codelineno-0-478">478</a></span>
<span class="normal"><a href="#__codelineno-0-479">479</a></span>
<span class="normal"><a href="#__codelineno-0-480">480</a></span>
<span class="normal"><a href="#__codelineno-0-481">481</a></span>
<span class="normal"><a href="#__codelineno-0-482">482</a></span>
<span class="normal"><a href="#__codelineno-0-483">483</a></span>
<span class="normal"><a href="#__codelineno-0-484">484</a></span>
<span class="normal"><a href="#__codelineno-0-485">485</a></span>
<span class="normal"><a href="#__codelineno-0-486">486</a></span>
<span class="normal"><a href="#__codelineno-0-487">487</a></span>
<span class="normal"><a href="#__codelineno-0-488">488</a></span>
<span class="normal"><a href="#__codelineno-0-489">489</a></span>
<span class="normal"><a href="#__codelineno-0-490">490</a></span>
<span class="normal"><a href="#__codelineno-0-491">491</a></span>
<span class="normal"><a href="#__codelineno-0-492">492</a></span>
<span class="normal"><a href="#__codelineno-0-493">493</a></span>
<span class="normal"><a href="#__codelineno-0-494">494</a></span>
<span class="normal"><a href="#__codelineno-0-495">495</a></span>
<span class="normal"><a href="#__codelineno-0-496">496</a></span>
<span class="normal"><a href="#__codelineno-0-497">497</a></span>
<span class="normal"><a href="#__codelineno-0-498">498</a></span>
<span class="normal"><a href="#__codelineno-0-499">499</a></span>
<span class="normal"><a href="#__codelineno-0-500">500</a></span>
<span class="normal"><a href="#__codelineno-0-501">501</a></span>
<span class="normal"><a href="#__codelineno-0-502">502</a></span>
<span class="normal"><a href="#__codelineno-0-503">503</a></span>
<span class="normal"><a href="#__codelineno-0-504">504</a></span>
<span class="normal"><a href="#__codelineno-0-505">505</a></span>
<span class="normal"><a href="#__codelineno-0-506">506</a></span>
<span class="normal"><a href="#__codelineno-0-507">507</a></span>
<span class="normal"><a href="#__codelineno-0-508">508</a></span>
<span class="normal"><a href="#__codelineno-0-509">509</a></span>
<span class="normal"><a href="#__codelineno-0-510">510</a></span>
<span class="normal"><a href="#__codelineno-0-511">511</a></span>
<span class="normal"><a href="#__codelineno-0-512">512</a></span>
<span class="normal"><a href="#__codelineno-0-513">513</a></span>
<span class="normal"><a href="#__codelineno-0-514">514</a></span>
<span class="normal"><a href="#__codelineno-0-515">515</a></span>
<span class="normal"><a href="#__codelineno-0-516">516</a></span>
<span class="normal"><a href="#__codelineno-0-517">517</a></span>
<span class="normal"><a href="#__codelineno-0-518">518</a></span>
<span class="normal"><a href="#__codelineno-0-519">519</a></span>
<span class="normal"><a href="#__codelineno-0-520">520</a></span>
<span class="normal"><a href="#__codelineno-0-521">521</a></span>
<span class="normal"><a href="#__codelineno-0-522">522</a></span>
<span class="normal"><a href="#__codelineno-0-523">523</a></span>
<span class="normal"><a href="#__codelineno-0-524">524</a></span>
<span class="normal"><a href="#__codelineno-0-525">525</a></span>
<span class="normal"><a href="#__codelineno-0-526">526</a></span>
<span class="normal"><a href="#__codelineno-0-527">527</a></span>
<span class="normal"><a href="#__codelineno-0-528">528</a></span>
<span class="normal"><a href="#__codelineno-0-529">529</a></span>
<span class="normal"><a href="#__codelineno-0-530">530</a></span>
<span class="normal"><a href="#__codelineno-0-531">531</a></span>
<span class="normal"><a href="#__codelineno-0-532">532</a></span>
<span class="normal"><a href="#__codelineno-0-533">533</a></span>
<span class="normal"><a href="#__codelineno-0-534">534</a></span>
<span class="normal"><a href="#__codelineno-0-535">535</a></span>
<span class="normal"><a href="#__codelineno-0-536">536</a></span>
<span class="normal"><a href="#__codelineno-0-537">537</a></span>
<span class="normal"><a href="#__codelineno-0-538">538</a></span>
<span class="normal"><a href="#__codelineno-0-539">539</a></span>
<span class="normal"><a href="#__codelineno-0-540">540</a></span>
<span class="normal"><a href="#__codelineno-0-541">541</a></span>
<span class="normal"><a href="#__codelineno-0-542">542</a></span>
<span class="normal"><a href="#__codelineno-0-543">543</a></span>
<span class="normal"><a href="#__codelineno-0-544">544</a></span>
<span class="normal"><a href="#__codelineno-0-545">545</a></span>
<span class="normal"><a href="#__codelineno-0-546">546</a></span>
<span class="normal"><a href="#__codelineno-0-547">547</a></span>
<span class="normal"><a href="#__codelineno-0-548">548</a></span>
<span class="normal"><a href="#__codelineno-0-549">549</a></span>
<span class="normal"><a href="#__codelineno-0-550">550</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-461" name="__codelineno-0-461"></a><span class="k">def</span> <span class="nf">first_value</span><span class="p">(</span><span class="o">*</span><span class="n">keys</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">squeeze_single_values</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">strict</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<a id="__codelineno-0-462" name="__codelineno-0-462"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;This decorator overwrites selected inputs with first element of the given input.</span>
<a id="__codelineno-0-463" name="__codelineno-0-463"></a>
<a id="__codelineno-0-464" name="__codelineno-0-464"></a><span class="sd">    It can be used in two ways:</span>
<a id="__codelineno-0-465" name="__codelineno-0-465"></a>
<a id="__codelineno-0-466" name="__codelineno-0-466"></a><span class="sd">    1. Wrapping a single request inference callable by chaining with @batch decorator:</span>
<a id="__codelineno-0-467" name="__codelineno-0-467"></a><span class="sd">        @batch</span>
<a id="__codelineno-0-468" name="__codelineno-0-468"></a><span class="sd">        @first_value(&quot;temperature&quot;)</span>
<a id="__codelineno-0-469" name="__codelineno-0-469"></a><span class="sd">        def infer_fn(**inputs):</span>
<a id="__codelineno-0-470" name="__codelineno-0-470"></a><span class="sd">            ...</span>
<a id="__codelineno-0-471" name="__codelineno-0-471"></a><span class="sd">            return result</span>
<a id="__codelineno-0-472" name="__codelineno-0-472"></a>
<a id="__codelineno-0-473" name="__codelineno-0-473"></a><span class="sd">    2. Wrapping a multiple requests inference callable:</span>
<a id="__codelineno-0-474" name="__codelineno-0-474"></a><span class="sd">        @first_value(&quot;temperature&quot;)</span>
<a id="__codelineno-0-475" name="__codelineno-0-475"></a><span class="sd">        def infer_fn(requests):</span>
<a id="__codelineno-0-476" name="__codelineno-0-476"></a><span class="sd">            ...</span>
<a id="__codelineno-0-477" name="__codelineno-0-477"></a><span class="sd">            return results</span>
<a id="__codelineno-0-478" name="__codelineno-0-478"></a>
<a id="__codelineno-0-479" name="__codelineno-0-479"></a><span class="sd">    By default, the decorator squeezes single value arrays to scalars.</span>
<a id="__codelineno-0-480" name="__codelineno-0-480"></a><span class="sd">    This behavior can be disabled by setting the `squeeze_single_values` flag to False.</span>
<a id="__codelineno-0-481" name="__codelineno-0-481"></a>
<a id="__codelineno-0-482" name="__codelineno-0-482"></a><span class="sd">    By default, the decorator checks the equality of the values on selected values.</span>
<a id="__codelineno-0-483" name="__codelineno-0-483"></a><span class="sd">    This behavior can be disabled by setting the `strict` flag to False.</span>
<a id="__codelineno-0-484" name="__codelineno-0-484"></a>
<a id="__codelineno-0-485" name="__codelineno-0-485"></a><span class="sd">    Wrapper can only be used with models that support batching.</span>
<a id="__codelineno-0-486" name="__codelineno-0-486"></a>
<a id="__codelineno-0-487" name="__codelineno-0-487"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-488" name="__codelineno-0-488"></a><span class="sd">        keys: The input keys selected for conversion.</span>
<a id="__codelineno-0-489" name="__codelineno-0-489"></a><span class="sd">        squeeze_single_values: squeeze single value ND array to scalar values. Defaults to True.</span>
<a id="__codelineno-0-490" name="__codelineno-0-490"></a><span class="sd">        strict: enable checking if all values on single selected input of request are equal. Defaults to True.</span>
<a id="__codelineno-0-491" name="__codelineno-0-491"></a>
<a id="__codelineno-0-492" name="__codelineno-0-492"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-493" name="__codelineno-0-493"></a><span class="sd">        PyTritonRuntimeError: if not all values on a single selected input of the request are equal</span>
<a id="__codelineno-0-494" name="__codelineno-0-494"></a><span class="sd">        and the strict flag is set to True. Additionally, if the decorator is used with a model that doesn&#39;t support batching,</span>
<a id="__codelineno-0-495" name="__codelineno-0-495"></a><span class="sd">        PyTritonBadParameterError: if any of the keys passed to the decorator are not allowed.</span>
<a id="__codelineno-0-496" name="__codelineno-0-496"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-497" name="__codelineno-0-497"></a>    <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">k</span> <span class="ow">in</span> <span class="n">_SPECIAL_KEYS</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">):</span>
<a id="__codelineno-0-498" name="__codelineno-0-498"></a>        <span class="n">not_allowed_keys</span> <span class="o">=</span> <span class="p">[</span><span class="n">key</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span> <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">_SPECIAL_KEYS</span><span class="p">]</span>
<a id="__codelineno-0-499" name="__codelineno-0-499"></a>        <span class="k">raise</span> <span class="n">PyTritonBadParameterError</span><span class="p">(</span>
<a id="__codelineno-0-500" name="__codelineno-0-500"></a>            <span class="sa">f</span><span class="s2">&quot;The keys </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">not_allowed_keys</span><span class="p">)</span><span class="si">}</span><span class="s2"> are not allowed as keys for @first_value wrapper. &quot;</span>
<a id="__codelineno-0-501" name="__codelineno-0-501"></a>            <span class="sa">f</span><span class="s2">&quot;The set of not allowed keys are </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">_SPECIAL_KEYS</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-502" name="__codelineno-0-502"></a>        <span class="p">)</span>
<a id="__codelineno-0-503" name="__codelineno-0-503"></a>
<a id="__codelineno-0-504" name="__codelineno-0-504"></a>    <span class="nd">@wrapt</span><span class="o">.</span><span class="n">decorator</span>
<a id="__codelineno-0-505" name="__codelineno-0-505"></a>    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="n">wrapped</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-506" name="__codelineno-0-506"></a>
<a id="__codelineno-0-507" name="__codelineno-0-507"></a>        <span class="n">model_config</span> <span class="o">=</span> <span class="n">get_model_config</span><span class="p">(</span><span class="n">wrapped</span><span class="p">,</span> <span class="n">instance</span><span class="p">)</span>
<a id="__codelineno-0-508" name="__codelineno-0-508"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">model_config</span><span class="o">.</span><span class="n">batching</span><span class="p">:</span>
<a id="__codelineno-0-509" name="__codelineno-0-509"></a>            <span class="k">raise</span> <span class="n">PyTritonRuntimeError</span><span class="p">(</span><span class="s2">&quot;The @first_value decorator can only be used with models that support batching.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-510" name="__codelineno-0-510"></a>
<a id="__codelineno-0-511" name="__codelineno-0-511"></a>        <span class="k">def</span> <span class="nf">_replace_inputs_with_first_value</span><span class="p">(</span><span class="n">_request</span><span class="p">):</span>
<a id="__codelineno-0-512" name="__codelineno-0-512"></a>            <span class="k">for</span> <span class="n">input_name</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
<a id="__codelineno-0-513" name="__codelineno-0-513"></a>                <span class="k">if</span> <span class="n">input_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">_request</span><span class="p">:</span>
<a id="__codelineno-0-514" name="__codelineno-0-514"></a>                    <span class="k">continue</span>
<a id="__codelineno-0-515" name="__codelineno-0-515"></a>
<a id="__codelineno-0-516" name="__codelineno-0-516"></a>                <span class="n">values</span> <span class="o">=</span> <span class="n">_request</span><span class="p">[</span><span class="n">input_name</span><span class="p">]</span>
<a id="__codelineno-0-517" name="__codelineno-0-517"></a>                <span class="k">if</span> <span class="n">strict</span><span class="p">:</span>
<a id="__codelineno-0-518" name="__codelineno-0-518"></a>                    <span class="c1"># do not set axis for arrays with strings (object) or models not supporting batching</span>
<a id="__codelineno-0-519" name="__codelineno-0-519"></a>                    <span class="n">axis_of_uniqueness</span> <span class="o">=</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">values</span><span class="o">.</span><span class="n">dtype</span> <span class="o">==</span> <span class="nb">object</span> <span class="k">else</span> <span class="mi">0</span>
<a id="__codelineno-0-520" name="__codelineno-0-520"></a>                    <span class="n">unique_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis_of_uniqueness</span><span class="p">)</span>
<a id="__codelineno-0-521" name="__codelineno-0-521"></a>                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">unique_values</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-0-522" name="__codelineno-0-522"></a>                        <span class="k">raise</span> <span class="n">PyTritonRuntimeError</span><span class="p">(</span>
<a id="__codelineno-0-523" name="__codelineno-0-523"></a>                            <span class="sa">f</span><span class="s2">&quot;The values on the </span><span class="si">{</span><span class="n">input_name</span><span class="si">!r}</span><span class="s2"> input are not equal. &quot;</span>
<a id="__codelineno-0-524" name="__codelineno-0-524"></a>                            <span class="s2">&quot;To proceed, either disable strict mode in @first_value wrapper &quot;</span>
<a id="__codelineno-0-525" name="__codelineno-0-525"></a>                            <span class="s2">&quot;or ensure that the values always are consistent. &quot;</span>
<a id="__codelineno-0-526" name="__codelineno-0-526"></a>                            <span class="sa">f</span><span class="s2">&quot;The current values of </span><span class="si">{</span><span class="n">input_name</span><span class="si">!r}</span><span class="s2"> are </span><span class="si">{</span><span class="n">_request</span><span class="p">[</span><span class="n">input_name</span><span class="p">]</span><span class="si">!r}</span><span class="s2">.&quot;</span>
<a id="__codelineno-0-527" name="__codelineno-0-527"></a>                        <span class="p">)</span>
<a id="__codelineno-0-528" name="__codelineno-0-528"></a>
<a id="__codelineno-0-529" name="__codelineno-0-529"></a>                <span class="n">_first_value</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-530" name="__codelineno-0-530"></a>                <span class="k">if</span> <span class="p">(</span>
<a id="__codelineno-0-531" name="__codelineno-0-531"></a>                    <span class="n">squeeze_single_values</span>
<a id="__codelineno-0-532" name="__codelineno-0-532"></a>                    <span class="ow">and</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">isscalar</span><span class="p">(</span><span class="n">_first_value</span><span class="p">)</span>
<a id="__codelineno-0-533" name="__codelineno-0-533"></a>                    <span class="ow">and</span> <span class="nb">all</span><span class="p">(</span><span class="n">dim</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">dim</span> <span class="ow">in</span> <span class="n">_first_value</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<a id="__codelineno-0-534" name="__codelineno-0-534"></a>                <span class="p">):</span>
<a id="__codelineno-0-535" name="__codelineno-0-535"></a>                    <span class="n">_dim_0_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">squeeze</span><span class="p">(</span><span class="n">_first_value</span><span class="p">)</span>
<a id="__codelineno-0-536" name="__codelineno-0-536"></a>                    <span class="n">_first_value</span> <span class="o">=</span> <span class="n">_dim_0_array</span><span class="p">[()]</span>  <span class="c1"># obtain scalar from 0-dim array with numpy type</span>
<a id="__codelineno-0-537" name="__codelineno-0-537"></a>
<a id="__codelineno-0-538" name="__codelineno-0-538"></a>                <span class="n">_request</span><span class="p">[</span><span class="n">input_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">_first_value</span>
<a id="__codelineno-0-539" name="__codelineno-0-539"></a>            <span class="k">return</span> <span class="n">_request</span>
<a id="__codelineno-0-540" name="__codelineno-0-540"></a>
<a id="__codelineno-0-541" name="__codelineno-0-541"></a>        <span class="n">inputs_names</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">_SPECIAL_KEYS</span><span class="p">)</span>
<a id="__codelineno-0-542" name="__codelineno-0-542"></a>        <span class="k">if</span> <span class="n">inputs_names</span><span class="p">:</span>
<a id="__codelineno-0-543" name="__codelineno-0-543"></a>            <span class="n">kwargs</span> <span class="o">=</span> <span class="n">_replace_inputs_with_first_value</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
<a id="__codelineno-0-544" name="__codelineno-0-544"></a>            <span class="k">return</span> <span class="n">wrapped</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<a id="__codelineno-0-545" name="__codelineno-0-545"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-546" name="__codelineno-0-546"></a>            <span class="n">requests</span><span class="p">,</span> <span class="o">*</span><span class="n">other_args</span> <span class="o">=</span> <span class="n">args</span>
<a id="__codelineno-0-547" name="__codelineno-0-547"></a>            <span class="n">requests</span> <span class="o">=</span> <span class="p">[</span><span class="n">_replace_inputs_with_first_value</span><span class="p">(</span><span class="n">request</span><span class="p">)</span> <span class="k">for</span> <span class="n">request</span> <span class="ow">in</span> <span class="n">requests</span><span class="p">]</span>
<a id="__codelineno-0-548" name="__codelineno-0-548"></a>            <span class="k">return</span> <span class="n">wrapped</span><span class="p">(</span><span class="n">requests</span><span class="p">,</span> <span class="o">*</span><span class="n">other_args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<a id="__codelineno-0-549" name="__codelineno-0-549"></a>
<a id="__codelineno-0-550" name="__codelineno-0-550"></a>    <span class="k">return</span> <span class="n">wrapper</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pytriton.decorators.get_inference_request_batch_size" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_inference_request_batch_size</span><span class="p">(</span><span class="n">inference_request</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Get batch size from triton request.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>inference_request</code></td>
          <td>
                <code><span title="pytriton.decorators.InferenceRequest">InferenceRequest</span></code>
          </td>
          <td><p>Triton request.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
<th>Name</th>        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
<td><code>int</code></td>          <td>
                <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>
          </td>
          <td><p>Batch size.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pytriton/decorators.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-41">41</a></span>
<span class="normal"><a href="#__codelineno-0-42">42</a></span>
<span class="normal"><a href="#__codelineno-0-43">43</a></span>
<span class="normal"><a href="#__codelineno-0-44">44</a></span>
<span class="normal"><a href="#__codelineno-0-45">45</a></span>
<span class="normal"><a href="#__codelineno-0-46">46</a></span>
<span class="normal"><a href="#__codelineno-0-47">47</a></span>
<span class="normal"><a href="#__codelineno-0-48">48</a></span>
<span class="normal"><a href="#__codelineno-0-49">49</a></span>
<span class="normal"><a href="#__codelineno-0-50">50</a></span>
<span class="normal"><a href="#__codelineno-0-51">51</a></span>
<span class="normal"><a href="#__codelineno-0-52">52</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-41" name="__codelineno-0-41"></a><span class="k">def</span> <span class="nf">get_inference_request_batch_size</span><span class="p">(</span><span class="n">inference_request</span><span class="p">:</span> <span class="n">InferenceRequest</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Get batch size from triton request.</span>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a><span class="sd">        inference_request (InferenceRequest): Triton request.</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a><span class="sd">        int: Batch size.</span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a>    <span class="n">first_input_value</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">inference_request</span><span class="o">.</span><span class="n">values</span><span class="p">()))</span>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a>    <span class="n">batch_size</span><span class="p">,</span> <span class="o">*</span><span class="n">dims</span> <span class="o">=</span> <span class="n">first_input_value</span><span class="o">.</span><span class="n">shape</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a>    <span class="k">return</span> <span class="n">batch_size</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pytriton.decorators.get_model_config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_model_config</span><span class="p">(</span><span class="n">wrapped</span><span class="p">,</span> <span class="n">instance</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Retrieves instance of TritonModelConfig from callable.</p>
<p>It is internally used in convert_output function to get output list from model.
You can use this in custom decorators if you need access to model_config information.
If you use @triton_context decorator you do not need this function (you can get model_config directly
from triton_context passing function/callable to dictionary getter).</p>

      <details class="quote">
        <summary>Source code in <code>pytriton/decorators.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-126">126</a></span>
<span class="normal"><a href="#__codelineno-0-127">127</a></span>
<span class="normal"><a href="#__codelineno-0-128">128</a></span>
<span class="normal"><a href="#__codelineno-0-129">129</a></span>
<span class="normal"><a href="#__codelineno-0-130">130</a></span>
<span class="normal"><a href="#__codelineno-0-131">131</a></span>
<span class="normal"><a href="#__codelineno-0-132">132</a></span>
<span class="normal"><a href="#__codelineno-0-133">133</a></span>
<span class="normal"><a href="#__codelineno-0-134">134</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-126" name="__codelineno-0-126"></a><span class="k">def</span> <span class="nf">get_model_config</span><span class="p">(</span><span class="n">wrapped</span><span class="p">,</span> <span class="n">instance</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TritonModelConfig</span><span class="p">:</span>
<a id="__codelineno-0-127" name="__codelineno-0-127"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Retrieves instance of TritonModelConfig from callable.</span>
<a id="__codelineno-0-128" name="__codelineno-0-128"></a>
<a id="__codelineno-0-129" name="__codelineno-0-129"></a><span class="sd">    It is internally used in convert_output function to get output list from model.</span>
<a id="__codelineno-0-130" name="__codelineno-0-130"></a><span class="sd">    You can use this in custom decorators if you need access to model_config information.</span>
<a id="__codelineno-0-131" name="__codelineno-0-131"></a><span class="sd">    If you use @triton_context decorator you do not need this function (you can get model_config directly</span>
<a id="__codelineno-0-132" name="__codelineno-0-132"></a><span class="sd">    from triton_context passing function/callable to dictionary getter).</span>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-134" name="__codelineno-0-134"></a>    <span class="k">return</span> <span class="n">get_triton_context</span><span class="p">(</span><span class="n">wrapped</span><span class="p">,</span> <span class="n">instance</span><span class="p">)</span><span class="o">.</span><span class="n">model_configs</span><span class="p">[</span><span class="n">wrapped</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pytriton.decorators.get_triton_context" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_triton_context</span><span class="p">(</span><span class="n">wrapped</span><span class="p">,</span> <span class="n">instance</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Retrieves triton context from callable.</p>
<p>It is used in @triton_context to get triton context registered by triton binding in inference callable.
If you use @triton_context decorator you do not need this function.</p>

      <details class="quote">
        <summary>Source code in <code>pytriton/decorators.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-114" name="__codelineno-0-114"></a><span class="k">def</span> <span class="nf">get_triton_context</span><span class="p">(</span><span class="n">wrapped</span><span class="p">,</span> <span class="n">instance</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TritonContext</span><span class="p">:</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Retrieves triton context from callable.</span>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a><span class="sd">    It is used in @triton_context to get triton context registered by triton binding in inference callable.</span>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a><span class="sd">    If you use @triton_context decorator you do not need this function.</span>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a>    <span class="n">caller</span> <span class="o">=</span> <span class="n">instance</span> <span class="ow">or</span> <span class="n">wrapped</span>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">caller</span><span class="p">,</span> <span class="s2">&quot;__triton_context__&quot;</span><span class="p">):</span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a>        <span class="k">raise</span> <span class="n">PyTritonValidationError</span><span class="p">(</span><span class="s2">&quot;Wrapped function or object must bound with triton to get  __triton_context__&quot;</span><span class="p">)</span>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a>    <span class="k">return</span> <span class="n">caller</span><span class="o">.</span><span class="n">__triton_context__</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pytriton.decorators.group_by_keys" class="doc doc-heading">
<code class="highlight language-python"><span class="n">group_by_keys</span><span class="p">(</span><span class="n">wrapped</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Group by keys.</p>
<p>Decorator prepares groups of requests with the same set of keys and calls wrapped function
for each group separately (it is convenient to use this decorator before batching, because the batching decorator
requires consistent set of inputs as it stacks them into batches).</p>

      <details class="quote">
        <summary>Source code in <code>pytriton/decorators.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-295">295</a></span>
<span class="normal"><a href="#__codelineno-0-296">296</a></span>
<span class="normal"><a href="#__codelineno-0-297">297</a></span>
<span class="normal"><a href="#__codelineno-0-298">298</a></span>
<span class="normal"><a href="#__codelineno-0-299">299</a></span>
<span class="normal"><a href="#__codelineno-0-300">300</a></span>
<span class="normal"><a href="#__codelineno-0-301">301</a></span>
<span class="normal"><a href="#__codelineno-0-302">302</a></span>
<span class="normal"><a href="#__codelineno-0-303">303</a></span>
<span class="normal"><a href="#__codelineno-0-304">304</a></span>
<span class="normal"><a href="#__codelineno-0-305">305</a></span>
<span class="normal"><a href="#__codelineno-0-306">306</a></span>
<span class="normal"><a href="#__codelineno-0-307">307</a></span>
<span class="normal"><a href="#__codelineno-0-308">308</a></span>
<span class="normal"><a href="#__codelineno-0-309">309</a></span>
<span class="normal"><a href="#__codelineno-0-310">310</a></span>
<span class="normal"><a href="#__codelineno-0-311">311</a></span>
<span class="normal"><a href="#__codelineno-0-312">312</a></span>
<span class="normal"><a href="#__codelineno-0-313">313</a></span>
<span class="normal"><a href="#__codelineno-0-314">314</a></span>
<span class="normal"><a href="#__codelineno-0-315">315</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-295" name="__codelineno-0-295"></a><span class="nd">@wrapt</span><span class="o">.</span><span class="n">decorator</span>
<a id="__codelineno-0-296" name="__codelineno-0-296"></a><span class="k">def</span> <span class="nf">group_by_keys</span><span class="p">(</span><span class="n">wrapped</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-297" name="__codelineno-0-297"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Group by keys.</span>
<a id="__codelineno-0-298" name="__codelineno-0-298"></a>
<a id="__codelineno-0-299" name="__codelineno-0-299"></a><span class="sd">    Decorator prepares groups of requests with the same set of keys and calls wrapped function</span>
<a id="__codelineno-0-300" name="__codelineno-0-300"></a><span class="sd">    for each group separately (it is convenient to use this decorator before batching, because the batching decorator</span>
<a id="__codelineno-0-301" name="__codelineno-0-301"></a><span class="sd">    requires consistent set of inputs as it stacks them into batches).</span>
<a id="__codelineno-0-302" name="__codelineno-0-302"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-303" name="__codelineno-0-303"></a>    <span class="n">inputs</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-0-304" name="__codelineno-0-304"></a>    <span class="n">idx_inputs</span> <span class="o">=</span> <span class="p">[(</span><span class="n">idx</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="nb">input</span><span class="o">.</span><span class="n">keys</span><span class="p">())),</span> <span class="nb">input</span><span class="p">)</span> <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="nb">input</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">inputs</span><span class="p">)]</span>
<a id="__codelineno-0-305" name="__codelineno-0-305"></a>    <span class="n">idx_inputs</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">operator</span><span class="o">.</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<a id="__codelineno-0-306" name="__codelineno-0-306"></a>    <span class="n">idx_groups_res</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-307" name="__codelineno-0-307"></a>    <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">idx_inputs</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">operator</span><span class="o">.</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">1</span><span class="p">)):</span>
<a id="__codelineno-0-308" name="__codelineno-0-308"></a>        <span class="n">idx</span><span class="p">,</span> <span class="n">_key</span><span class="p">,</span> <span class="n">sample_list</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">group</span><span class="p">)</span>
<a id="__codelineno-0-309" name="__codelineno-0-309"></a>        <span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">sample_list</span><span class="p">),)</span> <span class="o">+</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
<a id="__codelineno-0-310" name="__codelineno-0-310"></a>        <span class="n">out</span> <span class="o">=</span> <span class="n">wrapped</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<a id="__codelineno-0-311" name="__codelineno-0-311"></a>        <span class="n">idx_groups_res</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="n">out</span><span class="p">))</span>
<a id="__codelineno-0-312" name="__codelineno-0-312"></a>
<a id="__codelineno-0-313" name="__codelineno-0-313"></a>    <span class="n">idx_groups_res</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">operator</span><span class="o">.</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
<a id="__codelineno-0-314" name="__codelineno-0-314"></a>    <span class="n">res_flat</span> <span class="o">=</span> <span class="p">[</span><span class="n">r</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">idx_groups_res</span><span class="p">]</span>
<a id="__codelineno-0-315" name="__codelineno-0-315"></a>    <span class="k">return</span> <span class="n">res_flat</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pytriton.decorators.group_by_values" class="doc doc-heading">
<code class="highlight language-python"><span class="n">group_by_values</span><span class="p">(</span><span class="o">*</span><span class="n">keys</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Decorator for grouping requests by values of selected keys.</p>
<p>Splits a batch into multiple sub-batches with the same values of selected keys and
calls the decorated function with each of them.
This is especially convenient when working with models that require dynamic parameters
sent by the user. For example, given an input of the form:</p>
<div class="highlight"><pre><span></span><code>{&quot;sentences&quot;: [b&quot;Sentence1&quot;, b&quot;Sentence2&quot;, b&quot;Sentence3&quot;], &quot;param1&quot;: [1, 1, 2], &quot;param2&quot;: [1, 1, 1]}
</code></pre></div>
<p>Using @group_by_values("param1", "param2") will split the batch into two sub-batches:</p>
<div class="highlight"><pre><span></span><code>[
    {&quot;sentences&quot;: [b&quot;Sentence1&quot;, b&quot;Sentence2&quot;], &quot;param1&quot;: [1, 1], &quot;param2&quot;: [1, 1]},
    {&quot;sentences&quot;: [b&quot;Sentence3&quot;], &quot;param1&quot;: [2], &quot;param2&quot;: [1]}
]
</code></pre></div>
<p>This decorator should be used after the @batch decorator.</p>

<details class="typical-use">
  <summary>Typical use</summary>
  <p>@batch
@group_by_values("param1", "param2")
def infer_fun(**inputs):
    ...
    return outputs</p>
</details>
  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>*keys</code></td>
          <td>
          </td>
          <td><p>List of keys to group by.</p></td>
          <td>
                <code>()</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>The decorator function.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pytriton/decorators.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-217">217</a></span>
<span class="normal"><a href="#__codelineno-0-218">218</a></span>
<span class="normal"><a href="#__codelineno-0-219">219</a></span>
<span class="normal"><a href="#__codelineno-0-220">220</a></span>
<span class="normal"><a href="#__codelineno-0-221">221</a></span>
<span class="normal"><a href="#__codelineno-0-222">222</a></span>
<span class="normal"><a href="#__codelineno-0-223">223</a></span>
<span class="normal"><a href="#__codelineno-0-224">224</a></span>
<span class="normal"><a href="#__codelineno-0-225">225</a></span>
<span class="normal"><a href="#__codelineno-0-226">226</a></span>
<span class="normal"><a href="#__codelineno-0-227">227</a></span>
<span class="normal"><a href="#__codelineno-0-228">228</a></span>
<span class="normal"><a href="#__codelineno-0-229">229</a></span>
<span class="normal"><a href="#__codelineno-0-230">230</a></span>
<span class="normal"><a href="#__codelineno-0-231">231</a></span>
<span class="normal"><a href="#__codelineno-0-232">232</a></span>
<span class="normal"><a href="#__codelineno-0-233">233</a></span>
<span class="normal"><a href="#__codelineno-0-234">234</a></span>
<span class="normal"><a href="#__codelineno-0-235">235</a></span>
<span class="normal"><a href="#__codelineno-0-236">236</a></span>
<span class="normal"><a href="#__codelineno-0-237">237</a></span>
<span class="normal"><a href="#__codelineno-0-238">238</a></span>
<span class="normal"><a href="#__codelineno-0-239">239</a></span>
<span class="normal"><a href="#__codelineno-0-240">240</a></span>
<span class="normal"><a href="#__codelineno-0-241">241</a></span>
<span class="normal"><a href="#__codelineno-0-242">242</a></span>
<span class="normal"><a href="#__codelineno-0-243">243</a></span>
<span class="normal"><a href="#__codelineno-0-244">244</a></span>
<span class="normal"><a href="#__codelineno-0-245">245</a></span>
<span class="normal"><a href="#__codelineno-0-246">246</a></span>
<span class="normal"><a href="#__codelineno-0-247">247</a></span>
<span class="normal"><a href="#__codelineno-0-248">248</a></span>
<span class="normal"><a href="#__codelineno-0-249">249</a></span>
<span class="normal"><a href="#__codelineno-0-250">250</a></span>
<span class="normal"><a href="#__codelineno-0-251">251</a></span>
<span class="normal"><a href="#__codelineno-0-252">252</a></span>
<span class="normal"><a href="#__codelineno-0-253">253</a></span>
<span class="normal"><a href="#__codelineno-0-254">254</a></span>
<span class="normal"><a href="#__codelineno-0-255">255</a></span>
<span class="normal"><a href="#__codelineno-0-256">256</a></span>
<span class="normal"><a href="#__codelineno-0-257">257</a></span>
<span class="normal"><a href="#__codelineno-0-258">258</a></span>
<span class="normal"><a href="#__codelineno-0-259">259</a></span>
<span class="normal"><a href="#__codelineno-0-260">260</a></span>
<span class="normal"><a href="#__codelineno-0-261">261</a></span>
<span class="normal"><a href="#__codelineno-0-262">262</a></span>
<span class="normal"><a href="#__codelineno-0-263">263</a></span>
<span class="normal"><a href="#__codelineno-0-264">264</a></span>
<span class="normal"><a href="#__codelineno-0-265">265</a></span>
<span class="normal"><a href="#__codelineno-0-266">266</a></span>
<span class="normal"><a href="#__codelineno-0-267">267</a></span>
<span class="normal"><a href="#__codelineno-0-268">268</a></span>
<span class="normal"><a href="#__codelineno-0-269">269</a></span>
<span class="normal"><a href="#__codelineno-0-270">270</a></span>
<span class="normal"><a href="#__codelineno-0-271">271</a></span>
<span class="normal"><a href="#__codelineno-0-272">272</a></span>
<span class="normal"><a href="#__codelineno-0-273">273</a></span>
<span class="normal"><a href="#__codelineno-0-274">274</a></span>
<span class="normal"><a href="#__codelineno-0-275">275</a></span>
<span class="normal"><a href="#__codelineno-0-276">276</a></span>
<span class="normal"><a href="#__codelineno-0-277">277</a></span>
<span class="normal"><a href="#__codelineno-0-278">278</a></span>
<span class="normal"><a href="#__codelineno-0-279">279</a></span>
<span class="normal"><a href="#__codelineno-0-280">280</a></span>
<span class="normal"><a href="#__codelineno-0-281">281</a></span>
<span class="normal"><a href="#__codelineno-0-282">282</a></span>
<span class="normal"><a href="#__codelineno-0-283">283</a></span>
<span class="normal"><a href="#__codelineno-0-284">284</a></span>
<span class="normal"><a href="#__codelineno-0-285">285</a></span>
<span class="normal"><a href="#__codelineno-0-286">286</a></span>
<span class="normal"><a href="#__codelineno-0-287">287</a></span>
<span class="normal"><a href="#__codelineno-0-288">288</a></span>
<span class="normal"><a href="#__codelineno-0-289">289</a></span>
<span class="normal"><a href="#__codelineno-0-290">290</a></span>
<span class="normal"><a href="#__codelineno-0-291">291</a></span>
<span class="normal"><a href="#__codelineno-0-292">292</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-217" name="__codelineno-0-217"></a><span class="k">def</span> <span class="nf">group_by_values</span><span class="p">(</span><span class="o">*</span><span class="n">keys</span><span class="p">):</span>
<a id="__codelineno-0-218" name="__codelineno-0-218"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Decorator for grouping requests by values of selected keys.</span>
<a id="__codelineno-0-219" name="__codelineno-0-219"></a>
<a id="__codelineno-0-220" name="__codelineno-0-220"></a><span class="sd">    Splits a batch into multiple sub-batches with the same values of selected keys and</span>
<a id="__codelineno-0-221" name="__codelineno-0-221"></a><span class="sd">    calls the decorated function with each of them.</span>
<a id="__codelineno-0-222" name="__codelineno-0-222"></a><span class="sd">    This is especially convenient when working with models that require dynamic parameters</span>
<a id="__codelineno-0-223" name="__codelineno-0-223"></a><span class="sd">    sent by the user. For example, given an input of the form:</span>
<a id="__codelineno-0-224" name="__codelineno-0-224"></a>
<a id="__codelineno-0-225" name="__codelineno-0-225"></a><span class="sd">        {&quot;sentences&quot;: [b&quot;Sentence1&quot;, b&quot;Sentence2&quot;, b&quot;Sentence3&quot;], &quot;param1&quot;: [1, 1, 2], &quot;param2&quot;: [1, 1, 1]}</span>
<a id="__codelineno-0-226" name="__codelineno-0-226"></a>
<a id="__codelineno-0-227" name="__codelineno-0-227"></a><span class="sd">    Using @group_by_values(&quot;param1&quot;, &quot;param2&quot;) will split the batch into two sub-batches:</span>
<a id="__codelineno-0-228" name="__codelineno-0-228"></a>
<a id="__codelineno-0-229" name="__codelineno-0-229"></a><span class="sd">        [</span>
<a id="__codelineno-0-230" name="__codelineno-0-230"></a><span class="sd">            {&quot;sentences&quot;: [b&quot;Sentence1&quot;, b&quot;Sentence2&quot;], &quot;param1&quot;: [1, 1], &quot;param2&quot;: [1, 1]},</span>
<a id="__codelineno-0-231" name="__codelineno-0-231"></a><span class="sd">            {&quot;sentences&quot;: [b&quot;Sentence3&quot;], &quot;param1&quot;: [2], &quot;param2&quot;: [1]}</span>
<a id="__codelineno-0-232" name="__codelineno-0-232"></a><span class="sd">        ]</span>
<a id="__codelineno-0-233" name="__codelineno-0-233"></a>
<a id="__codelineno-0-234" name="__codelineno-0-234"></a><span class="sd">    This decorator should be used after the @batch decorator.</span>
<a id="__codelineno-0-235" name="__codelineno-0-235"></a>
<a id="__codelineno-0-236" name="__codelineno-0-236"></a><span class="sd">    Typical use:</span>
<a id="__codelineno-0-237" name="__codelineno-0-237"></a>
<a id="__codelineno-0-238" name="__codelineno-0-238"></a><span class="sd">        @batch</span>
<a id="__codelineno-0-239" name="__codelineno-0-239"></a><span class="sd">        @group_by_values(&quot;param1&quot;, &quot;param2&quot;)</span>
<a id="__codelineno-0-240" name="__codelineno-0-240"></a><span class="sd">        def infer_fun(**inputs):</span>
<a id="__codelineno-0-241" name="__codelineno-0-241"></a><span class="sd">            ...</span>
<a id="__codelineno-0-242" name="__codelineno-0-242"></a><span class="sd">            return outputs</span>
<a id="__codelineno-0-243" name="__codelineno-0-243"></a>
<a id="__codelineno-0-244" name="__codelineno-0-244"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-245" name="__codelineno-0-245"></a><span class="sd">        *keys: List of keys to group by.</span>
<a id="__codelineno-0-246" name="__codelineno-0-246"></a>
<a id="__codelineno-0-247" name="__codelineno-0-247"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-248" name="__codelineno-0-248"></a><span class="sd">        The decorator function.</span>
<a id="__codelineno-0-249" name="__codelineno-0-249"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-250" name="__codelineno-0-250"></a>
<a id="__codelineno-0-251" name="__codelineno-0-251"></a>    <span class="k">def</span> <span class="nf">_value2key</span><span class="p">(</span><span class="n">_v</span><span class="p">):</span>
<a id="__codelineno-0-252" name="__codelineno-0-252"></a>        <span class="k">return</span> <span class="n">_v</span><span class="o">.</span><span class="n">tobytes</span><span class="p">()</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">_v</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="k">else</span> <span class="n">_v</span>
<a id="__codelineno-0-253" name="__codelineno-0-253"></a>
<a id="__codelineno-0-254" name="__codelineno-0-254"></a>    <span class="k">def</span> <span class="nf">_get_sort_key_for_sample</span><span class="p">(</span><span class="n">_request</span><span class="p">,</span> <span class="n">_sample_idx</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<a id="__codelineno-0-255" name="__codelineno-0-255"></a>        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">_value2key</span><span class="p">(</span><span class="n">_request</span><span class="p">[</span><span class="n">_key</span><span class="p">][</span><span class="n">_sample_idx</span><span class="p">])</span> <span class="k">for</span> <span class="n">_key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">)</span>
<a id="__codelineno-0-256" name="__codelineno-0-256"></a>
<a id="__codelineno-0-257" name="__codelineno-0-257"></a>    <span class="k">def</span> <span class="nf">_group_request</span><span class="p">(</span>
<a id="__codelineno-0-258" name="__codelineno-0-258"></a>        <span class="n">_request</span><span class="p">:</span> <span class="n">InferenceRequest</span><span class="p">,</span> <span class="n">_batch_size</span><span class="p">:</span> <span class="nb">int</span>
<a id="__codelineno-0-259" name="__codelineno-0-259"></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Generator</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span> <span class="n">InferenceRequest</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<a id="__codelineno-0-260" name="__codelineno-0-260"></a>        <span class="n">idx_inputs</span> <span class="o">=</span> <span class="p">[(</span><span class="n">sample_idx</span><span class="p">,</span> <span class="n">_get_sort_key_for_sample</span><span class="p">(</span><span class="n">_request</span><span class="p">,</span> <span class="n">sample_idx</span><span class="p">))</span> <span class="k">for</span> <span class="n">sample_idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">_batch_size</span><span class="p">)]</span>
<a id="__codelineno-0-261" name="__codelineno-0-261"></a>        <span class="n">idx_inputs</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">operator</span><span class="o">.</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<a id="__codelineno-0-262" name="__codelineno-0-262"></a>        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">idx_inputs</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">operator</span><span class="o">.</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">1</span><span class="p">)):</span>
<a id="__codelineno-0-263" name="__codelineno-0-263"></a>            <span class="n">_samples_idxes</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">group</span><span class="p">)</span>
<a id="__codelineno-0-264" name="__codelineno-0-264"></a>            <span class="n">grouped_request</span> <span class="o">=</span> <span class="p">{</span><span class="n">input_name</span><span class="p">:</span> <span class="n">value</span><span class="p">[</span><span class="n">_samples_idxes</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span> <span class="k">for</span> <span class="n">input_name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">_request</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
<a id="__codelineno-0-265" name="__codelineno-0-265"></a>            <span class="k">yield</span> <span class="n">_samples_idxes</span><span class="p">,</span> <span class="n">grouped_request</span>
<a id="__codelineno-0-266" name="__codelineno-0-266"></a>
<a id="__codelineno-0-267" name="__codelineno-0-267"></a>    <span class="nd">@wrapt</span><span class="o">.</span><span class="n">decorator</span>
<a id="__codelineno-0-268" name="__codelineno-0-268"></a>    <span class="k">def</span> <span class="nf">_wrapper</span><span class="p">(</span><span class="n">wrapped</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-269" name="__codelineno-0-269"></a>
<a id="__codelineno-0-270" name="__codelineno-0-270"></a>        <span class="n">wrappers_stack</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-271" name="__codelineno-0-271"></a>            <span class="n">callable_with_wrapper</span><span class="o">.</span><span class="n">wrapper</span>
<a id="__codelineno-0-272" name="__codelineno-0-272"></a>            <span class="k">for</span> <span class="n">callable_with_wrapper</span> <span class="ow">in</span> <span class="n">_get_wrapt_stack</span><span class="p">(</span><span class="n">wrapped</span><span class="p">)</span>
<a id="__codelineno-0-273" name="__codelineno-0-273"></a>            <span class="k">if</span> <span class="n">callable_with_wrapper</span><span class="o">.</span><span class="n">wrapper</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
<a id="__codelineno-0-274" name="__codelineno-0-274"></a>        <span class="p">]</span>
<a id="__codelineno-0-275" name="__codelineno-0-275"></a>        <span class="k">if</span> <span class="n">batch</span> <span class="ow">in</span> <span class="n">wrappers_stack</span><span class="p">:</span>
<a id="__codelineno-0-276" name="__codelineno-0-276"></a>            <span class="k">raise</span> <span class="n">PyTritonRuntimeError</span><span class="p">(</span><span class="s2">&quot;The @group_by_values decorator must be used after the @batch decorator.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-277" name="__codelineno-0-277"></a>
<a id="__codelineno-0-278" name="__codelineno-0-278"></a>        <span class="n">request</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">_SPECIAL_KEYS</span><span class="p">}</span>
<a id="__codelineno-0-279" name="__codelineno-0-279"></a>        <span class="n">other_kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">_SPECIAL_KEYS</span><span class="p">}</span>
<a id="__codelineno-0-280" name="__codelineno-0-280"></a>
<a id="__codelineno-0-281" name="__codelineno-0-281"></a>        <span class="n">batch_size</span> <span class="o">=</span> <span class="n">get_inference_request_batch_size</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<a id="__codelineno-0-282" name="__codelineno-0-282"></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>
<a id="__codelineno-0-283" name="__codelineno-0-283"></a>        <span class="k">for</span> <span class="n">samples_idxes</span><span class="p">,</span> <span class="n">_grouped_sub_request</span> <span class="ow">in</span> <span class="n">_group_request</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">batch_size</span><span class="p">):</span>
<a id="__codelineno-0-284" name="__codelineno-0-284"></a>            <span class="n">interim_result</span> <span class="o">=</span> <span class="n">wrapped</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">_grouped_sub_request</span><span class="p">,</span> <span class="o">**</span><span class="n">other_kwargs</span><span class="p">)</span>
<a id="__codelineno-0-285" name="__codelineno-0-285"></a>
<a id="__codelineno-0-286" name="__codelineno-0-286"></a>            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">result_data</span> <span class="ow">in</span> <span class="n">interim_result</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-287" name="__codelineno-0-287"></a>                <span class="n">result</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">batch_size</span><span class="p">,</span> <span class="o">*</span><span class="n">result_data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">:]),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">result_data</span><span class="o">.</span><span class="n">dtype</span><span class="p">))</span>
<a id="__codelineno-0-288" name="__codelineno-0-288"></a>                <span class="n">result</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="n">samples_idxes</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span> <span class="o">=</span> <span class="n">result_data</span>  <span class="c1"># make copy here</span>
<a id="__codelineno-0-289" name="__codelineno-0-289"></a>
<a id="__codelineno-0-290" name="__codelineno-0-290"></a>        <span class="k">return</span> <span class="n">result</span>
<a id="__codelineno-0-291" name="__codelineno-0-291"></a>
<a id="__codelineno-0-292" name="__codelineno-0-292"></a>    <span class="k">return</span> <span class="n">_wrapper</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pytriton.decorators.pad_batch" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pad_batch</span><span class="p">(</span><span class="n">wrapped</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Add padding to the inputs batches.</p>
<p>Decorator appends last rows to the inputs multiple times to get desired batch size (preferred batch size or
max batch size from model config whatever is closer to current input size).</p>

      <details class="quote">
        <summary>Source code in <code>pytriton/decorators.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-425">425</a></span>
<span class="normal"><a href="#__codelineno-0-426">426</a></span>
<span class="normal"><a href="#__codelineno-0-427">427</a></span>
<span class="normal"><a href="#__codelineno-0-428">428</a></span>
<span class="normal"><a href="#__codelineno-0-429">429</a></span>
<span class="normal"><a href="#__codelineno-0-430">430</a></span>
<span class="normal"><a href="#__codelineno-0-431">431</a></span>
<span class="normal"><a href="#__codelineno-0-432">432</a></span>
<span class="normal"><a href="#__codelineno-0-433">433</a></span>
<span class="normal"><a href="#__codelineno-0-434">434</a></span>
<span class="normal"><a href="#__codelineno-0-435">435</a></span>
<span class="normal"><a href="#__codelineno-0-436">436</a></span>
<span class="normal"><a href="#__codelineno-0-437">437</a></span>
<span class="normal"><a href="#__codelineno-0-438">438</a></span>
<span class="normal"><a href="#__codelineno-0-439">439</a></span>
<span class="normal"><a href="#__codelineno-0-440">440</a></span>
<span class="normal"><a href="#__codelineno-0-441">441</a></span>
<span class="normal"><a href="#__codelineno-0-442">442</a></span>
<span class="normal"><a href="#__codelineno-0-443">443</a></span>
<span class="normal"><a href="#__codelineno-0-444">444</a></span>
<span class="normal"><a href="#__codelineno-0-445">445</a></span>
<span class="normal"><a href="#__codelineno-0-446">446</a></span>
<span class="normal"><a href="#__codelineno-0-447">447</a></span>
<span class="normal"><a href="#__codelineno-0-448">448</a></span>
<span class="normal"><a href="#__codelineno-0-449">449</a></span>
<span class="normal"><a href="#__codelineno-0-450">450</a></span>
<span class="normal"><a href="#__codelineno-0-451">451</a></span>
<span class="normal"><a href="#__codelineno-0-452">452</a></span>
<span class="normal"><a href="#__codelineno-0-453">453</a></span>
<span class="normal"><a href="#__codelineno-0-454">454</a></span>
<span class="normal"><a href="#__codelineno-0-455">455</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-425" name="__codelineno-0-425"></a><span class="nd">@wrapt</span><span class="o">.</span><span class="n">decorator</span>
<a id="__codelineno-0-426" name="__codelineno-0-426"></a><span class="k">def</span> <span class="nf">pad_batch</span><span class="p">(</span><span class="n">wrapped</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-427" name="__codelineno-0-427"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Add padding to the inputs batches.</span>
<a id="__codelineno-0-428" name="__codelineno-0-428"></a>
<a id="__codelineno-0-429" name="__codelineno-0-429"></a><span class="sd">    Decorator appends last rows to the inputs multiple times to get desired batch size (preferred batch size or</span>
<a id="__codelineno-0-430" name="__codelineno-0-430"></a><span class="sd">    max batch size from model config whatever is closer to current input size).</span>
<a id="__codelineno-0-431" name="__codelineno-0-431"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-432" name="__codelineno-0-432"></a>    <span class="n">inputs</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="o">!=</span> <span class="s2">&quot;__triton_context__&quot;</span><span class="p">}</span>
<a id="__codelineno-0-433" name="__codelineno-0-433"></a>    <span class="n">first_input</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="nb">iter</span><span class="p">(</span><span class="n">inputs</span><span class="o">.</span><span class="n">values</span><span class="p">()))</span>
<a id="__codelineno-0-434" name="__codelineno-0-434"></a>    <span class="n">config</span> <span class="o">=</span> <span class="n">get_model_config</span><span class="p">(</span><span class="n">wrapped</span><span class="p">,</span> <span class="n">instance</span><span class="p">)</span>
<a id="__codelineno-0-435" name="__codelineno-0-435"></a>    <span class="n">batch_sizes</span> <span class="o">=</span> <span class="p">(</span>
<a id="__codelineno-0-436" name="__codelineno-0-436"></a>        <span class="p">[]</span>
<a id="__codelineno-0-437" name="__codelineno-0-437"></a>        <span class="k">if</span> <span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">batcher</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">config</span><span class="o">.</span><span class="n">batcher</span><span class="o">.</span><span class="n">preferred_batch_size</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span>
<a id="__codelineno-0-438" name="__codelineno-0-438"></a>        <span class="k">else</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">batcher</span><span class="o">.</span><span class="n">preferred_batch_size</span><span class="p">)</span>
<a id="__codelineno-0-439" name="__codelineno-0-439"></a>    <span class="p">)</span>
<a id="__codelineno-0-440" name="__codelineno-0-440"></a>    <span class="n">batch_sizes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">max_batch_size</span><span class="p">)</span>
<a id="__codelineno-0-441" name="__codelineno-0-441"></a>    <span class="n">batch_size</span> <span class="o">=</span> <span class="n">batch_sizes</span><span class="p">[</span><span class="n">bisect_left</span><span class="p">(</span><span class="n">batch_sizes</span><span class="p">,</span> <span class="n">first_input</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])]</span>
<a id="__codelineno-0-442" name="__codelineno-0-442"></a>
<a id="__codelineno-0-443" name="__codelineno-0-443"></a>    <span class="n">new_inputs</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-444" name="__codelineno-0-444"></a>        <span class="n">input_name</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span>
<a id="__codelineno-0-445" name="__codelineno-0-445"></a>            <span class="n">input_array</span><span class="p">,</span>
<a id="__codelineno-0-446" name="__codelineno-0-446"></a>            <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span>
<a id="__codelineno-0-447" name="__codelineno-0-447"></a>                <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">input_array</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">batch_size</span> <span class="o">-</span> <span class="n">input_array</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])]</span>
<a id="__codelineno-0-448" name="__codelineno-0-448"></a>            <span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">),</span>
<a id="__codelineno-0-449" name="__codelineno-0-449"></a>            <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-0-450" name="__codelineno-0-450"></a>        <span class="p">)</span>
<a id="__codelineno-0-451" name="__codelineno-0-451"></a>        <span class="k">for</span> <span class="n">input_name</span><span class="p">,</span> <span class="n">input_array</span> <span class="ow">in</span> <span class="n">inputs</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
<a id="__codelineno-0-452" name="__codelineno-0-452"></a>    <span class="p">}</span>
<a id="__codelineno-0-453" name="__codelineno-0-453"></a>
<a id="__codelineno-0-454" name="__codelineno-0-454"></a>    <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">new_inputs</span><span class="p">)</span>
<a id="__codelineno-0-455" name="__codelineno-0-455"></a>    <span class="k">return</span> <span class="n">wrapped</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pytriton.decorators.sample" class="doc doc-heading">
<code class="highlight language-python"><span class="n">sample</span><span class="p">(</span><span class="n">wrapped</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Decorator is used for non-batched inputs to convert from one element list of requests to request kwargs.</p>
<p>Decorator takes first request and convert it into named inputs.
Useful with non-batching models - instead of one element list of request, we will get named inputs - <code>kwargs</code>.</p>

      <details class="quote">
        <summary>Source code in <code>pytriton/decorators.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-159">159</a></span>
<span class="normal"><a href="#__codelineno-0-160">160</a></span>
<span class="normal"><a href="#__codelineno-0-161">161</a></span>
<span class="normal"><a href="#__codelineno-0-162">162</a></span>
<span class="normal"><a href="#__codelineno-0-163">163</a></span>
<span class="normal"><a href="#__codelineno-0-164">164</a></span>
<span class="normal"><a href="#__codelineno-0-165">165</a></span>
<span class="normal"><a href="#__codelineno-0-166">166</a></span>
<span class="normal"><a href="#__codelineno-0-167">167</a></span>
<span class="normal"><a href="#__codelineno-0-168">168</a></span>
<span class="normal"><a href="#__codelineno-0-169">169</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-159" name="__codelineno-0-159"></a><span class="nd">@wrapt</span><span class="o">.</span><span class="n">decorator</span>
<a id="__codelineno-0-160" name="__codelineno-0-160"></a><span class="k">def</span> <span class="nf">sample</span><span class="p">(</span><span class="n">wrapped</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-161" name="__codelineno-0-161"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Decorator is used for non-batched inputs to convert from one element list of requests to request kwargs.</span>
<a id="__codelineno-0-162" name="__codelineno-0-162"></a>
<a id="__codelineno-0-163" name="__codelineno-0-163"></a><span class="sd">    Decorator takes first request and convert it into named inputs.</span>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a><span class="sd">    Useful with non-batching models - instead of one element list of request, we will get named inputs - `kwargs`.</span>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a>    <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a>    <span class="n">outputs</span> <span class="o">=</span> <span class="n">wrapped</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a>    <span class="n">outputs</span> <span class="o">=</span> <span class="n">convert_output</span><span class="p">(</span><span class="n">outputs</span><span class="p">,</span> <span class="n">wrapped</span><span class="p">,</span> <span class="n">instance</span><span class="p">)</span>
<a id="__codelineno-0-169" name="__codelineno-0-169"></a>    <span class="k">return</span> <span class="p">[</span><span class="n">outputs</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pytriton.decorators.triton_context" class="doc doc-heading">
<code class="highlight language-python"><span class="n">triton_context</span><span class="p">(</span><span class="n">wrapped</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Adds triton context.</p>
<p>It gives you additional argument passed to the function in **kwargs called 'triton_context'.
You can read model config from it and in the future possibly have some interaction with triton.</p>

      <details class="quote">
        <summary>Source code in <code>pytriton/decorators.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-414">414</a></span>
<span class="normal"><a href="#__codelineno-0-415">415</a></span>
<span class="normal"><a href="#__codelineno-0-416">416</a></span>
<span class="normal"><a href="#__codelineno-0-417">417</a></span>
<span class="normal"><a href="#__codelineno-0-418">418</a></span>
<span class="normal"><a href="#__codelineno-0-419">419</a></span>
<span class="normal"><a href="#__codelineno-0-420">420</a></span>
<span class="normal"><a href="#__codelineno-0-421">421</a></span>
<span class="normal"><a href="#__codelineno-0-422">422</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-414" name="__codelineno-0-414"></a><span class="nd">@wrapt</span><span class="o">.</span><span class="n">decorator</span>
<a id="__codelineno-0-415" name="__codelineno-0-415"></a><span class="k">def</span> <span class="nf">triton_context</span><span class="p">(</span><span class="n">wrapped</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
<a id="__codelineno-0-416" name="__codelineno-0-416"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds triton context.</span>
<a id="__codelineno-0-417" name="__codelineno-0-417"></a>
<a id="__codelineno-0-418" name="__codelineno-0-418"></a><span class="sd">    It gives you additional argument passed to the function in **kwargs called &#39;triton_context&#39;.</span>
<a id="__codelineno-0-419" name="__codelineno-0-419"></a><span class="sd">    You can read model config from it and in the future possibly have some interaction with triton.</span>
<a id="__codelineno-0-420" name="__codelineno-0-420"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-421" name="__codelineno-0-421"></a>    <span class="n">kwargs</span><span class="p">[</span><span class="n">TRITON_CONTEXT_FIELD_NAME</span><span class="p">]</span> <span class="o">=</span> <span class="n">get_triton_context</span><span class="p">(</span><span class="n">wrapped</span><span class="p">,</span> <span class="n">instance</span><span class="p">)</span>
<a id="__codelineno-0-422" name="__codelineno-0-422"></a>    <span class="k">return</span> <span class="n">wrapped</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="pytriton.triton.Triton" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pytriton</span><span class="o">.</span><span class="n">triton</span><span class="o">.</span><span class="n">Triton</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">workspace</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents first">

  
      <p>Triton Inference Server for Python models.</p>

  
      <p>Initialize Triton Inference Server context for starting server and loading models.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>config</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-internal" title="pytriton.triton.TritonConfig" href="#pytriton.triton.TritonConfig">TritonConfig</a>]</code>
          </td>
          <td><p>TritonConfig object with optional customizations for Triton Inference Server.
Configuration can be passed also through environment variables.
See <a class="autorefs autorefs-internal" href="#pytriton.triton.TritonConfig.from_env">TritonConfig.from_env()</a> class method for details.</p>
<p>Order of precedence:</p>
<ul>
<li>config defined through <code>config</code> parameter of init method.</li>
<li>config defined in environment variables</li>
<li>default TritonConfig values</li>
</ul></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>workspace</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<span title="pytriton.utils.workspace.Workspace">Workspace</span>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <a class="autorefs autorefs-external" href="https://docs.python.org/3/library/pathlib.html#module-pathlib">pathlib</a>.<a class="autorefs autorefs-external" title="pathlib.Path" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path">Path</a>, None]</code>
          </td>
          <td><p>workspace or path where the Triton Model Store and files used by pytriton will be created.
If workspace is <code>None</code> random workspace will be created.
Workspace will be deleted in <a class="autorefs autorefs-internal" href="#pytriton.triton.Triton.stop">Triton.stop()</a>.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>pytriton/triton.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-239">239</a></span>
<span class="normal"><a href="#__codelineno-0-240">240</a></span>
<span class="normal"><a href="#__codelineno-0-241">241</a></span>
<span class="normal"><a href="#__codelineno-0-242">242</a></span>
<span class="normal"><a href="#__codelineno-0-243">243</a></span>
<span class="normal"><a href="#__codelineno-0-244">244</a></span>
<span class="normal"><a href="#__codelineno-0-245">245</a></span>
<span class="normal"><a href="#__codelineno-0-246">246</a></span>
<span class="normal"><a href="#__codelineno-0-247">247</a></span>
<span class="normal"><a href="#__codelineno-0-248">248</a></span>
<span class="normal"><a href="#__codelineno-0-249">249</a></span>
<span class="normal"><a href="#__codelineno-0-250">250</a></span>
<span class="normal"><a href="#__codelineno-0-251">251</a></span>
<span class="normal"><a href="#__codelineno-0-252">252</a></span>
<span class="normal"><a href="#__codelineno-0-253">253</a></span>
<span class="normal"><a href="#__codelineno-0-254">254</a></span>
<span class="normal"><a href="#__codelineno-0-255">255</a></span>
<span class="normal"><a href="#__codelineno-0-256">256</a></span>
<span class="normal"><a href="#__codelineno-0-257">257</a></span>
<span class="normal"><a href="#__codelineno-0-258">258</a></span>
<span class="normal"><a href="#__codelineno-0-259">259</a></span>
<span class="normal"><a href="#__codelineno-0-260">260</a></span>
<span class="normal"><a href="#__codelineno-0-261">261</a></span>
<span class="normal"><a href="#__codelineno-0-262">262</a></span>
<span class="normal"><a href="#__codelineno-0-263">263</a></span>
<span class="normal"><a href="#__codelineno-0-264">264</a></span>
<span class="normal"><a href="#__codelineno-0-265">265</a></span>
<span class="normal"><a href="#__codelineno-0-266">266</a></span>
<span class="normal"><a href="#__codelineno-0-267">267</a></span>
<span class="normal"><a href="#__codelineno-0-268">268</a></span>
<span class="normal"><a href="#__codelineno-0-269">269</a></span>
<span class="normal"><a href="#__codelineno-0-270">270</a></span>
<span class="normal"><a href="#__codelineno-0-271">271</a></span>
<span class="normal"><a href="#__codelineno-0-272">272</a></span>
<span class="normal"><a href="#__codelineno-0-273">273</a></span>
<span class="normal"><a href="#__codelineno-0-274">274</a></span>
<span class="normal"><a href="#__codelineno-0-275">275</a></span>
<span class="normal"><a href="#__codelineno-0-276">276</a></span>
<span class="normal"><a href="#__codelineno-0-277">277</a></span>
<span class="normal"><a href="#__codelineno-0-278">278</a></span>
<span class="normal"><a href="#__codelineno-0-279">279</a></span>
<span class="normal"><a href="#__codelineno-0-280">280</a></span>
<span class="normal"><a href="#__codelineno-0-281">281</a></span>
<span class="normal"><a href="#__codelineno-0-282">282</a></span>
<span class="normal"><a href="#__codelineno-0-283">283</a></span>
<span class="normal"><a href="#__codelineno-0-284">284</a></span>
<span class="normal"><a href="#__codelineno-0-285">285</a></span>
<span class="normal"><a href="#__codelineno-0-286">286</a></span>
<span class="normal"><a href="#__codelineno-0-287">287</a></span>
<span class="normal"><a href="#__codelineno-0-288">288</a></span>
<span class="normal"><a href="#__codelineno-0-289">289</a></span>
<span class="normal"><a href="#__codelineno-0-290">290</a></span>
<span class="normal"><a href="#__codelineno-0-291">291</a></span>
<span class="normal"><a href="#__codelineno-0-292">292</a></span>
<span class="normal"><a href="#__codelineno-0-293">293</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-239" name="__codelineno-0-239"></a><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
<a id="__codelineno-0-240" name="__codelineno-0-240"></a>    <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">TritonConfig</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">workspace</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Workspace</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-241" name="__codelineno-0-241"></a><span class="p">):</span>
<a id="__codelineno-0-242" name="__codelineno-0-242"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize Triton Inference Server context for starting server and loading models.</span>
<a id="__codelineno-0-243" name="__codelineno-0-243"></a>
<a id="__codelineno-0-244" name="__codelineno-0-244"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-245" name="__codelineno-0-245"></a><span class="sd">        config: TritonConfig object with optional customizations for Triton Inference Server.</span>
<a id="__codelineno-0-246" name="__codelineno-0-246"></a><span class="sd">            Configuration can be passed also through environment variables.</span>
<a id="__codelineno-0-247" name="__codelineno-0-247"></a><span class="sd">            See [TritonConfig.from_env()][pytriton.triton.TritonConfig.from_env] class method for details.</span>
<a id="__codelineno-0-248" name="__codelineno-0-248"></a>
<a id="__codelineno-0-249" name="__codelineno-0-249"></a><span class="sd">            Order of precedence:</span>
<a id="__codelineno-0-250" name="__codelineno-0-250"></a>
<a id="__codelineno-0-251" name="__codelineno-0-251"></a><span class="sd">              - config defined through `config` parameter of init method.</span>
<a id="__codelineno-0-252" name="__codelineno-0-252"></a><span class="sd">              - config defined in environment variables</span>
<a id="__codelineno-0-253" name="__codelineno-0-253"></a><span class="sd">              - default TritonConfig values</span>
<a id="__codelineno-0-254" name="__codelineno-0-254"></a><span class="sd">        workspace: workspace or path where the Triton Model Store and files used by pytriton will be created.</span>
<a id="__codelineno-0-255" name="__codelineno-0-255"></a><span class="sd">            If workspace is `None` random workspace will be created.</span>
<a id="__codelineno-0-256" name="__codelineno-0-256"></a><span class="sd">            Workspace will be deleted in [Triton.stop()][pytriton.triton.Triton.stop].</span>
<a id="__codelineno-0-257" name="__codelineno-0-257"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-258" name="__codelineno-0-258"></a>
<a id="__codelineno-0-259" name="__codelineno-0-259"></a>    <span class="k">def</span> <span class="nf">_without_none_values</span><span class="p">(</span><span class="n">_d</span><span class="p">):</span>
<a id="__codelineno-0-260" name="__codelineno-0-260"></a>        <span class="k">return</span> <span class="p">{</span><span class="n">name</span><span class="p">:</span> <span class="n">value</span> <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">_d</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">}</span>
<a id="__codelineno-0-261" name="__codelineno-0-261"></a>
<a id="__codelineno-0-262" name="__codelineno-0-262"></a>    <span class="n">default_config_dict</span> <span class="o">=</span> <span class="n">_without_none_values</span><span class="p">(</span><span class="n">TritonConfig</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">())</span>
<a id="__codelineno-0-263" name="__codelineno-0-263"></a>    <span class="n">env_config_dict</span> <span class="o">=</span> <span class="n">_without_none_values</span><span class="p">(</span><span class="n">TritonConfig</span><span class="o">.</span><span class="n">from_env</span><span class="p">()</span><span class="o">.</span><span class="n">to_dict</span><span class="p">())</span>
<a id="__codelineno-0-264" name="__codelineno-0-264"></a>    <span class="n">explicit_config_dict</span> <span class="o">=</span> <span class="n">_without_none_values</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span> <span class="k">if</span> <span class="n">config</span> <span class="k">else</span> <span class="p">{})</span>
<a id="__codelineno-0-265" name="__codelineno-0-265"></a>    <span class="n">config_dict</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="n">default_config_dict</span><span class="p">,</span> <span class="o">**</span><span class="n">env_config_dict</span><span class="p">,</span> <span class="o">**</span><span class="n">explicit_config_dict</span><span class="p">}</span>
<a id="__codelineno-0-266" name="__codelineno-0-266"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_config</span> <span class="o">=</span> <span class="n">TritonConfig</span><span class="p">(</span><span class="o">**</span><span class="n">config_dict</span><span class="p">)</span>
<a id="__codelineno-0-267" name="__codelineno-0-267"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span> <span class="o">=</span> <span class="n">workspace</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">workspace</span><span class="p">,</span> <span class="n">Workspace</span><span class="p">)</span> <span class="k">else</span> <span class="n">Workspace</span><span class="p">(</span><span class="n">workspace</span><span class="p">)</span>
<a id="__codelineno-0-268" name="__codelineno-0-268"></a>
<a id="__codelineno-0-269" name="__codelineno-0-269"></a>    <span class="n">model_repository</span> <span class="o">=</span> <span class="n">TritonModelRepository</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">model_repository</span><span class="p">,</span> <span class="n">workspace</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span><span class="p">)</span>
<a id="__codelineno-0-270" name="__codelineno-0-270"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_model_manager</span> <span class="o">=</span> <span class="n">ModelManager</span><span class="p">(</span><span class="n">model_repository</span><span class="p">)</span>
<a id="__codelineno-0-271" name="__codelineno-0-271"></a>
<a id="__codelineno-0-272" name="__codelineno-0-272"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_triton_server_config</span> <span class="o">=</span> <span class="n">TritonServerConfig</span><span class="p">()</span>
<a id="__codelineno-0-273" name="__codelineno-0-273"></a>    <span class="n">config_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
<a id="__codelineno-0-274" name="__codelineno-0-274"></a>    <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">config_data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<a id="__codelineno-0-275" name="__codelineno-0-275"></a>        <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">TritonServerConfig</span><span class="o">.</span><span class="n">allowed_keys</span><span class="p">()</span> <span class="ow">or</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-276" name="__codelineno-0-276"></a>            <span class="k">continue</span>
<a id="__codelineno-0-277" name="__codelineno-0-277"></a>
<a id="__codelineno-0-278" name="__codelineno-0-278"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_triton_server_config</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
<a id="__codelineno-0-279" name="__codelineno-0-279"></a>
<a id="__codelineno-0-280" name="__codelineno-0-280"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_triton_server_config</span><span class="p">[</span><span class="s2">&quot;model_repository&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">model_repository</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">as_posix</span><span class="p">()</span>
<a id="__codelineno-0-281" name="__codelineno-0-281"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_triton_server_config</span><span class="p">[</span><span class="s2">&quot;backend_directory&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">TRITONSERVER_DIST_DIR</span> <span class="o">/</span> <span class="s2">&quot;backends&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">as_posix</span><span class="p">()</span>
<a id="__codelineno-0-282" name="__codelineno-0-282"></a>
<a id="__codelineno-0-283" name="__codelineno-0-283"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_triton_server</span> <span class="o">=</span> <span class="n">TritonServer</span><span class="p">(</span>
<a id="__codelineno-0-284" name="__codelineno-0-284"></a>        <span class="n">path</span><span class="o">=</span><span class="p">(</span><span class="n">TRITONSERVER_DIST_DIR</span> <span class="o">/</span> <span class="s2">&quot;bin/tritonserver&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">as_posix</span><span class="p">(),</span>
<a id="__codelineno-0-285" name="__codelineno-0-285"></a>        <span class="n">libs_path</span><span class="o">=</span><span class="n">get_libs_path</span><span class="p">(),</span>
<a id="__codelineno-0-286" name="__codelineno-0-286"></a>        <span class="n">config</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_triton_server_config</span><span class="p">,</span>
<a id="__codelineno-0-287" name="__codelineno-0-287"></a>    <span class="p">)</span>
<a id="__codelineno-0-288" name="__codelineno-0-288"></a>
<a id="__codelineno-0-289" name="__codelineno-0-289"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_cv</span> <span class="o">=</span> <span class="n">th</span><span class="o">.</span><span class="n">Condition</span><span class="p">()</span>
<a id="__codelineno-0-290" name="__codelineno-0-290"></a>    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cv</span><span class="p">:</span>
<a id="__codelineno-0-291" name="__codelineno-0-291"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_stopped</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-292" name="__codelineno-0-292"></a>
<a id="__codelineno-0-293" name="__codelineno-0-293"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">triton_context</span> <span class="o">=</span> <span class="n">TritonContext</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
          </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="pytriton.triton.Triton.__enter__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__enter__</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Enter the context.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="pytriton.triton.Triton" href="#pytriton.triton.Triton">Triton</a></code>
          </td>
          <td><p>A Triton object</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pytriton/triton.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-295">295</a></span>
<span class="normal"><a href="#__codelineno-0-296">296</a></span>
<span class="normal"><a href="#__codelineno-0-297">297</a></span>
<span class="normal"><a href="#__codelineno-0-298">298</a></span>
<span class="normal"><a href="#__codelineno-0-299">299</a></span>
<span class="normal"><a href="#__codelineno-0-300">300</a></span>
<span class="normal"><a href="#__codelineno-0-301">301</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-295" name="__codelineno-0-295"></a><span class="k">def</span> <span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Triton&quot;</span><span class="p">:</span>
<a id="__codelineno-0-296" name="__codelineno-0-296"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Enter the context.</span>
<a id="__codelineno-0-297" name="__codelineno-0-297"></a>
<a id="__codelineno-0-298" name="__codelineno-0-298"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-299" name="__codelineno-0-299"></a><span class="sd">        A Triton object</span>
<a id="__codelineno-0-300" name="__codelineno-0-300"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-301" name="__codelineno-0-301"></a>    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pytriton.triton.Triton.__exit__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__exit__</span><span class="p">(</span><span class="o">*</span><span class="n">_</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Exit the context stopping the process and cleaning the workspace.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>*_</code></td>
          <td>
          </td>
          <td><p>unused arguments</p></td>
          <td>
                <code>()</code>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pytriton/triton.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-303">303</a></span>
<span class="normal"><a href="#__codelineno-0-304">304</a></span>
<span class="normal"><a href="#__codelineno-0-305">305</a></span>
<span class="normal"><a href="#__codelineno-0-306">306</a></span>
<span class="normal"><a href="#__codelineno-0-307">307</a></span>
<span class="normal"><a href="#__codelineno-0-308">308</a></span>
<span class="normal"><a href="#__codelineno-0-309">309</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-303" name="__codelineno-0-303"></a><span class="k">def</span> <span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">_</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-304" name="__codelineno-0-304"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Exit the context stopping the process and cleaning the workspace.</span>
<a id="__codelineno-0-305" name="__codelineno-0-305"></a>
<a id="__codelineno-0-306" name="__codelineno-0-306"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-307" name="__codelineno-0-307"></a><span class="sd">        *_: unused arguments</span>
<a id="__codelineno-0-308" name="__codelineno-0-308"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-309" name="__codelineno-0-309"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pytriton.triton.Triton.bind" class="doc doc-heading">
<code class="highlight language-python"><span class="n">bind</span><span class="p">(</span><span class="n">model_name</span><span class="p">,</span> <span class="n">infer_func</span><span class="p">,</span> <span class="n">inputs</span><span class="p">,</span> <span class="n">outputs</span><span class="p">,</span> <span class="n">model_version</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Create a model with given name and inference callable binding into Triton Inference Server.</p>
<p>More information about model configuration:
https://github.com/triton-inference-server/server/blob/main/docs/user_guide/model_configuration.md</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>infer_func</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<a class="autorefs autorefs-external" title="typing.Callable" href="https://docs.python.org/3/library/typing.html#typing.Callable">Callable</a>, <a class="autorefs autorefs-external" title="typing.Sequence" href="https://docs.python.org/3/library/typing.html#typing.Sequence">Sequence</a>[<a class="autorefs autorefs-external" title="typing.Callable" href="https://docs.python.org/3/library/typing.html#typing.Callable">Callable</a>]]</code>
          </td>
          <td><p>Inference callable to handle request/response from Triton Inference Server</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>inputs</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Sequence" href="https://docs.python.org/3/library/typing.html#typing.Sequence">Sequence</a>[<a class="autorefs autorefs-internal" title="pytriton.model_config.tensor.Tensor" href="#pytriton.model_config.tensor.Tensor">Tensor</a>]</code>
          </td>
          <td><p>Definition of model inputs</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>outputs</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Sequence" href="https://docs.python.org/3/library/typing.html#typing.Sequence">Sequence</a>[<a class="autorefs autorefs-internal" title="pytriton.model_config.tensor.Tensor" href="#pytriton.model_config.tensor.Tensor">Tensor</a>]</code>
          </td>
          <td><p>Definition of model outputs</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>model_name</code></td>
          <td>
                <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>
          </td>
          <td><p>Name under which model is available in Triton Inference Server. It can only contain</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>model_version</code></td>
          <td>
                <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>
          </td>
          <td><p>Version of model</p></td>
          <td>
                <code>1</code>
          </td>
        </tr>
        <tr>
          <td><code>config</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-internal" title="pytriton.models.model.ModelConfig" href="#pytriton.model_config.model_config.ModelConfig">ModelConfig</a>]</code>
          </td>
          <td><p>Model configuration for Triton Inference Server deployment</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pytriton/triton.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-367">367</a></span>
<span class="normal"><a href="#__codelineno-0-368">368</a></span>
<span class="normal"><a href="#__codelineno-0-369">369</a></span>
<span class="normal"><a href="#__codelineno-0-370">370</a></span>
<span class="normal"><a href="#__codelineno-0-371">371</a></span>
<span class="normal"><a href="#__codelineno-0-372">372</a></span>
<span class="normal"><a href="#__codelineno-0-373">373</a></span>
<span class="normal"><a href="#__codelineno-0-374">374</a></span>
<span class="normal"><a href="#__codelineno-0-375">375</a></span>
<span class="normal"><a href="#__codelineno-0-376">376</a></span>
<span class="normal"><a href="#__codelineno-0-377">377</a></span>
<span class="normal"><a href="#__codelineno-0-378">378</a></span>
<span class="normal"><a href="#__codelineno-0-379">379</a></span>
<span class="normal"><a href="#__codelineno-0-380">380</a></span>
<span class="normal"><a href="#__codelineno-0-381">381</a></span>
<span class="normal"><a href="#__codelineno-0-382">382</a></span>
<span class="normal"><a href="#__codelineno-0-383">383</a></span>
<span class="normal"><a href="#__codelineno-0-384">384</a></span>
<span class="normal"><a href="#__codelineno-0-385">385</a></span>
<span class="normal"><a href="#__codelineno-0-386">386</a></span>
<span class="normal"><a href="#__codelineno-0-387">387</a></span>
<span class="normal"><a href="#__codelineno-0-388">388</a></span>
<span class="normal"><a href="#__codelineno-0-389">389</a></span>
<span class="normal"><a href="#__codelineno-0-390">390</a></span>
<span class="normal"><a href="#__codelineno-0-391">391</a></span>
<span class="normal"><a href="#__codelineno-0-392">392</a></span>
<span class="normal"><a href="#__codelineno-0-393">393</a></span>
<span class="normal"><a href="#__codelineno-0-394">394</a></span>
<span class="normal"><a href="#__codelineno-0-395">395</a></span>
<span class="normal"><a href="#__codelineno-0-396">396</a></span>
<span class="normal"><a href="#__codelineno-0-397">397</a></span>
<span class="normal"><a href="#__codelineno-0-398">398</a></span>
<span class="normal"><a href="#__codelineno-0-399">399</a></span>
<span class="normal"><a href="#__codelineno-0-400">400</a></span>
<span class="normal"><a href="#__codelineno-0-401">401</a></span>
<span class="normal"><a href="#__codelineno-0-402">402</a></span>
<span class="normal"><a href="#__codelineno-0-403">403</a></span>
<span class="normal"><a href="#__codelineno-0-404">404</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-367" name="__codelineno-0-367"></a><span class="k">def</span> <span class="nf">bind</span><span class="p">(</span>
<a id="__codelineno-0-368" name="__codelineno-0-368"></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-369" name="__codelineno-0-369"></a>    <span class="n">model_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-0-370" name="__codelineno-0-370"></a>    <span class="n">infer_func</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Callable</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Callable</span><span class="p">]],</span>
<a id="__codelineno-0-371" name="__codelineno-0-371"></a>    <span class="n">inputs</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Tensor</span><span class="p">],</span>
<a id="__codelineno-0-372" name="__codelineno-0-372"></a>    <span class="n">outputs</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Tensor</span><span class="p">],</span>
<a id="__codelineno-0-373" name="__codelineno-0-373"></a>    <span class="n">model_version</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<a id="__codelineno-0-374" name="__codelineno-0-374"></a>    <span class="n">config</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ModelConfig</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-375" name="__codelineno-0-375"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-376" name="__codelineno-0-376"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a model with given name and inference callable binding into Triton Inference Server.</span>
<a id="__codelineno-0-377" name="__codelineno-0-377"></a>
<a id="__codelineno-0-378" name="__codelineno-0-378"></a><span class="sd">    More information about model configuration:</span>
<a id="__codelineno-0-379" name="__codelineno-0-379"></a><span class="sd">    https://github.com/triton-inference-server/server/blob/main/docs/user_guide/model_configuration.md</span>
<a id="__codelineno-0-380" name="__codelineno-0-380"></a>
<a id="__codelineno-0-381" name="__codelineno-0-381"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-382" name="__codelineno-0-382"></a><span class="sd">        infer_func: Inference callable to handle request/response from Triton Inference Server</span>
<a id="__codelineno-0-383" name="__codelineno-0-383"></a><span class="sd">        (or list of inference callable for multi instance model)</span>
<a id="__codelineno-0-384" name="__codelineno-0-384"></a><span class="sd">        inputs: Definition of model inputs</span>
<a id="__codelineno-0-385" name="__codelineno-0-385"></a><span class="sd">        outputs: Definition of model outputs</span>
<a id="__codelineno-0-386" name="__codelineno-0-386"></a><span class="sd">        model_name: Name under which model is available in Triton Inference Server. It can only contain</span>
<a id="__codelineno-0-387" name="__codelineno-0-387"></a><span class="sd">        alphanumeric characters, dots, underscores and dashes.</span>
<a id="__codelineno-0-388" name="__codelineno-0-388"></a><span class="sd">        model_version: Version of model</span>
<a id="__codelineno-0-389" name="__codelineno-0-389"></a><span class="sd">        config: Model configuration for Triton Inference Server deployment</span>
<a id="__codelineno-0-390" name="__codelineno-0-390"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-391" name="__codelineno-0-391"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_validate_model_name</span><span class="p">(</span><span class="n">model_name</span><span class="p">)</span>
<a id="__codelineno-0-392" name="__codelineno-0-392"></a>    <span class="n">model</span> <span class="o">=</span> <span class="n">Model</span><span class="p">(</span>
<a id="__codelineno-0-393" name="__codelineno-0-393"></a>        <span class="n">model_name</span><span class="o">=</span><span class="n">model_name</span><span class="p">,</span>
<a id="__codelineno-0-394" name="__codelineno-0-394"></a>        <span class="n">model_version</span><span class="o">=</span><span class="n">model_version</span><span class="p">,</span>
<a id="__codelineno-0-395" name="__codelineno-0-395"></a>        <span class="n">inference_fn</span><span class="o">=</span><span class="n">infer_func</span><span class="p">,</span>
<a id="__codelineno-0-396" name="__codelineno-0-396"></a>        <span class="n">inputs</span><span class="o">=</span><span class="n">inputs</span><span class="p">,</span>
<a id="__codelineno-0-397" name="__codelineno-0-397"></a>        <span class="n">outputs</span><span class="o">=</span><span class="n">outputs</span><span class="p">,</span>
<a id="__codelineno-0-398" name="__codelineno-0-398"></a>        <span class="n">config</span><span class="o">=</span><span class="n">config</span> <span class="k">if</span> <span class="n">config</span> <span class="k">else</span> <span class="n">ModelConfig</span><span class="p">(),</span>
<a id="__codelineno-0-399" name="__codelineno-0-399"></a>        <span class="n">workspace</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span><span class="p">,</span>
<a id="__codelineno-0-400" name="__codelineno-0-400"></a>        <span class="n">triton_context</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">triton_context</span><span class="p">,</span>
<a id="__codelineno-0-401" name="__codelineno-0-401"></a>    <span class="p">)</span>
<a id="__codelineno-0-402" name="__codelineno-0-402"></a>    <span class="n">model</span><span class="o">.</span><span class="n">on_model_event</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_on_model_event</span><span class="p">)</span>
<a id="__codelineno-0-403" name="__codelineno-0-403"></a>
<a id="__codelineno-0-404" name="__codelineno-0-404"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_model_manager</span><span class="o">.</span><span class="n">add_model</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pytriton.triton.Triton.is_alive" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_alive</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Verify is deployed models and server are alive.</p>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>
          </td>
          <td><p>True if server and loaded models are alive, False otherwise.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pytriton/triton.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-353">353</a></span>
<span class="normal"><a href="#__codelineno-0-354">354</a></span>
<span class="normal"><a href="#__codelineno-0-355">355</a></span>
<span class="normal"><a href="#__codelineno-0-356">356</a></span>
<span class="normal"><a href="#__codelineno-0-357">357</a></span>
<span class="normal"><a href="#__codelineno-0-358">358</a></span>
<span class="normal"><a href="#__codelineno-0-359">359</a></span>
<span class="normal"><a href="#__codelineno-0-360">360</a></span>
<span class="normal"><a href="#__codelineno-0-361">361</a></span>
<span class="normal"><a href="#__codelineno-0-362">362</a></span>
<span class="normal"><a href="#__codelineno-0-363">363</a></span>
<span class="normal"><a href="#__codelineno-0-364">364</a></span>
<span class="normal"><a href="#__codelineno-0-365">365</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-353" name="__codelineno-0-353"></a><span class="k">def</span> <span class="nf">is_alive</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-354" name="__codelineno-0-354"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Verify is deployed models and server are alive.</span>
<a id="__codelineno-0-355" name="__codelineno-0-355"></a>
<a id="__codelineno-0-356" name="__codelineno-0-356"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-357" name="__codelineno-0-357"></a><span class="sd">        True if server and loaded models are alive, False otherwise.</span>
<a id="__codelineno-0-358" name="__codelineno-0-358"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-359" name="__codelineno-0-359"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_triton_server</span><span class="o">.</span><span class="n">is_alive</span><span class="p">():</span>
<a id="__codelineno-0-360" name="__codelineno-0-360"></a>        <span class="k">return</span> <span class="kc">False</span>
<a id="__codelineno-0-361" name="__codelineno-0-361"></a>
<a id="__codelineno-0-362" name="__codelineno-0-362"></a>    <span class="k">for</span> <span class="n">model</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_manager</span><span class="o">.</span><span class="n">models</span><span class="p">:</span>
<a id="__codelineno-0-363" name="__codelineno-0-363"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">model</span><span class="o">.</span><span class="n">is_alive</span><span class="p">():</span>
<a id="__codelineno-0-364" name="__codelineno-0-364"></a>            <span class="k">return</span> <span class="kc">False</span>
<a id="__codelineno-0-365" name="__codelineno-0-365"></a>    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pytriton.triton.Triton.run" class="doc doc-heading">
<code class="highlight language-python"><span class="n">run</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Run Triton Inference Server.</p>

      <details class="quote">
        <summary>Source code in <code>pytriton/triton.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-311">311</a></span>
<span class="normal"><a href="#__codelineno-0-312">312</a></span>
<span class="normal"><a href="#__codelineno-0-313">313</a></span>
<span class="normal"><a href="#__codelineno-0-314">314</a></span>
<span class="normal"><a href="#__codelineno-0-315">315</a></span>
<span class="normal"><a href="#__codelineno-0-316">316</a></span>
<span class="normal"><a href="#__codelineno-0-317">317</a></span>
<span class="normal"><a href="#__codelineno-0-318">318</a></span>
<span class="normal"><a href="#__codelineno-0-319">319</a></span>
<span class="normal"><a href="#__codelineno-0-320">320</a></span>
<span class="normal"><a href="#__codelineno-0-321">321</a></span>
<span class="normal"><a href="#__codelineno-0-322">322</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-311" name="__codelineno-0-311"></a><span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-312" name="__codelineno-0-312"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Run Triton Inference Server.&quot;&quot;&quot;</span>
<a id="__codelineno-0-313" name="__codelineno-0-313"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_triton_server</span><span class="o">.</span><span class="n">is_alive</span><span class="p">():</span>
<a id="__codelineno-0-314" name="__codelineno-0-314"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_model_manager</span><span class="o">.</span><span class="n">create_models</span><span class="p">()</span>
<a id="__codelineno-0-315" name="__codelineno-0-315"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_triton_server</span><span class="o">.</span><span class="n">register_on_exit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_on_tritonserver_exit</span><span class="p">)</span>
<a id="__codelineno-0-316" name="__codelineno-0-316"></a>        <span class="n">atexit</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">)</span>
<a id="__codelineno-0-317" name="__codelineno-0-317"></a>
<a id="__codelineno-0-318" name="__codelineno-0-318"></a>        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cv</span><span class="p">:</span>
<a id="__codelineno-0-319" name="__codelineno-0-319"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_triton_server</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<a id="__codelineno-0-320" name="__codelineno-0-320"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_stopped</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-321" name="__codelineno-0-321"></a>
<a id="__codelineno-0-322" name="__codelineno-0-322"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_models</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pytriton.triton.Triton.serve" class="doc doc-heading">
<code class="highlight language-python"><span class="n">serve</span><span class="p">(</span><span class="n">monitoring_period_sec</span><span class="o">=</span><span class="n">MONITORING_PERIOD_SEC</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Run Triton Inference Server and lock thread for serving requests/response.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>monitoring_period_sec</code></td>
          <td>
                <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>
          </td>
          <td><p>the timeout of monitoring if Triton and models are available.
Every monitoring_period_sec seconds main thread wakes up and check if triton server and proxy backend
are still alive and sleep again. If triton or proxy is not alive - method returns.</p></td>
          <td>
                <code>MONITORING_PERIOD_SEC</code>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pytriton/triton.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-339">339</a></span>
<span class="normal"><a href="#__codelineno-0-340">340</a></span>
<span class="normal"><a href="#__codelineno-0-341">341</a></span>
<span class="normal"><a href="#__codelineno-0-342">342</a></span>
<span class="normal"><a href="#__codelineno-0-343">343</a></span>
<span class="normal"><a href="#__codelineno-0-344">344</a></span>
<span class="normal"><a href="#__codelineno-0-345">345</a></span>
<span class="normal"><a href="#__codelineno-0-346">346</a></span>
<span class="normal"><a href="#__codelineno-0-347">347</a></span>
<span class="normal"><a href="#__codelineno-0-348">348</a></span>
<span class="normal"><a href="#__codelineno-0-349">349</a></span>
<span class="normal"><a href="#__codelineno-0-350">350</a></span>
<span class="normal"><a href="#__codelineno-0-351">351</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-339" name="__codelineno-0-339"></a><span class="k">def</span> <span class="nf">serve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">monitoring_period_sec</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">MONITORING_PERIOD_SEC</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-340" name="__codelineno-0-340"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Run Triton Inference Server and lock thread for serving requests/response.</span>
<a id="__codelineno-0-341" name="__codelineno-0-341"></a>
<a id="__codelineno-0-342" name="__codelineno-0-342"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-343" name="__codelineno-0-343"></a><span class="sd">        monitoring_period_sec: the timeout of monitoring if Triton and models are available.</span>
<a id="__codelineno-0-344" name="__codelineno-0-344"></a><span class="sd">            Every monitoring_period_sec seconds main thread wakes up and check if triton server and proxy backend</span>
<a id="__codelineno-0-345" name="__codelineno-0-345"></a><span class="sd">            are still alive and sleep again. If triton or proxy is not alive - method returns.</span>
<a id="__codelineno-0-346" name="__codelineno-0-346"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-347" name="__codelineno-0-347"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<a id="__codelineno-0-348" name="__codelineno-0-348"></a>    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cv</span><span class="p">:</span>
<a id="__codelineno-0-349" name="__codelineno-0-349"></a>        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_alive</span><span class="p">():</span>
<a id="__codelineno-0-350" name="__codelineno-0-350"></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_cv</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">timeout</span><span class="o">=</span><span class="n">monitoring_period_sec</span><span class="p">)</span>
<a id="__codelineno-0-351" name="__codelineno-0-351"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="pytriton.triton.Triton.stop" class="doc doc-heading">
<code class="highlight language-python"><span class="n">stop</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Stop Triton Inference Server.</p>

      <details class="quote">
        <summary>Source code in <code>pytriton/triton.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-324">324</a></span>
<span class="normal"><a href="#__codelineno-0-325">325</a></span>
<span class="normal"><a href="#__codelineno-0-326">326</a></span>
<span class="normal"><a href="#__codelineno-0-327">327</a></span>
<span class="normal"><a href="#__codelineno-0-328">328</a></span>
<span class="normal"><a href="#__codelineno-0-329">329</a></span>
<span class="normal"><a href="#__codelineno-0-330">330</a></span>
<span class="normal"><a href="#__codelineno-0-331">331</a></span>
<span class="normal"><a href="#__codelineno-0-332">332</a></span>
<span class="normal"><a href="#__codelineno-0-333">333</a></span>
<span class="normal"><a href="#__codelineno-0-334">334</a></span>
<span class="normal"><a href="#__codelineno-0-335">335</a></span>
<span class="normal"><a href="#__codelineno-0-336">336</a></span>
<span class="normal"><a href="#__codelineno-0-337">337</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-324" name="__codelineno-0-324"></a><span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-325" name="__codelineno-0-325"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Stop Triton Inference Server.&quot;&quot;&quot;</span>
<a id="__codelineno-0-326" name="__codelineno-0-326"></a>    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cv</span><span class="p">:</span>
<a id="__codelineno-0-327" name="__codelineno-0-327"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stopped</span><span class="p">:</span>
<a id="__codelineno-0-328" name="__codelineno-0-328"></a>            <span class="k">return</span>
<a id="__codelineno-0-329" name="__codelineno-0-329"></a>        <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Stopping Triton Inference server and proxy backends&quot;</span><span class="p">)</span>
<a id="__codelineno-0-330" name="__codelineno-0-330"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_triton_server</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
<a id="__codelineno-0-331" name="__codelineno-0-331"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_model_manager</span><span class="o">.</span><span class="n">clean</span><span class="p">()</span>
<a id="__codelineno-0-332" name="__codelineno-0-332"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_workspace</span><span class="o">.</span><span class="n">clean</span><span class="p">()</span>
<a id="__codelineno-0-333" name="__codelineno-0-333"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_stopped</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-334" name="__codelineno-0-334"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_cv</span><span class="o">.</span><span class="n">notify_all</span><span class="p">()</span>
<a id="__codelineno-0-335" name="__codelineno-0-335"></a>
<a id="__codelineno-0-336" name="__codelineno-0-336"></a>    <span class="n">LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Stopped Triton Inference server and proxy backends&quot;</span><span class="p">)</span>
<a id="__codelineno-0-337" name="__codelineno-0-337"></a>    <span class="n">atexit</span><span class="o">.</span><span class="n">unregister</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="pytriton.model_config.tensor.Tensor" class="doc doc-heading">
        <code>pytriton.model_config.tensor.Tensor</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h2>


  <div class="doc doc-contents first">

  
      <p>Model input and output definition for Triton deployment.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>shape</code></td>
          <td>
                <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a></code>
          </td>
          <td><p>Shape of the input/output tensor.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>dtype</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Union" href="https://docs.python.org/3/library/typing.html#typing.Union">Union</a>[<span title="numpy">np</span>.<span title="numpy.dtype">dtype</span>, <a class="autorefs autorefs-external" title="typing.Type" href="https://docs.python.org/3/library/typing.html#typing.Type">Type</a>[<span title="numpy">np</span>.<span title="numpy.dtype">dtype</span>], <a class="autorefs autorefs-external" title="typing.Type" href="https://docs.python.org/3/library/typing.html#typing.Type">Type</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#object">object</a>]]</code>
          </td>
          <td><p>Data type of the input/output tensor.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>name</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</code>
          </td>
          <td><p>Name of the input/output of model.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>optional</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a>]</code>
          </td>
          <td><p>Flag to mark if input is optional.</p></td>
          <td>
                <code>False</code>
          </td>
        </tr>
    </tbody>
  </table>



  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="pytriton.model_config.tensor.Tensor.__post_init__" class="doc doc-heading">
<code class="highlight language-python"><span class="n">__post_init__</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Override object values on post init or field override.</p>

      <details class="quote">
        <summary>Source code in <code>pytriton/model_config/tensor.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-53">53</a></span>
<span class="normal"><a href="#__codelineno-0-54">54</a></span>
<span class="normal"><a href="#__codelineno-0-55">55</a></span>
<span class="normal"><a href="#__codelineno-0-56">56</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-53" name="__codelineno-0-53"></a><span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Override object values on post init or field override.&quot;&quot;&quot;</span>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a>    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dtype</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">dtype</span><span class="p">):</span>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a>        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;dtype&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dtype</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>  <span class="c1"># pytype: disable=attribute-error</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="pytriton.model_config.common" class="doc doc-heading">
          <code>pytriton.model_config.common</code>


</h2>

  <div class="doc doc-contents first">
  
      <p>Common structures for internal and external ModelConfig.</p>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="pytriton.model_config.common.DeviceKind" class="doc doc-heading">
        <code>DeviceKind</code>


</h3>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/enum.html#module-enum">enum</a>.<a class="autorefs autorefs-external" title="enum.Enum" href="https://docs.python.org/3/library/enum.html#enum.Enum">Enum</a></code></p>

  
      <p>Device kind for model deployment.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>KIND_AUTO</code></td>
          <td>
          </td>
          <td><p>Automatically select the device for model deployment.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>KIND_CPU</code></td>
          <td>
          </td>
          <td><p>Model is deployed on CPU.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>KIND_GPU</code></td>
          <td>
          </td>
          <td><p>Model is deployed on GPU.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="pytriton.model_config.common.DynamicBatcher" class="doc doc-heading">
        <code>DynamicBatcher</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">

  
      <p>Dynamic batcher configuration.</p>
<p>More in Triton Inference Server <a href="https://github.com/triton-inference-server/common/blob/main/protobuf/model_config.proto#L1104">documentation</a></p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>max_queue_delay_microseconds</code></td>
          <td>
                <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>
          </td>
          <td><p>The maximum time, in microseconds, a request will be delayed in
                          the scheduling queue to wait for additional requests for batching.</p></td>
          <td>
                <code>0</code>
          </td>
        </tr>
        <tr>
          <td><code>preferred_batch_size</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#list">list</a>]</code>
          </td>
          <td><p>Preferred batch sizes for dynamic batching.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>preserve_ordering</code></td>
          <td>
          </td>
          <td><p>Should the dynamic batcher preserve the ordering of responses to
                match the order of requests received by the scheduler.</p></td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>priority_levels</code></td>
          <td>
                <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>
          </td>
          <td><p>The number of priority levels to be enabled for the model.</p></td>
          <td>
                <code>0</code>
          </td>
        </tr>
        <tr>
          <td><code>default_priority_level</code></td>
          <td>
                <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>
          </td>
          <td><p>The priority level used for requests that don't specify their priority.</p></td>
          <td>
                <code>0</code>
          </td>
        </tr>
        <tr>
          <td><code>default_queue_policy</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-internal" title="pytriton.model_config.common.QueuePolicy" href="#pytriton.model_config.common.QueuePolicy">QueuePolicy</a>]</code>
          </td>
          <td><p>The default queue policy used for requests.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>priority_queue_policy</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a>, <a class="autorefs autorefs-internal" title="pytriton.model_config.common.QueuePolicy" href="#pytriton.model_config.common.QueuePolicy">QueuePolicy</a>]]</code>
          </td>
          <td><p>Specify the queue policy for the priority level.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>



  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="pytriton.model_config.common.QueuePolicy" class="doc doc-heading">
        <code>QueuePolicy</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">

  
      <p>Model queue policy configuration.</p>
<p>More in Triton Inference Server <a href="https://github.com/triton-inference-server/common/blob/main/protobuf/model_config.proto#L1037">documentation</a></p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>timeout_action</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="pytriton.model_config.common.TimeoutAction" href="#pytriton.model_config.common.TimeoutAction">TimeoutAction</a></code>
          </td>
          <td><p>The action applied to timed-out request.</p></td>
          <td>
                <code>TimeoutAction.REJECT</code>
          </td>
        </tr>
        <tr>
          <td><code>default_timeout_microseconds</code></td>
          <td>
                <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>
          </td>
          <td><p>The default timeout for every request, in microseconds.</p></td>
          <td>
                <code>0</code>
          </td>
        </tr>
        <tr>
          <td><code>allow_timeout_override</code></td>
          <td>
                <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>
          </td>
          <td><p>Whether individual request can override the default timeout value.</p></td>
          <td>
                <code>False</code>
          </td>
        </tr>
        <tr>
          <td><code>max_queue_size</code></td>
          <td>
                <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>
          </td>
          <td><p>The maximum queue size for holding requests.</p></td>
          <td>
                <code>0</code>
          </td>
        </tr>
    </tbody>
  </table>



  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="pytriton.model_config.common.TimeoutAction" class="doc doc-heading">
        <code>TimeoutAction</code>


</h3>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/enum.html#module-enum">enum</a>.<a class="autorefs autorefs-external" title="enum.Enum" href="https://docs.python.org/3/library/enum.html#enum.Enum">Enum</a></code></p>

  
      <p>Timeout action definition for timeout_action QueuePolicy field.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>REJECT</code></td>
          <td>
          </td>
          <td><p>Reject the request and return error message accordingly.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>DELAY</code></td>
          <td>
          </td>
          <td><p>Delay the request until all other requests at the same (or higher) priority levels
that have not reached their timeouts are processed.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>



  

  <div class="doc doc-children">











  </div>

  </div>

</div>




  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="pytriton.model_config.model_config.ModelConfig" class="doc doc-heading">
        <code>pytriton.model_config.model_config.ModelConfig</code>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h2>


  <div class="doc doc-contents first">

  
      <p>Additional model configuration for running model through Triton Inference Server.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>batching</code></td>
          <td>
                <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>
          </td>
          <td><p>Flag to enable/disable batching for model.</p></td>
          <td>
                <code>True</code>
          </td>
        </tr>
        <tr>
          <td><code>max_batch_size</code></td>
          <td>
                <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#int">int</a></code>
          </td>
          <td><p>The maximal batch size that would be handled by model.</p></td>
          <td>
                <code>4</code>
          </td>
        </tr>
        <tr>
          <td><code>batcher</code></td>
          <td>
                <code><a class="autorefs autorefs-internal" title="pytriton.model_config.DynamicBatcher" href="#pytriton.model_config.common.DynamicBatcher">DynamicBatcher</a></code>
          </td>
          <td><p>Configuration of Dynamic Batching for the model.</p></td>
          <td>
                <code>DynamicBatcher()</code>
          </td>
        </tr>
        <tr>
          <td><code>response_cache</code></td>
          <td>
                <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>
          </td>
          <td><p>Flag to enable/disable response cache for the model</p></td>
          <td>
                <code>False</code>
          </td>
        </tr>
    </tbody>
  </table>



  

  <div class="doc doc-children">











  </div>

  </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="pytriton.client.client" class="doc doc-heading">
          <code>pytriton.client.client</code>


</h2>

  <div class="doc doc-contents first">
  
      <p>Clients for easy interaction with models deployed on the Triton Inference Server.</p>

<details class="typical-usage-example">
  <summary>Typical usage example</summary>
  <p>with ModelClient("localhost", "MyModel") as client:
    result_dict = client.infer_sample(input_a=a, input_b=b)</p>
</details>
<details class="inference-inputs-can-be-provided-either-as-positional-or-keyword-arguments">
  <summary>Inference inputs can be provided either as positional or keyword arguments</summary>
  <p>result_dict = client.infer_sample(input1, input2)
result_dict = client.infer_sample(a=input1, b=input2)</p>
</details>      <p>Mixing of argument passing conventions is not supported and will raise PyTritonClientValueError.</p>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="pytriton.client.client.ModelClient" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ModelClient</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">model_name</span><span class="p">,</span> <span class="n">model_version</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">lazy_init</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">init_timeout_s</span><span class="o">=</span><span class="n">_DEFAULT_INIT_TIMEOUT_S</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">

  
      <p>Synchronous client for model deployed on the Triton Inference Server.</p>

  
      <p>Inits ModelClient for given model deployed on the Triton Inference Server.</p>
<p>If <code>lazy_init</code> argument is False, model configuration will be read
from inference server during initialization.</p>

<details class="common-usage">
  <summary>Common usage</summary>
  <p>with ModelClient("localhost", "BERT") as client
    result_dict = client.infer_sample(input1_sample, input2_sample)</p>
</details>
  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>url</code></td>
          <td>
                <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>
          </td>
          <td><p>The Triton Inference Server url, e.g. 'grpc://localhost:8001'.
In case no scheme is provided http scheme will be used as default.
In case no port is provided default port for given scheme will be used -
8001 for grpc scheme, 8000 for http scheme.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>model_name</code></td>
          <td>
                <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></code>
          </td>
          <td><p>name of the model to interact with.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>model_version</code></td>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Optional" href="https://docs.python.org/3/library/typing.html#typing.Optional">Optional</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>]</code>
          </td>
          <td><p>version of the model to interact with.
If model_version is None inference on latest model will be performed.
The latest versions of the model are numerically the greatest version numbers.</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
        <tr>
          <td><code>lazy_init</code></td>
          <td>
                <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#bool">bool</a></code>
          </td>
          <td><p>if initialization should be performed just before sending first request to inference server.</p></td>
          <td>
                <code>True</code>
          </td>
        </tr>
        <tr>
          <td><code>init_timeout_s</code></td>
          <td>
                <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></code>
          </td>
          <td><p>timeout for server and model being ready.</p></td>
          <td>
                <code>_DEFAULT_INIT_TIMEOUT_S</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>PyTritonClientModelUnavailableError</code>
          </td>
          <td><p>If model with given name (and version) is unavailable.</p></td>
        </tr>
        <tr>
          <td>
                <code><span title="pytriton.client.exceptions.PyTritonClientUrlParseError">PyTritonClientUrlParseError</span></code>
          </td>
          <td><p>In case of problems with parsing url.</p></td>
        </tr>
    </tbody>
  </table>

          <details class="quote">
            <summary>Source code in <code>pytriton/client/client.py</code></summary>
            <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-0-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-0-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-0-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-0-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-0-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-0-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-0-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-0-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-0-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-0-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-0-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-0-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-0-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-0-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-0-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-0-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-0-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-0-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-0-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-0-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-0-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-0-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-0-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-0-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-0-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-0-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-0-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-0-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-0-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-0-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span>
<span class="normal"><a href="#__codelineno-0-107">107</a></span>
<span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span>
<span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span>
<span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span>
<span class="normal"><a href="#__codelineno-0-125">125</a></span>
<span class="normal"><a href="#__codelineno-0-126">126</a></span>
<span class="normal"><a href="#__codelineno-0-127">127</a></span>
<span class="normal"><a href="#__codelineno-0-128">128</a></span>
<span class="normal"><a href="#__codelineno-0-129">129</a></span>
<span class="normal"><a href="#__codelineno-0-130">130</a></span>
<span class="normal"><a href="#__codelineno-0-131">131</a></span>
<span class="normal"><a href="#__codelineno-0-132">132</a></span>
<span class="normal"><a href="#__codelineno-0-133">133</a></span>
<span class="normal"><a href="#__codelineno-0-134">134</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-68" name="__codelineno-0-68"></a><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a>    <span class="bp">self</span><span class="p">,</span>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a>    <span class="n">url</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a>    <span class="n">model_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a>    <span class="n">model_version</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a>    <span class="o">*</span><span class="p">,</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a>    <span class="n">lazy_init</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a>    <span class="n">init_timeout_s</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">_DEFAULT_INIT_TIMEOUT_S</span><span class="p">,</span>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a><span class="p">):</span>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Inits ModelClient for given model deployed on the Triton Inference Server.</span>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a><span class="sd">    If `lazy_init` argument is False, model configuration will be read</span>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a><span class="sd">    from inference server during initialization.</span>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a>
<a id="__codelineno-0-82" name="__codelineno-0-82"></a><span class="sd">    Common usage:</span>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a><span class="sd">      with ModelClient(&quot;localhost&quot;, &quot;BERT&quot;) as client</span>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a><span class="sd">          result_dict = client.infer_sample(input1_sample, input2_sample)</span>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a><span class="sd">        url: The Triton Inference Server url, e.g. &#39;grpc://localhost:8001&#39;.</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a><span class="sd">            In case no scheme is provided http scheme will be used as default.</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a><span class="sd">            In case no port is provided default port for given scheme will be used -</span>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a><span class="sd">            8001 for grpc scheme, 8000 for http scheme.</span>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a><span class="sd">        model_name: name of the model to interact with.</span>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a><span class="sd">        model_version: version of the model to interact with.</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a><span class="sd">            If model_version is None inference on latest model will be performed.</span>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a><span class="sd">            The latest versions of the model are numerically the greatest version numbers.</span>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a><span class="sd">        lazy_init: if initialization should be performed just before sending first request to inference server.</span>
<a id="__codelineno-0-97" name="__codelineno-0-97"></a><span class="sd">        init_timeout_s: timeout for server and model being ready.</span>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a>
<a id="__codelineno-0-99" name="__codelineno-0-99"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a><span class="sd">        PyTritonClientModelUnavailableError: If model with given name (and version) is unavailable.</span>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a><span class="sd">        PyTritonClientTimeoutError:</span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a><span class="sd">            if `lazy_init` argument is False and wait time for server and model being ready exceeds `init_timeout_s`.</span>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a><span class="sd">        PyTritonClientUrlParseError: In case of problems with parsing url.</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a>        <span class="k">raise</span> <span class="n">PyTritonClientUrlParseError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Could not parse url </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a>
<a id="__codelineno-0-108" name="__codelineno-0-108"></a>    <span class="n">parsed_url</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">parse</span><span class="o">.</span><span class="n">urlparse</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">parsed_url</span><span class="o">.</span><span class="n">scheme</span> <span class="ow">or</span> <span class="n">parsed_url</span><span class="o">.</span><span class="n">scheme</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;grpc&quot;</span><span class="p">,</span> <span class="s2">&quot;http&quot;</span><span class="p">]:</span>
<a id="__codelineno-0-110" name="__codelineno-0-110"></a>        <span class="n">_LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Adding http scheme to </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a>        <span class="n">parsed_url</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">parse</span><span class="o">.</span><span class="n">urlparse</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;http://</span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a>    <span class="n">port</span> <span class="o">=</span> <span class="n">parsed_url</span><span class="o">.</span><span class="n">port</span> <span class="ow">or</span> <span class="p">{</span><span class="s2">&quot;grpc&quot;</span><span class="p">:</span> <span class="n">DEFAULT_GRPC_PORT</span><span class="p">,</span> <span class="s2">&quot;http&quot;</span><span class="p">:</span> <span class="n">DEFAULT_HTTP_PORT</span><span class="p">}[</span><span class="n">parsed_url</span><span class="o">.</span><span class="n">scheme</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">parsed_url</span><span class="o">.</span><span class="n">hostname</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">port</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_model_name</span> <span class="o">=</span> <span class="n">model_name</span>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_model_version</span> <span class="o">=</span> <span class="n">model_version</span>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_triton_client_lib</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;grpc&quot;</span><span class="p">:</span> <span class="n">tritonclient</span><span class="o">.</span><span class="n">grpc</span><span class="p">,</span> <span class="s2">&quot;http&quot;</span><span class="p">:</span> <span class="n">tritonclient</span><span class="o">.</span><span class="n">http</span><span class="p">}[</span><span class="n">parsed_url</span><span class="o">.</span><span class="n">scheme</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a>    <span class="n">_LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Creating InferenceServerClient for </span><span class="si">{</span><span class="n">parsed_url</span><span class="o">.</span><span class="n">scheme</span><span class="si">}</span><span class="s2">://</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_url</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a>    <span class="c1"># Monkey patch __del__ method from client to catch error in client when instance is garbage collected.</span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a>    <span class="c1"># This is needed because we are closing client in __exit__ method or in close method.</span>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a>    <span class="c1"># (InferenceClient uses gevent library which does not support closing twice from different threads)</span>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_monkey_patch_client</span><span class="p">()</span>
<a id="__codelineno-0-125" name="__codelineno-0-125"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_client</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_triton_client_lib</span><span class="o">.</span><span class="n">InferenceServerClient</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_url</span><span class="p">)</span>
<a id="__codelineno-0-126" name="__codelineno-0-126"></a>
<a id="__codelineno-0-127" name="__codelineno-0-127"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_request_id_generator</span> <span class="o">=</span> <span class="n">itertools</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-0-128" name="__codelineno-0-128"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_init_timeout_s</span> <span class="o">=</span> <span class="n">init_timeout_s</span>
<a id="__codelineno-0-129" name="__codelineno-0-129"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_model_config</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-130" name="__codelineno-0-130"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_model_ready</span> <span class="o">=</span> <span class="kc">None</span>
<a id="__codelineno-0-131" name="__codelineno-0-131"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_lazy_init</span> <span class="o">=</span> <span class="n">lazy_init</span>
<a id="__codelineno-0-132" name="__codelineno-0-132"></a>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lazy_init</span><span class="p">:</span>
<a id="__codelineno-0-134" name="__codelineno-0-134"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_wait_and_init_model_config</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_init_timeout_s</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
          </details>

  

  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="pytriton.client.client.ModelClient.model_config" class="doc doc-heading">
<code class="highlight language-python"><span class="n">model_config</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


  <div class="doc doc-contents ">
  
      <p>Obtain configuration of model deployed on the Triton Inference Server.</p>
<p>Also waits for server to get into readiness state.</p>
  </div>

</div>



<div class="doc doc-object doc-function">



<h4 id="pytriton.client.client.ModelClient.__enter__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__enter__</span><span class="p">()</span></code>

</h4>


  <div class="doc doc-contents ">
  
      <p>Create context for use _ModelClientBase as a context manager.</p>

      <details class="quote">
        <summary>Source code in <code>pytriton/client/client.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-136">136</a></span>
<span class="normal"><a href="#__codelineno-0-137">137</a></span>
<span class="normal"><a href="#__codelineno-0-138">138</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-136" name="__codelineno-0-136"></a><span class="k">def</span> <span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-137" name="__codelineno-0-137"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Create context for use _ModelClientBase as a context manager.&quot;&quot;&quot;</span>
<a id="__codelineno-0-138" name="__codelineno-0-138"></a>    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h4 id="pytriton.client.client.ModelClient.__exit__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__exit__</span><span class="p">(</span><span class="o">*</span><span class="n">_</span><span class="p">)</span></code>

</h4>


  <div class="doc doc-contents ">
  
      <p>Close resources used by _ModelClientBase when exiting from context.</p>

      <details class="quote">
        <summary>Source code in <code>pytriton/client/client.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-140">140</a></span>
<span class="normal"><a href="#__codelineno-0-141">141</a></span>
<span class="normal"><a href="#__codelineno-0-142">142</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-140" name="__codelineno-0-140"></a><span class="k">def</span> <span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">_</span><span class="p">):</span>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Close resources used by _ModelClientBase when exiting from context.&quot;&quot;&quot;</span>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h4 id="pytriton.client.client.ModelClient.close" class="doc doc-heading">
<code class="highlight language-python"><span class="n">close</span><span class="p">()</span></code>

</h4>


  <div class="doc doc-contents ">
  
      <p>Close resources used by _ModelClientBase.</p>

      <details class="quote">
        <summary>Source code in <code>pytriton/client/client.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-144">144</a></span>
<span class="normal"><a href="#__codelineno-0-145">145</a></span>
<span class="normal"><a href="#__codelineno-0-146">146</a></span>
<span class="normal"><a href="#__codelineno-0-147">147</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-144" name="__codelineno-0-144"></a><span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Close resources used by _ModelClientBase.&quot;&quot;&quot;</span>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a>    <span class="n">_LOGGER</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Closing InferenceServerClient&quot;</span><span class="p">)</span>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h4 id="pytriton.client.client.ModelClient.infer_batch" class="doc doc-heading">
<code class="highlight language-python"><span class="n">infer_batch</span><span class="p">(</span><span class="o">*</span><span class="n">inputs</span><span class="p">,</span> <span class="o">**</span><span class="n">named_inputs</span><span class="p">)</span></code>

</h4>


  <div class="doc doc-contents ">
  
      <p>Run synchronous inference on batched data.</p>

<details class="typical-usage">
  <summary>Typical usage</summary>
  <p>with ModelClient("localhost", "MyModel") as client:
    result_dict = client.infer_sample(input1, input2)</p>
</details>
<details class="inference-inputs-can-be-provided-either-as-positional-or-keyword-arguments">
  <summary>Inference inputs can be provided either as positional or keyword arguments</summary>
  <p>result_dict = client.infer_batch(input1, input2)
result_dict = client.infer_batch(a=input1, b=input2)</p>
</details>      <p>Mixing of argument passing conventions is not supported and will raise PyTritonClientValueError.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>*inputs</code></td>
          <td>
          </td>
          <td><p>inference inputs provided as positional arguments.</p></td>
          <td>
                <code>()</code>
          </td>
        </tr>
        <tr>
          <td><code>**named_inputs</code></td>
          <td>
          </td>
          <td><p>inference inputs provided as named arguments.</p></td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <span title="numpy">np</span>.<span title="numpy.ndarray">ndarray</span>]</code>
          </td>
          <td><p>dictionary with inference results, where dictionary keys are output names.</p></td>
        </tr>
    </tbody>
  </table>

  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="pytriton.client.exceptions.PyTritonClientValueError">PyTritonClientValueError</span></code>
          </td>
          <td><p>if mixing of positional and named arguments passing detected.</p></td>
        </tr>
        <tr>
          <td>
                <code><span title="pytriton.client.exceptions.PyTritonClientModelDoesntSupportBatchingError">PyTritonClientModelDoesntSupportBatchingError</span></code>
          </td>
          <td><p>if model doesn't support batching.</p></td>
        </tr>
        <tr>
          <td>
                <code>PyTritonClientModelUnavailableError</code>
          </td>
          <td><p>If model with given name (and version) is unavailable.</p></td>
        </tr>
        <tr>
          <td>
                <code><span title="pytriton.client.exceptions.PyTritonClientInferenceServerError">PyTritonClientInferenceServerError</span></code>
          </td>
          <td><p>If error occurred on inference callable or Triton Inference Server side.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pytriton/client/client.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-220">220</a></span>
<span class="normal"><a href="#__codelineno-0-221">221</a></span>
<span class="normal"><a href="#__codelineno-0-222">222</a></span>
<span class="normal"><a href="#__codelineno-0-223">223</a></span>
<span class="normal"><a href="#__codelineno-0-224">224</a></span>
<span class="normal"><a href="#__codelineno-0-225">225</a></span>
<span class="normal"><a href="#__codelineno-0-226">226</a></span>
<span class="normal"><a href="#__codelineno-0-227">227</a></span>
<span class="normal"><a href="#__codelineno-0-228">228</a></span>
<span class="normal"><a href="#__codelineno-0-229">229</a></span>
<span class="normal"><a href="#__codelineno-0-230">230</a></span>
<span class="normal"><a href="#__codelineno-0-231">231</a></span>
<span class="normal"><a href="#__codelineno-0-232">232</a></span>
<span class="normal"><a href="#__codelineno-0-233">233</a></span>
<span class="normal"><a href="#__codelineno-0-234">234</a></span>
<span class="normal"><a href="#__codelineno-0-235">235</a></span>
<span class="normal"><a href="#__codelineno-0-236">236</a></span>
<span class="normal"><a href="#__codelineno-0-237">237</a></span>
<span class="normal"><a href="#__codelineno-0-238">238</a></span>
<span class="normal"><a href="#__codelineno-0-239">239</a></span>
<span class="normal"><a href="#__codelineno-0-240">240</a></span>
<span class="normal"><a href="#__codelineno-0-241">241</a></span>
<span class="normal"><a href="#__codelineno-0-242">242</a></span>
<span class="normal"><a href="#__codelineno-0-243">243</a></span>
<span class="normal"><a href="#__codelineno-0-244">244</a></span>
<span class="normal"><a href="#__codelineno-0-245">245</a></span>
<span class="normal"><a href="#__codelineno-0-246">246</a></span>
<span class="normal"><a href="#__codelineno-0-247">247</a></span>
<span class="normal"><a href="#__codelineno-0-248">248</a></span>
<span class="normal"><a href="#__codelineno-0-249">249</a></span>
<span class="normal"><a href="#__codelineno-0-250">250</a></span>
<span class="normal"><a href="#__codelineno-0-251">251</a></span>
<span class="normal"><a href="#__codelineno-0-252">252</a></span>
<span class="normal"><a href="#__codelineno-0-253">253</a></span>
<span class="normal"><a href="#__codelineno-0-254">254</a></span>
<span class="normal"><a href="#__codelineno-0-255">255</a></span>
<span class="normal"><a href="#__codelineno-0-256">256</a></span>
<span class="normal"><a href="#__codelineno-0-257">257</a></span>
<span class="normal"><a href="#__codelineno-0-258">258</a></span>
<span class="normal"><a href="#__codelineno-0-259">259</a></span>
<span class="normal"><a href="#__codelineno-0-260">260</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-220" name="__codelineno-0-220"></a><span class="k">def</span> <span class="nf">infer_batch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">inputs</span><span class="p">,</span> <span class="o">**</span><span class="n">named_inputs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
<a id="__codelineno-0-221" name="__codelineno-0-221"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Run synchronous inference on batched data.</span>
<a id="__codelineno-0-222" name="__codelineno-0-222"></a>
<a id="__codelineno-0-223" name="__codelineno-0-223"></a><span class="sd">    Typical usage:</span>
<a id="__codelineno-0-224" name="__codelineno-0-224"></a>
<a id="__codelineno-0-225" name="__codelineno-0-225"></a><span class="sd">        with ModelClient(&quot;localhost&quot;, &quot;MyModel&quot;) as client:</span>
<a id="__codelineno-0-226" name="__codelineno-0-226"></a><span class="sd">            result_dict = client.infer_sample(input1, input2)</span>
<a id="__codelineno-0-227" name="__codelineno-0-227"></a>
<a id="__codelineno-0-228" name="__codelineno-0-228"></a><span class="sd">    Inference inputs can be provided either as positional or keyword arguments:</span>
<a id="__codelineno-0-229" name="__codelineno-0-229"></a>
<a id="__codelineno-0-230" name="__codelineno-0-230"></a><span class="sd">        result_dict = client.infer_batch(input1, input2)</span>
<a id="__codelineno-0-231" name="__codelineno-0-231"></a><span class="sd">        result_dict = client.infer_batch(a=input1, b=input2)</span>
<a id="__codelineno-0-232" name="__codelineno-0-232"></a>
<a id="__codelineno-0-233" name="__codelineno-0-233"></a><span class="sd">    Mixing of argument passing conventions is not supported and will raise PyTritonClientValueError.</span>
<a id="__codelineno-0-234" name="__codelineno-0-234"></a>
<a id="__codelineno-0-235" name="__codelineno-0-235"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-236" name="__codelineno-0-236"></a><span class="sd">        *inputs: inference inputs provided as positional arguments.</span>
<a id="__codelineno-0-237" name="__codelineno-0-237"></a><span class="sd">        **named_inputs: inference inputs provided as named arguments.</span>
<a id="__codelineno-0-238" name="__codelineno-0-238"></a>
<a id="__codelineno-0-239" name="__codelineno-0-239"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-240" name="__codelineno-0-240"></a><span class="sd">        dictionary with inference results, where dictionary keys are output names.</span>
<a id="__codelineno-0-241" name="__codelineno-0-241"></a>
<a id="__codelineno-0-242" name="__codelineno-0-242"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-243" name="__codelineno-0-243"></a><span class="sd">        PyTritonClientValueError: if mixing of positional and named arguments passing detected.</span>
<a id="__codelineno-0-244" name="__codelineno-0-244"></a><span class="sd">        PyTritonClientTimeoutError:</span>
<a id="__codelineno-0-245" name="__codelineno-0-245"></a><span class="sd">            in case of first method call, `lazy_init` argument is False</span>
<a id="__codelineno-0-246" name="__codelineno-0-246"></a><span class="sd">            and wait time for server and model being ready exceeds `init_timeout_s`</span>
<a id="__codelineno-0-247" name="__codelineno-0-247"></a><span class="sd">            or inference time exceeds `timeout_s`.</span>
<a id="__codelineno-0-248" name="__codelineno-0-248"></a><span class="sd">        PyTritonClientModelDoesntSupportBatchingError: if model doesn&#39;t support batching.</span>
<a id="__codelineno-0-249" name="__codelineno-0-249"></a><span class="sd">        PyTritonClientModelUnavailableError: If model with given name (and version) is unavailable.</span>
<a id="__codelineno-0-250" name="__codelineno-0-250"></a><span class="sd">        PyTritonClientInferenceServerError: If error occurred on inference callable or Triton Inference Server side.</span>
<a id="__codelineno-0-251" name="__codelineno-0-251"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-252" name="__codelineno-0-252"></a>    <span class="n">_verify_inputs_args</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">named_inputs</span><span class="p">)</span>
<a id="__codelineno-0-253" name="__codelineno-0-253"></a>
<a id="__codelineno-0-254" name="__codelineno-0-254"></a>    <span class="n">model_supports_batching</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_config</span><span class="o">.</span><span class="n">max_batch_size</span> <span class="o">&gt;</span> <span class="mi">0</span>
<a id="__codelineno-0-255" name="__codelineno-0-255"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">model_supports_batching</span><span class="p">:</span>
<a id="__codelineno-0-256" name="__codelineno-0-256"></a>        <span class="k">raise</span> <span class="n">PyTritonClientModelDoesntSupportBatchingError</span><span class="p">(</span>
<a id="__codelineno-0-257" name="__codelineno-0-257"></a>            <span class="sa">f</span><span class="s2">&quot;Model </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">model_config</span><span class="o">.</span><span class="n">model_name</span><span class="si">}</span><span class="s2"> doesn&#39;t support batching - use infer_sample method instead&quot;</span>
<a id="__codelineno-0-258" name="__codelineno-0-258"></a>        <span class="p">)</span>
<a id="__codelineno-0-259" name="__codelineno-0-259"></a>
<a id="__codelineno-0-260" name="__codelineno-0-260"></a>    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_infer</span><span class="p">(</span><span class="n">inputs</span> <span class="ow">or</span> <span class="n">named_inputs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h4 id="pytriton.client.client.ModelClient.infer_sample" class="doc doc-heading">
<code class="highlight language-python"><span class="n">infer_sample</span><span class="p">(</span><span class="o">*</span><span class="n">inputs</span><span class="p">,</span> <span class="o">**</span><span class="n">named_inputs</span><span class="p">)</span></code>

</h4>


  <div class="doc doc-contents ">
  
      <p>Run synchronous inference on single data sample.</p>

<details class="typical-usage">
  <summary>Typical usage</summary>
  <p>with ModelClient("localhost", "MyModel") as client:
    result_dict = client.infer_sample(input1, input2)</p>
</details>
<details class="inference-inputs-can-be-provided-either-as-positional-or-keyword-arguments">
  <summary>Inference inputs can be provided either as positional or keyword arguments</summary>
  <p>result_dict = client.infer_sample(input1, input2)
result_dict = client.infer_sample(a=input1, b=input2)</p>
</details>      <p>Mixing of argument passing conventions is not supported and will raise PyTritonClientRuntimeError.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>*inputs</code></td>
          <td>
          </td>
          <td><p>inference inputs provided as positional arguments.</p></td>
          <td>
                <code>()</code>
          </td>
        </tr>
        <tr>
          <td><code>**named_inputs</code></td>
          <td>
          </td>
          <td><p>inference inputs provided as named arguments.</p></td>
          <td>
                <code>{}</code>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-external" title="typing.Dict" href="https://docs.python.org/3/library/typing.html#typing.Dict">Dict</a>[<a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a>, <span title="numpy">np</span>.<span title="numpy.ndarray">ndarray</span>]</code>
          </td>
          <td><p>dictionary with inference results, where dictionary keys are output names.</p></td>
        </tr>
    </tbody>
  </table>

  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><span title="pytriton.client.exceptions.PyTritonClientValueError">PyTritonClientValueError</span></code>
          </td>
          <td><p>if mixing of positional and named arguments passing detected.</p></td>
        </tr>
        <tr>
          <td>
                <code>PyTritonClientModelUnavailableError</code>
          </td>
          <td><p>If model with given name (and version) is unavailable.</p></td>
        </tr>
        <tr>
          <td>
                <code><span title="pytriton.client.exceptions.PyTritonClientInferenceServerError">PyTritonClientInferenceServerError</span></code>
          </td>
          <td><p>If error occurred on inference callable or Triton Inference Server side.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pytriton/client/client.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-174">174</a></span>
<span class="normal"><a href="#__codelineno-0-175">175</a></span>
<span class="normal"><a href="#__codelineno-0-176">176</a></span>
<span class="normal"><a href="#__codelineno-0-177">177</a></span>
<span class="normal"><a href="#__codelineno-0-178">178</a></span>
<span class="normal"><a href="#__codelineno-0-179">179</a></span>
<span class="normal"><a href="#__codelineno-0-180">180</a></span>
<span class="normal"><a href="#__codelineno-0-181">181</a></span>
<span class="normal"><a href="#__codelineno-0-182">182</a></span>
<span class="normal"><a href="#__codelineno-0-183">183</a></span>
<span class="normal"><a href="#__codelineno-0-184">184</a></span>
<span class="normal"><a href="#__codelineno-0-185">185</a></span>
<span class="normal"><a href="#__codelineno-0-186">186</a></span>
<span class="normal"><a href="#__codelineno-0-187">187</a></span>
<span class="normal"><a href="#__codelineno-0-188">188</a></span>
<span class="normal"><a href="#__codelineno-0-189">189</a></span>
<span class="normal"><a href="#__codelineno-0-190">190</a></span>
<span class="normal"><a href="#__codelineno-0-191">191</a></span>
<span class="normal"><a href="#__codelineno-0-192">192</a></span>
<span class="normal"><a href="#__codelineno-0-193">193</a></span>
<span class="normal"><a href="#__codelineno-0-194">194</a></span>
<span class="normal"><a href="#__codelineno-0-195">195</a></span>
<span class="normal"><a href="#__codelineno-0-196">196</a></span>
<span class="normal"><a href="#__codelineno-0-197">197</a></span>
<span class="normal"><a href="#__codelineno-0-198">198</a></span>
<span class="normal"><a href="#__codelineno-0-199">199</a></span>
<span class="normal"><a href="#__codelineno-0-200">200</a></span>
<span class="normal"><a href="#__codelineno-0-201">201</a></span>
<span class="normal"><a href="#__codelineno-0-202">202</a></span>
<span class="normal"><a href="#__codelineno-0-203">203</a></span>
<span class="normal"><a href="#__codelineno-0-204">204</a></span>
<span class="normal"><a href="#__codelineno-0-205">205</a></span>
<span class="normal"><a href="#__codelineno-0-206">206</a></span>
<span class="normal"><a href="#__codelineno-0-207">207</a></span>
<span class="normal"><a href="#__codelineno-0-208">208</a></span>
<span class="normal"><a href="#__codelineno-0-209">209</a></span>
<span class="normal"><a href="#__codelineno-0-210">210</a></span>
<span class="normal"><a href="#__codelineno-0-211">211</a></span>
<span class="normal"><a href="#__codelineno-0-212">212</a></span>
<span class="normal"><a href="#__codelineno-0-213">213</a></span>
<span class="normal"><a href="#__codelineno-0-214">214</a></span>
<span class="normal"><a href="#__codelineno-0-215">215</a></span>
<span class="normal"><a href="#__codelineno-0-216">216</a></span>
<span class="normal"><a href="#__codelineno-0-217">217</a></span>
<span class="normal"><a href="#__codelineno-0-218">218</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-174" name="__codelineno-0-174"></a><span class="k">def</span> <span class="nf">infer_sample</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">inputs</span><span class="p">,</span> <span class="o">**</span><span class="n">named_inputs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
<a id="__codelineno-0-175" name="__codelineno-0-175"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Run synchronous inference on single data sample.</span>
<a id="__codelineno-0-176" name="__codelineno-0-176"></a>
<a id="__codelineno-0-177" name="__codelineno-0-177"></a><span class="sd">    Typical usage:</span>
<a id="__codelineno-0-178" name="__codelineno-0-178"></a>
<a id="__codelineno-0-179" name="__codelineno-0-179"></a><span class="sd">        with ModelClient(&quot;localhost&quot;, &quot;MyModel&quot;) as client:</span>
<a id="__codelineno-0-180" name="__codelineno-0-180"></a><span class="sd">            result_dict = client.infer_sample(input1, input2)</span>
<a id="__codelineno-0-181" name="__codelineno-0-181"></a>
<a id="__codelineno-0-182" name="__codelineno-0-182"></a><span class="sd">    Inference inputs can be provided either as positional or keyword arguments:</span>
<a id="__codelineno-0-183" name="__codelineno-0-183"></a>
<a id="__codelineno-0-184" name="__codelineno-0-184"></a><span class="sd">        result_dict = client.infer_sample(input1, input2)</span>
<a id="__codelineno-0-185" name="__codelineno-0-185"></a><span class="sd">        result_dict = client.infer_sample(a=input1, b=input2)</span>
<a id="__codelineno-0-186" name="__codelineno-0-186"></a>
<a id="__codelineno-0-187" name="__codelineno-0-187"></a><span class="sd">    Mixing of argument passing conventions is not supported and will raise PyTritonClientRuntimeError.</span>
<a id="__codelineno-0-188" name="__codelineno-0-188"></a>
<a id="__codelineno-0-189" name="__codelineno-0-189"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-190" name="__codelineno-0-190"></a><span class="sd">        *inputs: inference inputs provided as positional arguments.</span>
<a id="__codelineno-0-191" name="__codelineno-0-191"></a><span class="sd">        **named_inputs: inference inputs provided as named arguments.</span>
<a id="__codelineno-0-192" name="__codelineno-0-192"></a>
<a id="__codelineno-0-193" name="__codelineno-0-193"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-194" name="__codelineno-0-194"></a><span class="sd">        dictionary with inference results, where dictionary keys are output names.</span>
<a id="__codelineno-0-195" name="__codelineno-0-195"></a>
<a id="__codelineno-0-196" name="__codelineno-0-196"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-197" name="__codelineno-0-197"></a><span class="sd">        PyTritonClientValueError: if mixing of positional and named arguments passing detected.</span>
<a id="__codelineno-0-198" name="__codelineno-0-198"></a><span class="sd">        PyTritonClientTimeoutError:</span>
<a id="__codelineno-0-199" name="__codelineno-0-199"></a><span class="sd">            in case of first method call, `lazy_init` argument is False</span>
<a id="__codelineno-0-200" name="__codelineno-0-200"></a><span class="sd">            and wait time for server and model being ready exceeds `init_timeout_s`</span>
<a id="__codelineno-0-201" name="__codelineno-0-201"></a><span class="sd">            or inference time exceeds `timeout_s`.</span>
<a id="__codelineno-0-202" name="__codelineno-0-202"></a><span class="sd">        PyTritonClientModelUnavailableError: If model with given name (and version) is unavailable.</span>
<a id="__codelineno-0-203" name="__codelineno-0-203"></a><span class="sd">        PyTritonClientInferenceServerError: If error occurred on inference callable or Triton Inference Server side.</span>
<a id="__codelineno-0-204" name="__codelineno-0-204"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-205" name="__codelineno-0-205"></a>    <span class="n">_verify_inputs_args</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">named_inputs</span><span class="p">)</span>
<a id="__codelineno-0-206" name="__codelineno-0-206"></a>
<a id="__codelineno-0-207" name="__codelineno-0-207"></a>    <span class="n">model_supports_batching</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_config</span><span class="o">.</span><span class="n">max_batch_size</span> <span class="o">&gt;</span> <span class="mi">0</span>
<a id="__codelineno-0-208" name="__codelineno-0-208"></a>    <span class="k">if</span> <span class="n">model_supports_batching</span><span class="p">:</span>
<a id="__codelineno-0-209" name="__codelineno-0-209"></a>        <span class="k">if</span> <span class="n">inputs</span><span class="p">:</span>
<a id="__codelineno-0-210" name="__codelineno-0-210"></a>            <span class="n">inputs</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span> <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">inputs</span><span class="p">)</span>
<a id="__codelineno-0-211" name="__codelineno-0-211"></a>        <span class="k">elif</span> <span class="n">named_inputs</span><span class="p">:</span>
<a id="__codelineno-0-212" name="__codelineno-0-212"></a>            <span class="n">named_inputs</span> <span class="o">=</span> <span class="p">{</span><span class="n">name</span><span class="p">:</span> <span class="n">data</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span> <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">named_inputs</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
<a id="__codelineno-0-213" name="__codelineno-0-213"></a>
<a id="__codelineno-0-214" name="__codelineno-0-214"></a>    <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_infer</span><span class="p">(</span><span class="n">inputs</span> <span class="ow">or</span> <span class="n">named_inputs</span><span class="p">)</span>
<a id="__codelineno-0-215" name="__codelineno-0-215"></a>    <span class="k">if</span> <span class="n">model_supports_batching</span><span class="p">:</span>
<a id="__codelineno-0-216" name="__codelineno-0-216"></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">{</span><span class="n">name</span><span class="p">:</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
<a id="__codelineno-0-217" name="__codelineno-0-217"></a>
<a id="__codelineno-0-218" name="__codelineno-0-218"></a>    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h4 id="pytriton.client.client.ModelClient.wait_for_model" class="doc doc-heading">
<code class="highlight language-python"><span class="n">wait_for_model</span><span class="p">(</span><span class="n">timeout_s</span><span class="p">)</span></code>

</h4>


  <div class="doc doc-contents ">
  
      <p>Wait for Triton Inference Server and deployed on it model readiness.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>timeout_s</code></td>
          <td>
                <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/functions.html#float">float</a></code>
          </td>
          <td><p>timeout to server and model get into readiness state.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code>PyTritonClientTimeoutError</code>
          </td>
          <td><p>If server and model are not in readiness state before given timeout.</p></td>
        </tr>
        <tr>
          <td>
                <code>PyTritonClientModelUnavailableError</code>
          </td>
          <td><p>If model with given name (and version) is unavailable.</p></td>
        </tr>
        <tr>
          <td>
                <code><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/exceptions.html#KeyboardInterrupt">KeyboardInterrupt</a></code>
          </td>
          <td><p>If hosting process receives SIGINT</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>pytriton/client/client.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-149">149</a></span>
<span class="normal"><a href="#__codelineno-0-150">150</a></span>
<span class="normal"><a href="#__codelineno-0-151">151</a></span>
<span class="normal"><a href="#__codelineno-0-152">152</a></span>
<span class="normal"><a href="#__codelineno-0-153">153</a></span>
<span class="normal"><a href="#__codelineno-0-154">154</a></span>
<span class="normal"><a href="#__codelineno-0-155">155</a></span>
<span class="normal"><a href="#__codelineno-0-156">156</a></span>
<span class="normal"><a href="#__codelineno-0-157">157</a></span>
<span class="normal"><a href="#__codelineno-0-158">158</a></span>
<span class="normal"><a href="#__codelineno-0-159">159</a></span>
<span class="normal"><a href="#__codelineno-0-160">160</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-149" name="__codelineno-0-149"></a><span class="k">def</span> <span class="nf">wait_for_model</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timeout_s</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Wait for Triton Inference Server and deployed on it model readiness.</span>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a><span class="sd">        timeout_s: timeout to server and model get into readiness state.</span>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a><span class="sd">    Raises:</span>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a><span class="sd">        PyTritonClientTimeoutError: If server and model are not in readiness state before given timeout.</span>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a><span class="sd">        PyTritonClientModelUnavailableError: If model with given name (and version) is unavailable.</span>
<a id="__codelineno-0-158" name="__codelineno-0-158"></a><span class="sd">        KeyboardInterrupt: If hosting process receives SIGINT</span>
<a id="__codelineno-0-159" name="__codelineno-0-159"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-160" name="__codelineno-0-160"></a>    <span class="n">wait_for_model_ready</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_version</span><span class="p">,</span> <span class="n">timeout_s</span><span class="o">=</span><span class="n">timeout_s</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>




  </div>

  </div>

</div>





                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <!--
Copyright (c) 2022, NVIDIA CORPORATION. All rights reserved.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->
Copyright  2022 NVIDIA Corporation
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.top"], "search": "../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.19047be9.min.js"></script>
      
    
  </body>
</html>